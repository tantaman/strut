(function(){function t(t,e){var n,i,r=null,o=t.document;return o.selection?(n=o.selection.createRange(),n.collapse(e),n.parentElement()):(t.getSelection&&(i=t.getSelection(),i.rangeCount>0&&(n=i.getRangeAt(0),r=n[e?"startContainer":"endContainer"],3===r.nodeType&&(r=r.parentNode))),r)}define("../locales/de",{insert_image:"Bild einfügen",insert_video:"Video einfügen",insert_website:"Webseite einfügen",add_slide:"Folie hinzufügen",remove_slide:"Folie entfernen",slides:"Folien",overview:"Übersicht",open:"Öffnen",save:"Speichern",save_as:"Speichern als...",new_:"Neu",text:"Text",image:"Bild",video:"Video",website:"Webseite",present:"Präsentieren","export":"Exportieren...","import":"Importieren...",cut:"Ausschneiden",copy:"Kopieren",paste:"Einfügen","delete":"Löschen",undo:"Rückgängig",redo:"Wiederholen",shapes:"Formen",single_slide_bg:"Single Slide Background",invisible:"Unsichtbar",reset:"Zurücksetzen",strut_exporter_json:{explain:"Dies erlaubt Ihnen, eine Datei auf Ihrem Computer zu speichern, die Sie später wieder in Strut importieren können.",click_below:"Klicken sie zum Herunterladen auf das Symbol unten"},background:"Hintergrund",surface:"Oberfläche"}),define("../locales/en",{insert_image:"Insert Image",insert_video:"Insert Video",insert_website:"Insert Website",add_slide:"Add Slide",remove_slide:"Remove Slide",slides:"Slides",overview:"Overview",open:"Open",save:"Save",save_as:"Save as...",new_:"New",text:"Text",image:"Image",video:"Video",website:"Website",present:"Present","export":"Export...","import":"Import...",cut:"Cut",copy:"Copy",paste:"Paste","delete":"Delete",undo:"Undo",redo:"Redo",shapes:"Shapes",single_slide_bg:"Single Slide Background",invisible:"Invisible",reset:"Reset",strut_exporter_json:{explain:"This allows you to save a file on your computer that you can import back into Strut later.",click_below:"Click below to download"},background:"Background",surface:"Surface"}),define("../locales/es",{insert_image:"Insertar imagen",insert_video:"Insertarr vídeo",insert_website:"Insertar sitio web",add_slide:"Añadir    diapositiva",remove_slide:"Eliminar diapositiva",slides:"Diapositivas",overview:"Resumen",open:"Abrir",save:"Guardar",save_as:"Guardar como...",new_:"Nuevo",text:"Texto",image:"Imagen",video:"Vídeo",website:"Sitio Web",present:"Presentar","export":"Exportar...","import":"Importar...",cut:"Cortar",copy:"Copiar",paste:"Pegar","delete":"Borrar",undo:"Deshacer",redo:"Rehacer",shapes:"Formas",single_slide_bg:"Single Slide Background",invisible:"Invisible",reset:"Reajustar",strut_exporter_json:{explain:"Esto te permite guardar un archivo en tu ordenador que podrás importar en Strut posteriormente.",click_below:"Haz Copiarlick abajo para descargar."},background:"Fondo",surface:"Superficie"}),define("../locales/fr",{insert_image:"Insérer une image",insert_video:"Insérer une vidéo",insert_website:"Insérer un site web",add_slide:"Ajouter une diapo",remove_slide:"Supprimer la diapo",slides:"Diapos",overview:"Panorama",open:"Ouvrir",save:"Enregistrer",save_as:"Enregistrer sous...",new_:"Nouveau",text:"Texte",image:"Image",video:"Vidéo",website:"Site web",present:"Courant","export":"Exporter...","import":"Importer...",cut:"Couper",copy:"Copier",paste:"Coller","delete":"Effacer",undo:"Annuler",redo:"Refaire",shapes:"Formes",single_slide_bg:"Single Slide Background",invisible:"Invisible",reset:"Réinitialiser",strut_exporter_json:{explain:"Vous pouvez sauvegarder la présentation dans fichier que vous pourrez réimporter dans Strut plus tard",click_below:"Cliquer ci-dessous pour télécharger le fichier"},background:"Fond",surface:"Surface"}),this.Handlebars={},function(t){t.VERSION="1.0.0-rc.3",t.COMPILER_REVISION=2,t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:">= 1.0.0-rc.3"},t.helpers={},t.partials={},t.registerHelper=function(t,e,n){n&&(e.not=n),this.helpers[t]=e},t.registerPartial=function(t,e){this.partials[t]=e},t.registerHelper("helperMissing",function(t){if(2===arguments.length)return void 0;throw Error("Could not find property '"+t+"'")});var e=Object.prototype.toString,n="[object Function]";t.registerHelper("blockHelperMissing",function(i,r){var o=r.inverse||function(){},s=r.fn,a=e.call(i);return a===n&&(i=i.call(this)),i===!0?s(this):i===!1||null==i?o(this):"[object Array]"===a||i instanceof Array?i.length>0?t.helpers.each(i,r):o(this):s(i)}),t.K=function(){},t.createFrame=Object.create||function(e){t.K.prototype=e;var n=new t.K;return t.K.prototype=null,n},t.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(e,n){if(e>=t.logger.level){var i=t.logger.methodMap[e];"undefined"!=typeof console&&console[i]&&console[i].call(console,n)}}},t.log=function(e,n){t.logger.log(e,n)},t.registerHelper("each",function(e,n){var i,r=n.fn,o=n.inverse,s=0,a="";if(n.data&&(i=t.createFrame(n.data)),e&&"object"==typeof e)if(e instanceof Array)for(var l=e.length;l>s;s++)i&&(i.index=s),a+=r(e[s],{data:i});else for(var c in e)e.hasOwnProperty(c)&&(i&&(i.key=c),a+=r(e[c],{data:i}),s++);return 0===s&&(a=o(this)),a}),t.registerHelper("if",function(i,r){var o=e.call(i);return o===n&&(i=i.call(this)),!i||t.Utils.isEmpty(i)?r.inverse(this):r.fn(this)}),t.registerHelper("unless",function(e,n){var i=n.fn,r=n.inverse;return n.fn=r,n.inverse=i,t.helpers["if"].call(this,e,n)}),t.registerHelper("with",function(t,e){return e.fn(t)}),t.registerHelper("log",function(e,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;t.log(i,e)})}(this.Handlebars);var e=function(){function t(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,partialName:25,params:26,hash:27,DATA:28,param:29,STRING:30,INTEGER:31,BOOLEAN:32,hashSegments:33,hashSegment:34,ID:35,EQUALS:36,PARTIAL_NAME:37,pathSegments:38,SEP:39,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"DATA",30:"STRING",31:"INTEGER",32:"BOOLEAN",35:"ID",36:"EQUALS",37:"PARTIAL_NAME",39:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[26,2],[26,1],[29,1],[29,1],[29,1],[29,1],[29,1],[27,1],[33,2],[33,1],[34,3],[34,3],[34,3],[34,3],[34,3],[25,1],[21,1],[38,3],[38,1]],performAction:function(t,e,n,i,r,o){var s=o.length-1;switch(r){case 1:return o[s-1];case 2:this.$=new i.ProgramNode([],o[s]);break;case 3:this.$=new i.ProgramNode(o[s-2],o[s]);break;case 4:this.$=new i.ProgramNode(o[s-1],[]);break;case 5:this.$=new i.ProgramNode(o[s]);break;case 6:this.$=new i.ProgramNode([],[]);break;case 7:this.$=new i.ProgramNode([]);break;case 8:this.$=[o[s]];break;case 9:o[s-1].push(o[s]),this.$=o[s-1];break;case 10:this.$=new i.BlockNode(o[s-2],o[s-1].inverse,o[s-1],o[s]);break;case 11:this.$=new i.BlockNode(o[s-2],o[s-1],o[s-1].inverse,o[s]);break;case 12:this.$=o[s];break;case 13:this.$=o[s];break;case 14:this.$=new i.ContentNode(o[s]);break;case 15:this.$=new i.CommentNode(o[s]);break;case 16:this.$=new i.MustacheNode(o[s-1][0],o[s-1][1]);break;case 17:this.$=new i.MustacheNode(o[s-1][0],o[s-1][1]);break;case 18:this.$=o[s-1];break;case 19:this.$=new i.MustacheNode(o[s-1][0],o[s-1][1]);break;case 20:this.$=new i.MustacheNode(o[s-1][0],o[s-1][1],!0);break;case 21:this.$=new i.PartialNode(o[s-1]);break;case 22:this.$=new i.PartialNode(o[s-2],o[s-1]);break;case 23:break;case 24:this.$=[[o[s-2]].concat(o[s-1]),o[s]];break;case 25:this.$=[[o[s-1]].concat(o[s]),null];break;case 26:this.$=[[o[s-1]],o[s]];break;case 27:this.$=[[o[s]],null];break;case 28:this.$=[[new i.DataNode(o[s])],null];break;case 29:o[s-1].push(o[s]),this.$=o[s-1];break;case 30:this.$=[o[s]];break;case 31:this.$=o[s];break;case 32:this.$=new i.StringNode(o[s]);break;case 33:this.$=new i.IntegerNode(o[s]);break;case 34:this.$=new i.BooleanNode(o[s]);break;case 35:this.$=new i.DataNode(o[s]);break;case 36:this.$=new i.HashNode(o[s]);break;case 37:o[s-1].push(o[s]),this.$=o[s-1];break;case 38:this.$=[o[s]];break;case 39:this.$=[o[s-2],o[s]];break;case 40:this.$=[o[s-2],new i.StringNode(o[s])];break;case 41:this.$=[o[s-2],new i.IntegerNode(o[s])];break;case 42:this.$=[o[s-2],new i.BooleanNode(o[s])];break;case 43:this.$=[o[s-2],new i.DataNode(o[s])];break;case 44:this.$=new i.PartialNameNode(o[s]);break;case 45:this.$=new i.IdNode(o[s]);break;case 46:o[s-2].push(o[s]),this.$=o[s-2];break;case 47:this.$=[o[s]]}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],24:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],24:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],24:[1,16]},{17:23,18:[1,22],21:24,28:[1,25],35:[1,27],38:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{4:28,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{17:30,21:24,28:[1,25],35:[1,27],38:26},{17:31,21:24,28:[1,25],35:[1,27],38:26},{17:32,21:24,28:[1,25],35:[1,27],38:26},{25:33,37:[1,34]},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],24:[1,16]},{17:23,21:24,28:[1,25],35:[1,27],38:26},{5:[2,4],7:35,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],24:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],24:[2,23]},{18:[1,36]},{18:[2,27],21:41,26:37,27:38,28:[1,45],29:39,30:[1,42],31:[1,43],32:[1,44],33:40,34:46,35:[1,47],38:26},{18:[2,28]},{18:[2,45],28:[2,45],30:[2,45],31:[2,45],32:[2,45],35:[2,45],39:[1,48]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],39:[2,47]},{10:49,20:[1,50]},{10:51,20:[1,50]},{18:[1,52]},{18:[1,53]},{18:[1,54]},{18:[1,55],21:56,35:[1,27],38:26},{18:[2,44],35:[2,44]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],24:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{18:[2,25],21:41,27:57,28:[1,45],29:58,30:[1,42],31:[1,43],32:[1,44],33:40,34:46,35:[1,47],38:26},{18:[2,26]},{18:[2,30],28:[2,30],30:[2,30],31:[2,30],32:[2,30],35:[2,30]},{18:[2,36],34:59,35:[1,60]},{18:[2,31],28:[2,31],30:[2,31],31:[2,31],32:[2,31],35:[2,31]},{18:[2,32],28:[2,32],30:[2,32],31:[2,32],32:[2,32],35:[2,32]},{18:[2,33],28:[2,33],30:[2,33],31:[2,33],32:[2,33],35:[2,33]},{18:[2,34],28:[2,34],30:[2,34],31:[2,34],32:[2,34],35:[2,34]},{18:[2,35],28:[2,35],30:[2,35],31:[2,35],32:[2,35],35:[2,35]},{18:[2,38],35:[2,38]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],36:[1,61],39:[2,47]},{35:[1,62]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{21:63,35:[1,27],38:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],24:[2,21]},{18:[1,64]},{18:[2,24]},{18:[2,29],28:[2,29],30:[2,29],31:[2,29],32:[2,29],35:[2,29]},{18:[2,37],35:[2,37]},{36:[1,61]},{21:65,28:[1,69],30:[1,66],31:[1,67],32:[1,68],35:[1,27],38:26},{18:[2,46],28:[2,46],30:[2,46],31:[2,46],32:[2,46],35:[2,46],39:[2,46]},{18:[1,70]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],24:[2,22]},{18:[2,39],35:[2,39]},{18:[2,40],35:[2,40]},{18:[2,41],35:[2,41]},{18:[2,42],35:[2,42]},{18:[2,43],35:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]}],defaultActions:{17:[2,1],25:[2,28],38:[2,26],57:[2,24]},parseError:function(t){throw Error(t)},parse:function(t){function e(){var t;return t=n.lexer.lex()||1,"number"!=typeof t&&(t=n.symbols_[t]||t),t}var n=this,i=[0],r=[null],o=[],s=this.table,a="",l=0,c=0,u=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,this.lexer.yylloc===void 0&&(this.lexer.yylloc={});var h=this.lexer.yylloc;o.push(h);var d=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,f,g,m,v,y,b,w,x,_={};;){if(g=i[i.length-1],this.defaultActions[g]?m=this.defaultActions[g]:((null===p||p===void 0)&&(p=e()),m=s[g]&&s[g][p]),m===void 0||!m.length||!m[0]){var k="";if(!u){x=[];for(y in s[g])this.terminals_[y]&&y>2&&x.push("'"+this.terminals_[y]+"'");k=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+x.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(k,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:h,expected:x})}}if(m[0]instanceof Array&&m.length>1)throw Error("Parse Error: multiple actions possible at state: "+g+", token: "+p);switch(m[0]){case 1:i.push(p),r.push(this.lexer.yytext),o.push(this.lexer.yylloc),i.push(m[1]),p=null,f?(p=f,f=null):(c=this.lexer.yyleng,a=this.lexer.yytext,l=this.lexer.yylineno,h=this.lexer.yylloc,u>0&&u--);break;case 2:if(b=this.productions_[m[1]][1],_.$=r[r.length-b],_._$={first_line:o[o.length-(b||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(b||1)].first_column,last_column:o[o.length-1].last_column},d&&(_._$.range=[o[o.length-(b||1)].range[0],o[o.length-1].range[1]]),v=this.performAction.call(_,a,c,l,this.yy,m[1],r,o),v!==void 0)return v;b&&(i=i.slice(0,2*-1*b),r=r.slice(0,-1*b),o=o.slice(0,-1*b)),i.push(this.productions_[m[1]][0]),r.push(_.$),o.push(_._$),w=s[i[i.length-2]][i[i.length-1]],i.push(w);break;case 3:return!0}}return!0}},n=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return 20>t.length&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,n,i,r;this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),s=0;o.length>s&&(n=this._input.match(this.rules[o[s]]),!n||e&&!(n[0].length>e[0].length)||(e=n,i=s,this.options.flex));s++);return e?(r=e[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,o[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t?t:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t!==void 0?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,n,i){switch(n){case 0:if("\\"!==e.yytext.slice(-1)&&this.begin("mu"),"\\"===e.yytext.slice(-1)&&(e.yytext=e.yytext.substr(0,e.yyleng-1),this.begin("emu")),e.yytext)return 14;break;case 1:return 14;case 2:return"\\"!==e.yytext.slice(-1)&&this.popState(),"\\"===e.yytext.slice(-1)&&(e.yytext=e.yytext.substr(0,e.yyleng-1)),14;case 3:return e.yytext=e.yytext.substr(0,e.yyleng-4),this.popState(),15;case 4:return this.begin("par"),24;case 5:return 16;case 6:return 20;case 7:return 19;case 8:return 19;case 9:return 23;case 10:return 23;case 11:this.popState(),this.begin("com");break;case 12:return e.yytext=e.yytext.substr(3,e.yyleng-5),this.popState(),15;case 13:return 22;case 14:return 36;case 15:return 35;case 16:return 35;case 17:return 39;case 18:break;case 19:return this.popState(),18;case 20:return this.popState(),18;case 21:return e.yytext=e.yytext.substr(1,e.yyleng-2).replace(/\\"/g,'"'),30;case 22:return e.yytext=e.yytext.substr(1,e.yyleng-2).replace(/\\'/g,"'"),30;case 23:return e.yytext=e.yytext.substr(1),28;case 24:return 32;case 25:return 32;case 26:return 31;case 27:return 35;case 28:return e.yytext=e.yytext.substr(1,e.yyleng-2),35;case 29:return"INVALID";case 30:break;case 31:return this.popState(),37;case 32:return 5}},t.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[} ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@[a-zA-Z]+)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:[0-9]+(?=[}\s]))/,/^(?:[a-zA-Z0-9_$-]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:\s+)/,/^(?:[a-zA-Z0-9_$-/]+)/,/^(?:$)/],t.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},par:{rules:[30,31],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},t}();return e.lexer=n,t.prototype=e,e.Parser=t,new t}();Handlebars.Parser=e,Handlebars.parse=function(t){return t.constructor===Handlebars.AST.ProgramNode?t:(Handlebars.Parser.yy=Handlebars.AST,Handlebars.Parser.parse(t))},Handlebars.print=function(t){return(new Handlebars.PrintVisitor).accept(t)},function(){Handlebars.AST={},Handlebars.AST.ProgramNode=function(t,e){this.type="program",this.statements=t,e&&(this.inverse=new Handlebars.AST.ProgramNode(e))},Handlebars.AST.MustacheNode=function(t,e,n){this.type="mustache",this.escaped=!n,this.hash=e;var i=this.id=t[0],r=this.params=t.slice(1),o=this.eligibleHelper=i.isSimple;this.isHelper=o&&(r.length||e)},Handlebars.AST.PartialNode=function(t,e){this.type="partial",this.partialName=t,this.context=e};var t=function(t,e){if(t.original!==e.original)throw new Handlebars.Exception(t.original+" doesn't match "+e.original)};Handlebars.AST.BlockNode=function(e,n,i,r){t(e.id,r),this.type="block",this.mustache=e,this.program=n,this.inverse=i,this.inverse&&!this.program&&(this.isInverse=!0)},Handlebars.AST.ContentNode=function(t){this.type="content",this.string=t},Handlebars.AST.HashNode=function(t){this.type="hash",this.pairs=t},Handlebars.AST.IdNode=function(t){this.type="ID",this.original=t.join(".");for(var e=[],n=0,i=0,r=t.length;r>i;i++){var o=t[i];if(".."===o||"."===o||"this"===o){if(e.length>0)throw new Handlebars.Exception("Invalid path: "+this.original);".."===o?n++:this.isScoped=!0}else e.push(o)}this.parts=e,this.string=e.join("."),this.depth=n,this.isSimple=1===t.length&&!this.isScoped&&0===n,this.stringModeValue=this.string},Handlebars.AST.PartialNameNode=function(t){this.type="PARTIAL_NAME",this.name=t},Handlebars.AST.DataNode=function(t){this.type="DATA",this.id=t},Handlebars.AST.StringNode=function(t){this.type="STRING",this.string=t,this.stringModeValue=t},Handlebars.AST.IntegerNode=function(t){this.type="INTEGER",this.integer=t,this.stringModeValue=Number(t)},Handlebars.AST.BooleanNode=function(t){this.type="BOOLEAN",this.bool=t,this.stringModeValue="true"===t},Handlebars.AST.CommentNode=function(t){this.type="comment",this.comment=t}}();var n=["description","fileName","lineNumber","message","name","number","stack"];Handlebars.Exception=function(){for(var t=Error.prototype.constructor.apply(this,arguments),e=0;n.length>e;e++)this[n[e]]=t[n[e]]},Handlebars.Exception.prototype=Error(),Handlebars.SafeString=function(t){this.string=t},Handlebars.SafeString.prototype.toString=function(){return""+this.string},function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},e=/[&<>"'`]/g,n=/[&<>"'`]/,i=function(e){return t[e]||"&amp;"};Handlebars.Utils={escapeExpression:function(t){return t instanceof Handlebars.SafeString?""+t:null==t||t===!1?"":n.test(t)?t.replace(e,i):t},isEmpty:function(t){return t||0===t?"[object Array]"===Object.prototype.toString.call(t)&&0===t.length?!0:!1:!0}}}(),Handlebars.Compiler=function(){},Handlebars.JavaScriptCompiler=function(){},function(t,e){t.prototype={compiler:t,disassemble:function(){for(var t,e,n,i=this.opcodes,r=[],o=0,s=i.length;s>o;o++)if(t=i[o],"DECLARE"===t.opcode)r.push("DECLARE "+t.name+"="+t.value);else{e=[];for(var a=0;t.args.length>a;a++)n=t.args[a],"string"==typeof n&&(n='"'+n.replace("\n","\\n")+'"'),e.push(n);r.push(t.opcode+" "+e.join(" "))}return r.join("\n")},equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var n=0;e>n;n++){var i=this.opcodes[n],r=t.opcodes[n];if(i.opcode!==r.opcode||i.args.length!==r.args.length)return!1;for(var o=0;i.args.length>o;o++)if(i.args[o]!==r.args[o])return!1}return!0},guid:0,compile:function(t,e){this.children=[],this.depths={list:[]},this.options=e;var n=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},n)for(var i in n)this.options.knownHelpers[i]=n[i];return this.program(t)},accept:function(t){return this[t.type](t)},program:function(t){var e,n=t.statements;this.opcodes=[];for(var i=0,r=n.length;r>i;i++)e=n[i],this[e.type](e);return this.isSimple=1===r,this.depths.list=this.depths.list.sort(function(t,e){return t-e}),this},compileProgram:function(t){var e,n=(new this.compiler).compile(t,this.options),i=this.guid++;this.usePartial=this.usePartial||n.usePartial,this.children[i]=n;for(var r=0,o=n.depths.list.length;o>r;r++)e=n.depths.list[r],2>e||this.addDepth(e-1);return i},block:function(t){var e=t.mustache,n=t.program,i=t.inverse;n&&(n=this.compileProgram(n)),i&&(i=this.compileProgram(i));var r=this.classifyMustache(e);"helper"===r?this.helperMustache(e,n,i):"simple"===r?(this.simpleMustache(e),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(e,n,i),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(t){var e,n,i=t.pairs;this.opcode("pushHash");for(var r=0,o=i.length;o>r;r++)e=i[r],n=e[1],this.options.stringParams?this.opcode("pushStringParam",n.stringModeValue,n.type):this.accept(n),this.opcode("assignToHash",e[0]);this.opcode("popHash")},partial:function(t){var e=t.partialName;this.usePartial=!0,t.context?this.ID(t.context):this.opcode("push","depth0"),this.opcode("invokePartial",e.name),this.opcode("append")},content:function(t){this.opcode("appendContent",t.string)},mustache:function(t){var e=this.options,n=this.classifyMustache(t);"simple"===n?this.simpleMustache(t):"helper"===n?this.helperMustache(t):this.ambiguousMustache(t),t.escaped&&!e.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(t,e,n){var i=t.id,r=i.parts[0],o=null!=e||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",r,o)},simpleMustache:function(t){var e=t.id;"DATA"===e.type?this.DATA(e):e.parts.length?this.ID(e):(this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(t,e,n){var i=this.setupFullMustacheParams(t,e,n),r=t.id.parts[0];if(this.options.knownHelpers[r])this.opcode("invokeKnownHelper",i.length,r);else{if(this.knownHelpersOnly)throw Error("You specified knownHelpersOnly, but used the unknown helper "+r);this.opcode("invokeHelper",i.length,r)}},ID:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0];e?this.opcode("lookupOnContext",t.parts[0]):this.opcode("pushContext");for(var n=1,i=t.parts.length;i>n;n++)this.opcode("lookup",t.parts[n])},DATA:function(t){this.options.data=!0,this.opcode("lookupData",t.id)},STRING:function(t){this.opcode("pushString",t.string)},INTEGER:function(t){this.opcode("pushLiteral",t.integer)},BOOLEAN:function(t){this.opcode("pushLiteral",t.bool)},comment:function(){},opcode:function(t){this.opcodes.push({opcode:t,args:[].slice.call(arguments,1)})},declare:function(t,e){this.opcodes.push({opcode:"DECLARE",name:t,value:e})},addDepth:function(t){if(isNaN(t))throw Error("EWOT");0!==t&&(this.depths[t]||(this.depths[t]=!0,this.depths.list.push(t)))},classifyMustache:function(t){var e=t.isHelper,n=t.eligibleHelper,i=this.options;if(n&&!e){var r=t.id.parts[0];i.knownHelpers[r]?e=!0:i.knownHelpersOnly&&(n=!1)}return e?"helper":n?"ambiguous":"simple"},pushParams:function(t){for(var e,n=t.length;n--;)e=t[n],this.options.stringParams?(e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",e.stringModeValue,e.type)):this[e.type](e)},setupMustacheParams:function(t){var e=t.params;return this.pushParams(e),t.hash?this.hash(t.hash):this.opcode("emptyHash"),e},setupFullMustacheParams:function(t,e,n){var i=t.params;return this.pushParams(i),this.opcode("pushProgram",e),this.opcode("pushProgram",n),t.hash?this.hash(t.hash):this.opcode("emptyHash"),i}};var n=function(t){this.value=t};e.prototype={nameLookup:function(t,n){return/^[0-9]+$/.test(n)?t+"["+n+"]":e.isValidJavaScriptVariableName(n)?t+"."+n:t+"['"+n+"']"},appendToBuffer:function(t){return this.environment.isSimple?"return "+t+";":{appendToBuffer:!0,content:t,toString:function(){return"buffer += "+t+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,e,n,i){this.environment=t,this.options=e||{},Handlebars.log(Handlebars.logger.DEBUG,this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(t,e);var r,o=t.opcodes;for(this.i=0,s=o.length;s>this.i;this.i++)r=o[this.i],"DECLARE"===r.opcode?this[r.name]=r.value:this[r.opcode].apply(this,r.args);return this.createFunctionContext(i)},nextOpcode:function(){var t=this.environment.opcodes;return t[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var t=[];if(this.isChild)t.push("");else{var e=this.namespace,n="helpers = helpers || "+e+".helpers;";this.environment.usePartial&&(n=n+" partials = partials || "+e+".partials;"),this.options.data&&(n+=" data = data || {};"),t.push(n)}this.environment.isSimple?t.push(""):t.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=t},createFunctionContext:function(t){var e=this.stackVars.concat(this.registers.list);if(e.length>0&&(this.source[1]=this.source[1]+", "+e.join(", ")),!this.isChild)for(var n in this.context.aliases)this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n];this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");for(var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],r=0,o=this.environment.depths.list.length;o>r;r++)i.push("depth"+this.environment.depths.list[r]);var s=this.mergeSource();if(!this.isChild){var a=Handlebars.COMPILER_REVISION,l=Handlebars.REVISION_CHANGES[a];s="this.compilerInfo = ["+a+",'"+l+"'];\n"+s}if(t)return i.push(s),Function.apply(this,i);var c="function "+(this.name||"")+"("+i.join(",")+") {\n  "+s+"}";return Handlebars.log(Handlebars.logger.DEBUG,c+"\n\n"),c},mergeSource:function(){for(var t,e="",n=0,i=this.source.length;i>n;n++){var r=this.source[n];r.appendToBuffer?t=t?t+"\n    + "+r.content:r.content:(t&&(e+="buffer += "+t+";\n  ",t=void 0),e+=r+"\n  ")}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t),this.replaceStack(function(e){return t.splice(1,0,e),"blockHelperMissing.call("+t.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t);var e=this.topStack();t.splice(1,0,e),t[t.length-1]="options",this.source.push("if (!"+this.lastHelper+") { "+e+" = blockHelperMissing.call("+t.join(", ")+"); }")},appendContent:function(t){this.source.push(this.appendToBuffer(this.quotedString(t)))},append:function(){this.flushInline();var t=this.popStack();this.source.push("if("+t+" || "+t+" === 0) { "+this.appendToBuffer(t)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))
},getContext:function(t){this.lastContext!==t&&(this.lastContext=t)},lookupOnContext:function(t){this.push(this.nameLookup("depth"+this.lastContext,t,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(t){return"typeof "+t+" === functionType ? "+t+".apply(depth0) : "+t})},lookup:function(t){this.replaceStack(function(e){return e+" == null || "+e+" === false ? "+e+" : "+this.nameLookup(e,t,"context")})},lookupData:function(t){this.push(this.nameLookup("data",t,"data"))},pushStringParam:function(t,e){this.pushStackLiteral("depth"+this.lastContext),this.pushString(e),"string"==typeof t?this.pushString(t):this.pushStackLiteral(t)},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&this.register("hashTypes","{}")},pushHash:function(){this.hash={values:[],types:[]}},popHash:function(){var t=this.hash;this.hash=void 0,this.options.stringParams&&this.register("hashTypes","{"+t.types.join(",")+"}"),this.push("{\n    "+t.values.join(",\n    ")+"\n  }")},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},push:function(t){return this.inlineStack.push(t),t},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},invokeHelper:function(t,e){this.context.aliases.helperMissing="helpers.helperMissing";var n=this.lastHelper=this.setupHelper(t,e,!0);this.push(n.name),this.replaceStack(function(t){return t+" ? "+t+".call("+n.callParams+") "+": helperMissing.call("+n.helperMissingParams+")"})},invokeKnownHelper:function(t,e){var n=this.setupHelper(t,e);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(t,e){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var n=this.setupHelper(0,t,e),i=this.lastHelper=this.nameLookup("helpers",t,"helper"),r=this.nameLookup("depth"+this.lastContext,t,"context"),o=this.nextStack();this.source.push("if ("+o+" = "+i+") { "+o+" = "+o+".call("+n.callParams+"); }"),this.source.push("else { "+o+" = "+r+"; "+o+" = typeof "+o+" === functionType ? "+o+".apply(depth0) : "+o+"; }")},invokePartial:function(t){var e=[this.nameLookup("partials",t,"partial"),"'"+t+"'",this.popStack(),"helpers","partials"];this.options.data&&e.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+e.join(", ")+")")},assignToHash:function(t){var e,n=this.popStack();this.options.stringParams&&(e=this.popStack(),this.popStack());var i=this.hash;e&&i.types.push("'"+t+"': "+e),i.values.push("'"+t+"': ("+n+")")},compiler:e,compileChildren:function(t,e){for(var n,i,r=t.children,o=0,s=r.length;s>o;o++){n=r[o],i=new this.compiler;var a=this.matchExistingProgram(n);null==a?(this.context.programs.push(""),a=this.context.programs.length,n.index=a,n.name="program"+a,this.context.programs[a]=i.compile(n,e,this.context),this.context.environments[a]=n):(n.index=a,n.name="program"+a)}},matchExistingProgram:function(t){for(var e=0,n=this.context.environments.length;n>e;e++){var i=this.context.environments[e];if(i&&i.equals(t))return e}},programExpression:function(t){if(this.context.aliases.self="this",null==t)return"self.noop";for(var e,n=this.environment.children[t],i=n.depths.list,r=[n.index,n.name,"data"],o=0,s=i.length;s>o;o++)e=i[o],1===e?r.push("depth0"):r.push("depth"+(e-1));return 0===i.length?"self.program("+r.join(", ")+")":(r.shift(),"self.programWithDepth("+r.join(", ")+")")},register:function(t,e){this.useRegister(t),this.source.push(t+" = "+e+";")},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},pushStackLiteral:function(t){return this.push(new n(t))},pushStack:function(t){this.flushInline();var e=this.incrStack();return t&&this.source.push(e+" = "+t+";"),this.compileStack.push(e),e},replaceStack:function(t){var e,i="",r=this.isInline();if(r){var o=this.popStack(!0);if(o instanceof n)e=o.value;else{var s=this.stackSlot?this.topStackName():this.incrStack();i="("+this.push(s)+" = "+o+"),",e=this.topStack()}}else e=this.topStack();var a=t.call(this,e);return r?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+i+a+")")):(/^stack/.test(e)||(e=this.nextStack()),this.source.push(e+" = ("+i+a+");")),e},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;if(t.length){this.inlineStack=[];for(var e=0,i=t.length;i>e;e++){var r=t[e];r instanceof n?this.compileStack.push(r):this.pushStack(r)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),i=(e?this.inlineStack:this.compileStack).pop();return!t&&i instanceof n?i.value:(e||this.stackSlot--,i)},topStack:function(t){var e=this.isInline()?this.inlineStack:this.compileStack,i=e[e.length-1];return!t&&i instanceof n?i.value:i},quotedString:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'},setupHelper:function(t,e,n){var i=[];this.setupParams(t,i,n);var r=this.nameLookup("helpers",e,"helper");return{params:i,name:r,callParams:["depth0"].concat(i).join(", "),helperMissingParams:n&&["depth0",this.quotedString(e)].concat(i).join(", ")}},setupParams:function(t,e,n){var i,r,o,s=[],a=[],l=[];s.push("hash:"+this.popStack()),r=this.popStack(),o=this.popStack(),(o||r)&&(o||(this.context.aliases.self="this",o="self.noop"),r||(this.context.aliases.self="this",r="self.noop"),s.push("inverse:"+r),s.push("fn:"+o));for(var c=0;t>c;c++)i=this.popStack(),e.push(i),this.options.stringParams&&(l.push(this.popStack()),a.push(this.popStack()));return this.options.stringParams&&(s.push("contexts:["+a.join(",")+"]"),s.push("types:["+l.join(",")+"]"),s.push("hashTypes:hashTypes")),this.options.data&&s.push("data:data"),s="{"+s.join(",")+"}",n?(this.register("options",s),e.push("options")):e.push(s),e.join(", ")}};for(var i="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),r=e.RESERVED_WORDS={},o=0,s=i.length;s>o;o++)r[i[o]]=!0;e.isValidJavaScriptVariableName=function(t){return!e.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(t)?!0:!1}}(Handlebars.Compiler,Handlebars.JavaScriptCompiler),Handlebars.precompile=function(t,e){if(!t||"string"!=typeof t&&t.constructor!==Handlebars.AST.ProgramNode)throw new Handlebars.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);e=e||{},"data"in e||(e.data=!0);var n=Handlebars.parse(t),i=(new Handlebars.Compiler).compile(n,e);return(new Handlebars.JavaScriptCompiler).compile(i,e)},Handlebars.compile=function(t,e){function n(){var n=Handlebars.parse(t),i=(new Handlebars.Compiler).compile(n,e),r=(new Handlebars.JavaScriptCompiler).compile(i,e,void 0,!0);return Handlebars.template(r)}if(!t||"string"!=typeof t&&t.constructor!==Handlebars.AST.ProgramNode)throw new Handlebars.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);e=e||{},"data"in e||(e.data=!0);var i;return function(t,e){return i||(i=n()),i.call(this,t,e)}},Handlebars.VM={template:function(t){var e={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(t,e,n){var i=this.programs[t];return n?Handlebars.VM.program(e,n):i?i:i=this.programs[t]=Handlebars.VM.program(e)},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop,compilerInfo:null};return function(n,i){i=i||{};var r=t.call(e,Handlebars,n,i.helpers,i.partials,i.data),o=e.compilerInfo||[],s=o[0]||1,a=Handlebars.COMPILER_REVISION;if(s!==a){if(a>s){var l=Handlebars.REVISION_CHANGES[a],c=Handlebars.REVISION_CHANGES[s];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+l+") or downgrade your runtime to an older version ("+c+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+o[1]+")."}return r}},programWithDepth:function(t,e){var n=Array.prototype.slice.call(arguments,2);return function(i,r){return r=r||{},t.apply(this,[i,r.data||e].concat(n))}},program:function(t,e){return function(n,i){return i=i||{},t(n,i.data||e)}},noop:function(){return""},invokePartial:function(t,e,n,i,r,o){var s={helpers:i,partials:r,data:o};if(void 0===t)throw new Handlebars.Exception("The partial "+e+" could not be found");if(t instanceof Function)return t(n,s);if(Handlebars.compile)return r[e]=Handlebars.compile(t,{data:void 0!==o}),r[e](n,s);throw new Handlebars.Exception("The partial "+e+" could not be compiled when running in runtime-only mode")}},Handlebars.template=Handlebars.VM.template,define("handlebars",function(t){return function(){var e;return e||t.Handlebars}}(this)),define("lang",["../locales/de","../locales/en","../locales/es","../locales/fr","handlebars"],function(t,e,n,i,r){var o={en:e,de:t,es:n,fr:i},s=o[window.navigator.language.split("-")[0]]||o.en;return r.registerHelper("lang",function(t){return s[t]}),s}),define("compiled-templates",["handlebars"],function(t){return this.JST=this.JST||{},this.JST["strut.etch_extension/align"]=t.template(function(t,e,n,i,r){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,r=r||{};var o,s="",a="function",l=this.escapeExpression;return s+='<a href="#" \n	class="btn btn-small etch-',(o=n.button)?o=o.call(e,{hash:{},data:r}):(o=e.button,o=typeof o===a?o.apply(e):o),s+=l(o)+'" title="',(o=n.title)?o=o.call(e,{hash:{},data:r}):(o=e.title,o=typeof o===a?o.apply(e):o),s+=l(o)+'"><i class="icon-align-',(o=n.icon)?o=o.call(e,{hash:{},data:r}):(o=e.icon,o=typeof o===a?o.apply(e):o),s+=l(o)+'"></i></a>'}),this.JST["strut.etch_extension/colorChooser"]=t.template(function(t,e,n,i,r){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,r=r||{};var o,s="",a="function",l=this.escapeExpression;return s+='<input class="color-chooser colorpicker etch-',(o=n.button)?o=o.call(e,{hash:{},data:r}):(o=e.button,o=typeof o===a?o.apply(e):o),s+=l(o)+'" />'}),this.JST["strut.etch_extension/defaultButton"]=t.template(function(t,e,n,i,r){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,r=r||{};var o,s="",a="function",l=this.escapeExpression;return s+='<a href="#" \n	class="btn btn-small etch-',(o=n.button)?o=o.call(e,{hash:{},data:r}):(o=e.button,o=typeof o===a?o.apply(e):o),s+=l(o)+'" title="',(o=n.title)?o=o.call(e,{hash:{},data:r}):(o=e.title,o=typeof o===a?o.apply(e):o),s+=l(o)+'"><span>',(o=n.display)?o=o.call(e,{hash:{},data:r}):(o=e.display,o=typeof o===a?o.apply(e):o),s+=l(o)+"</span></a>"}),this.JST["strut.etch_extension/fontFamilySelection"]=t.template(function(t,e,n,i,r){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,r=r||{},'<div class="btn-group">\n	<button class="btn btn-inverse dropdown-toggle btn-small fontFamilyBtn" data-toggle="dropdown" title="Choose the font family"><span class="text">Lato</span><span class="caret"></span></button>\n	<ul class="dropdown-menu menuBarOption" data-option="fontFamily">\n		<li>\n                  <a class="lato" href="#" data-value="\'Lato\', sans-serif">Lato</a>\n                  <a class="ubuntu" href="#" data-value="\'Ubuntu\', sans-serif">Ubuntu</a>\n                  <a class="abril" href="#" data-value="\'Abril Fatface\', cursive">Abril</a>\n                  <a class="hammersmith" href="#" data-value="\'Hammersmith One\', sans-serif">Hammersmith One</a>\n                  <a class="fredoka" href="#" data-value="\'Fredoka One\', cursive">Fredoka One</a>\n                  <a class="gorditas" href="#" data-value="\'Gorditas\', cursive">Gorditas</a>\n                  <a class="pressstart" href="#" data-value="\'Press Start 2P\', cursive">Press Start 2P</a>\n                  <a class="droidsansmono" href="#" data-value="\'Droid Sans Mono\', monospace">Droid Sans Mono</a>\n		</li>\n	</ul>\n</div>'}),this.JST["strut.etch_extension/fontSizeSelection"]=t.template(function(t,e,n,i,r){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,r=r||{},'<div class="btn-group">\n	<a class="btn btn-small btn-inverse dropdown-toggle" data-toggle="dropdown" title="Choose the font size"><span class="text fontSizeReadout">72</span>\n		<span class="caret"></span></a>\n	<ul class="dropdown-menu menuBarOption" data-option="fontSize">\n		<li>\n                  <a href="#" data-value="144">144</a>\n                  <a href="#" data-value="96">96</a>\n                  <a href="#" data-value="72">72</a>\n			<a href="#" data-value="64">64</a>\n                  <a href="#" data-value="48">48</a>\n                  <a href="#" data-value="36">36</a>\n                  <a href="#" data-value="24">24</a>\n                  <a href="#" data-value="16">16</a>\n                  <a href="#" data-value="12">12</a>\n                  <a href="#" data-value="8">8</a>\n		</li>\n     	</ul>\n</div>'}),this.JST["strut.header/Header"]=t.template(function(t,e,n,i,r){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,r=r||{},'<div class="navbar navbar-inverse span12">\n	<div class="navbar-inner">\n		<ul class="nav" style="margin-right: 5%">\n			<li class="logo-holder">\n			</li>\n			<li class="divider-vertical">\n			</li>\n		</ul>\n		<ul class="nav">\n			<li class="create-comp-buttons">\n				<div class="btn-group iconBtns">\n				</div>\n			</li>\n		</ul>\n		<ul class="nav theme-buttons">\n		</ul>\n		<ul class="nav pull-right">\n			<li class="divider-vertical">\n			</li>\n			<li class="mode-buttons">\n			</li>\n		</ul>\n	</div>\n</div>'}),this.JST["strut.logo_button/Logo"]=t.template(function(t,e,n,i,r){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,r=r||{},'<a class="btn logo btn-plast dropdown-toggle" data-toggle="dropdown">\n	<span class="logo-bg"></span>\n    <span class="caret"></span>\n</a>\n<ul class="dropdown-menu">\n</ul>'}),this.JST["strut.presentation_generator.bespoke/BespokeTemplate"]=t.template(function(t,e,n,i,r){function o(t,e,i){var r,o,a="";return a+="\n				",o={hash:{},inverse:d.noop,fn:d.programWithDepth(s,e,i),data:e},(r=n.attributes)?r=r.call(t,o):(r=t.attributes,r=typeof r===f?r.apply(t):r),n.attributes||(r=g.call(t,r,o)),(r||0===r)&&(a+=r),a+="\n			"}function s(t,e,i){var r,o,s,c="";return c+='\n					<section class="',s={hash:{},inverse:d.noop,fn:d.program(3,a,e),data:e},r=n.or,o=r?r.call(t,t.background,i.background,s):p.call(t,"or",t.background,i.background,s),(o||0===o)&&(c+=o),c+=' slideContainer" style="width: 1024px; height: 768px">\n						<div class="reveal themedArea">\n              			',s={hash:{},inverse:d.noop,fn:d.program(3,a,e),data:e},r=n.marked,o=r?r.call(t,t.markdown,s):p.call(t,"marked",t.markdown,s),(o||0===o)&&(c+=o),c+="\n              			</div>\n						",s={hash:{},inverse:d.noop,fn:d.program(5,l,e),data:e},(o=n.components)?o=o.call(t,s):(o=t.components,o=typeof o===f?o.apply(t):o),n.components||(o=g.call(t,o,s)),(o||0===o)&&(c+=o),c+="\n					</section>\n				"}function a(){var t="";return t}function l(t,e){var i,r,o,s="";return s+="\n							",o={hash:{},inverse:d.noop,fn:d.program(3,a,e),data:e},i=n.renderComponent,r=i?i.call(t,t,o):p.call(t,"renderComponent",t,o),(r||0===r)&&(s+=r),s+="\n						"}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,r=r||{};var c,u,h="",d=this,p=n.helperMissing,f="function",g=n.blockHelperMissing;return h+="	<style>\n	",(c=n.customStylesheet)?c=c.call(e,{hash:{},data:r}):(c=e.customStylesheet,c=typeof c===f?c.apply(e):c),(c||0===c)&&(h+=c),h+='\n	</style>\n\n	<div id="themeChooser">\n		<b>Theme:</b>\n		<select>\n			<option value="coverflow">Coverflow</option>\n			<option value="concave">Concave</option>\n			<option value="cube">Cube</option>\n			<option value="classic">Classic</option>\n			<option value="carousel">Carousel</option>\n		</select>\n	</div>\n	<div id="main">\n		<article>\n			',c=e.slides,c=null==c||c===!1?c:c.models,c=typeof c===f?c.apply(e):c,u=g.call(e,c,{hash:{},inverse:d.noop,fn:d.programWithDepth(o,r,e),data:r}),(u||0===u)&&(h+=u),h+="\n		</article>\n	</div>"}),this.JST["strut.presentation_generator.impress/ComponentContainer"]=t.template(function(t,e,n,i,r){function o(){var t="";return t}function s(t,e){var i,r="";return r+="rotate(",(i=n.rotate)?i=i.call(t,{hash:{},data:e}):(i=t.rotate,i=typeof i===g?i.apply(t):i),r+=m(i)+"rad)"}function a(t,e){var i,r="";return r+="skewX(",(i=n.skewX)?i=i.call(t,{hash:{},data:e}):(i=t.skewX,i=typeof i===g?i.apply(t):i),r+=m(i)+"rad)"}function l(t,e){var i,r="";return r+="skewY(",(i=n.skewY)?i=i.call(t,{hash:{},data:e}):(i=t.skewY,i=typeof i===g?i.apply(t):i),r+=m(i)+"rad)"}function c(t,e){var i,r,s,a="";return s={hash:{},inverse:v.noop,fn:v.program(1,o,e),data:e},i=n.round,r=i?i.call(t,(i=t.scale,null==i||i===!1?i:i.width),s):y.call(t,"round",(i=t.scale,null==i||i===!1?i:i.width),s),(r||0===r)&&(a+=r),a+="px"}function u(t,e){var i,r,s,a="";return s={hash:{},inverse:v.noop,fn:v.program(1,o,e),data:e},i=n.round,r=i?i.call(t,(i=t.scale,null==i||i===!1?i:i.height),s):y.call(t,"round",(i=t.scale,null==i||i===!1?i:i.height),s),(r||0===r)&&(a+=r),a+="px"}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,i=i||t.partials,r=r||{};var h,d,p,f="",g="function",m=this.escapeExpression,v=this,y=n.helperMissing;return f+='<div class="componentContainer fwrk-ignore ',(h=n.customClasses)?h=h.call(e,{hash:{},data:r}):(h=e.customClasses,h=typeof h===g?h.apply(e):h),f+=m(h)+'" style="top: ',p={hash:{},inverse:v.noop,fn:v.program(1,o,r),data:r},h=n.round,d=h?h.call(e,e.y,p):y.call(e,"round",e.y,p),(d||0===d)&&(f+=d),f+="px; left: ",p={hash:{},inverse:v.noop,fn:v.program(1,o,r),data:r},h=n.round,d=h?h.call(e,e.x,p):y.call(e,"round",e.x,p),(d||0===d)&&(f+=d),f+="px; -webkit-transform: ",d=n["if"].call(e,e.rotate,{hash:{},inverse:v.noop,fn:v.program(3,s,r),data:r}),(d||0===d)&&(f+=d),f+=" ",d=n["if"].call(e,e.skewX,{hash:{},inverse:v.noop,fn:v.program(5,a,r),data:r}),(d||0===d)&&(f+=d),f+=" ",d=n["if"].call(e,e.skewY,{hash:{},inverse:v.noop,fn:v.program(7,l,r),data:r}),(d||0===d)&&(f+=d),f+="; -moz-transform: ",d=n["if"].call(e,e.rotate,{hash:{},inverse:v.noop,fn:v.program(3,s,r),data:r}),(d||0===d)&&(f+=d),f+=" ",d=n["if"].call(e,e.skewX,{hash:{},inverse:v.noop,fn:v.program(5,a,r),data:r}),(d||0===d)&&(f+=d),f+=" ",d=n["if"].call(e,e.skewY,{hash:{},inverse:v.noop,fn:v.program(7,l,r),data:r}),(d||0===d)&&(f+=d),f+="; transform: ",d=n["if"].call(e,e.rotate,{hash:{},inverse:v.noop,fn:v.program(3,s,r),data:r}),(d||0===d)&&(f+=d),f+=" ",d=n["if"].call(e,e.skewX,{hash:{},inverse:v.noop,fn:v.program(5,a,r),data:r}),(d||0===d)&&(f+=d),f+=" ",d=n["if"].call(e,e.skewY,{hash:{},inverse:v.noop,fn:v.program(7,l,r),data:r}),(d||0===d)&&(f+=d),f+="; width: ",d=n["if"].call(e,e.scale,{hash:{},inverse:v.noop,fn:v.program(9,c,r),data:r}),(d||0===d)&&(f+=d),f+="; height: ",d=n["if"].call(e,e.scale,{hash:{},inverse:v.noop,fn:v.program(11,u,r),data:r}),(d||0===d)&&(f+=d),f+=';">\n',d=v.invokePartial(i.TransformContainer,"TransformContainer",e,n,i,r),(d||0===d)&&(f+=d),f}),this.JST["strut.presentation_generator.impress/Image"]=t.template(function(t,e,n,i,r){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,i=i||t.partials,r=r||{};var o,s="",a=this,l="function",c=this.escapeExpression;return o=a.invokePartial(i.ComponentContainer,"ComponentContainer",e,n,i,r),(o||0===o)&&(s+=o),s+='\n<img src="',(o=n.src)?o=o.call(e,{hash:{},data:r}):(o=e.src,o=typeof o===l?o.apply(e):o),s+=c(o)+'"></img>\n</div>\n</div>'}),this.JST["strut.presentation_generator.impress/ImpressTemplate"]=t.template(function(t,e,n,i,r){function o(t,e,i){var r,o,a="";return a+="\n",o={hash:{},inverse:y.noop,fn:y.programWithDepth(s,e,i),data:e},(r=n.attributes)?r=r.call(t,o):(r=t.attributes,r=typeof r===w?r.apply(t):r),n.attributes||(r=_.call(t,r,o)),(r||0===r)&&(a+=r),a+="\n</div>\n"}function s(t,e,i){var r,o,s,f="";return f+='\n<div class="step" data-x="',s={hash:{},inverse:y.noop,fn:y.program(3,a,e),data:e},r=n.scaleX,o=r?r.call(t,t.x,s):b.call(t,"scaleX",t.x,s),(o||0===o)&&(f+=o),f+='" data-y="',s={hash:{},inverse:y.noop,fn:y.program(3,a,e),data:e},r=n.scaleY,o=r?r.call(t,t.y,s):b.call(t,"scaleY",t.y,s),(o||0===o)&&(f+=o),f+='" ',o=n["if"].call(t,t.rotateX,{hash:{},inverse:y.noop,fn:y.program(5,l,e),data:e}),(o||0===o)&&(f+=o),f+="  ",o=n["if"].call(t,t.rotateY,{hash:{},inverse:y.noop,fn:y.program(7,c,e),data:e}),(o||0===o)&&(f+=o),f+=" ",o=n["if"].call(t,t.rotateZ,{hash:{},inverse:y.noop,fn:y.program(9,u,e),data:e}),(o||0===o)&&(f+=o),f+=" ",o=n["if"].call(t,t.z,{hash:{},inverse:y.noop,fn:y.program(11,h,e),data:e}),(o||0===o)&&(f+=o),f+=" ",o=n["if"].call(t,t.impScale,{hash:{},inverse:y.noop,fn:y.program(13,d,e),data:e}),(o||0===o)&&(f+=o),f+='>\n<div class="',s={hash:{},inverse:y.noop,fn:y.program(3,a,e),data:e},r=n.or,o=r?r.call(t,t.background,i.background,s):b.call(t,"or",t.background,i.background,s),(o||0===o)&&(f+=o),f+=' slideContainer" style="width: 1024px; height: 768px">\n<div class="reveal themedArea">\n',s={hash:{},inverse:y.noop,fn:y.program(3,a,e),data:e},r=n.marked,o=r?r.call(t,t.markdown,s):b.call(t,"marked",t.markdown,s),(o||0===o)&&(f+=o),f+="\n</div>\n",s={hash:{},inverse:y.noop,fn:y.program(15,p,e),data:e},(o=n.components)?o=o.call(t,s):(o=t.components,o=typeof o===w?o.apply(t):o),n.components||(o=_.call(t,o,s)),(o||0===o)&&(f+=o),f+="\n</div>\n"}function a(){var t="";return t}function l(t,e){var i,r,o,s="";return s+='data-rotate-x="',o={hash:{},inverse:y.noop,fn:y.program(3,a,e),data:e},i=n.toDeg,r=i?i.call(t,t.rotateX,o):b.call(t,"toDeg",t.rotateX,o),(r||0===r)&&(s+=r),s+='"'}function c(t,e){var i,r,o,s="";return s+='data-rotate-y="',o={hash:{},inverse:y.noop,fn:y.program(3,a,e),data:e},i=n.toDeg,r=i?i.call(t,t.rotateY,o):b.call(t,"toDeg",t.rotateY,o),(r||0===r)&&(s+=r),s+='"'}function u(t,e){var i,r,o,s="";return s+='data-rotate-z="',o={hash:{},inverse:y.noop,fn:y.program(3,a,e),data:e},i=n.toDeg,r=i?i.call(t,t.rotateZ,o):b.call(t,"toDeg",t.rotateZ,o),(r||0===r)&&(s+=r),s+='"'}function h(t,e){var i,r="";return r+='data-z="',(i=n.z)?i=i.call(t,{hash:{},data:e}):(i=t.z,i=typeof i===w?i.apply(t):i),r+=x(i)+'"'}function d(t,e){var i,r="";return r+='data-scale="',(i=n.impScale)?i=i.call(t,{hash:{},data:e}):(i=t.impScale,i=typeof i===w?i.apply(t):i),r+=x(i)+'"'}function p(t,e){var i,r,o,s="";return s+="\n",o={hash:{},inverse:y.noop,fn:y.program(3,a,e),data:e},i=n.renderComponent,r=i?i.call(t,t,o):b.call(t,"renderComponent",t,o),(r||0===r)&&(s+=r),s+="\n"}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,r=r||{};var f,g,m,v="",y=this,b=n.helperMissing,w="function",x=this.escapeExpression,_=n.blockHelperMissing;return v+='<style type="text/css">\n',(f=n.customStylesheet)?f=f.call(e,{hash:{},data:r}):(f=e.customStylesheet,f=typeof f===w?f.apply(e):f),(f||0===f)&&(v+=f),v+='\n</style>\n<!-- This is a work around / hack to get the user\'s browser to download the fonts \n if they decide to save the presentation. -->\n<div style="visibility: hidden; width: 0px; height: 0px">\n<img src="css/Lato-Bold.woff" />\n<img src="css/HammersmithOne.woff" />\n<img src="css/Droid-Sans-Mono.woff" />\n<img src="css/Gorditas-Regular.woff" />\n<img src="css/FredokaOne-Regular.woff" />\n<img src="css/Ubuntu.woff" />\n<img src="css/Ubuntu-Bold.woff" />\n<img src="css/PressStart2P-Regular.woff" />\n<img src="css/Lato-BoldItalic.woff" />\n<img src="css/AbrilFatface-Regular.woff" />\n<img src="css/Lato-Regular.woff" />\n</div>\n\n<div class="fallback-message">\n    <p>Your browser <b>doesn\'t support the features required</b> by impress.js, so you are presented with a simplified version of this presentation.</p>\n    <p>For the best experience please use the latest <b>Chrome</b>, <b>Safari</b> or <b>Firefox</b> browser.</p>\n</div>\n<div class="bg">\n<div id="impress">\n\n',f=e.slides,f=null==f||f===!1?f:f.models,f=typeof f===w?f.apply(e):f,g=_.call(e,f,{hash:{},inverse:y.noop,fn:y.programWithDepth(o,r,e),data:r}),(g||0===g)&&(v+=g),v+='\n\n<div id="overview" class="step active" data-x="',m={hash:{},inverse:y.noop,fn:y.program(3,a,r),data:r},f=n.scaleX,g=f?f.call(e,e.overviewX,m):b.call(e,"scaleX",e.overviewX,m),(g||0===g)&&(v+=g),v+='" data-y="',m={hash:{},inverse:y.noop,fn:y.program(3,a,r),data:r},f=n.scaleY,g=f?f.call(e,e.overviewY,m):b.call(e,"scaleY",e.overviewY,m),(g||0===g)&&(v+=g),v+='" data-scale="9"></div>\n</div>\n<div class="hint">\n    <p>Use a spacebar or arrow keys to navigate</p>\n</div>\n</div>'}),this.JST["strut.presentation_generator.impress/SVGContainer"]=t.template(function(t,e,n,i,r){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,i=i||t.partials,r=r||{};var o,s,a="",l="function",c=this.escapeExpression,u=this;return a+='<div class="componentContainer fwrk-ignore" style="top: ',(o=n.y)?o=o.call(e,{hash:{},data:r}):(o=e.y,o=typeof o===l?o.apply(e):o),a+=c(o)+"px; left: ",(o=n.x)?o=o.call(e,{hash:{},data:r}):(o=e.x,o=typeof o===l?o.apply(e):o),a+=c(o)+"px; width: "+c((o=e.scale,o=null==o||o===!1?o:o.width,typeof o===l?o.apply(e):o))+"px; height: "+c((o=e.scale,o=null==o||o===!1?o:o.height,typeof o===l?o.apply(e):o))+'px;">\n',s=u.invokePartial(i.TransformContainer,"TransformContainer",e,n,i,r),(s||0===s)&&(a+=s),a}),this.JST["strut.presentation_generator.impress/SVGImage"]=t.template(function(t,e,n,i,r){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,i=i||t.partials,r=r||{};var o,s="",a=this,l="function",c=this.escapeExpression;return o=a.invokePartial(i.SVGContainer,"SVGContainer",e,n,i,r),(o||0===o)&&(s+=o),s+='\n<img src="',(o=n.src)?o=o.call(e,{hash:{},data:r}):(o=e.src,o=typeof o===l?o.apply(e):o),s+=c(o)+'" style="width: 100%; height: 100%"></img>\n</div>\n</div>'}),this.JST["strut.presentation_generator.impress/TextBox"]=t.template(function(t,e,n,i,r){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,i=i||t.partials,r=r||{};var o,s="",a=this,l="function",c=this.escapeExpression;return o=a.invokePartial(i.ComponentContainer,"ComponentContainer",e,n,i,r),(o||0===o)&&(s+=o),s+='\n<div style="font-family: ',(o=n.family)?o=o.call(e,{hash:{},data:r}):(o=e.family,o=typeof o===l?o.apply(e):o),s+=c(o)+"; font-size: ",(o=n.size)?o=o.call(e,{hash:{},data:r}):(o=e.size,o=typeof o===l?o.apply(e):o),s+=c(o)+"px;\n			font-weight: ",(o=n.weight)?o=o.call(e,{hash:{},data:r}):(o=e.weight,o=typeof o===l?o.apply(e):o),s+=c(o)+"; font-style: ",(o=n.style)?o=o.call(e,{hash:{},data:r}):(o=e.style,o=typeof o===l?o.apply(e):o),s+=c(o)+"; color: #",(o=n.color)?o=o.call(e,{hash:{},data:r}):(o=e.color,o=typeof o===l?o.apply(e):o),s+=c(o)+"; text-align: ",(o=n.align)?o=o.call(e,{hash:{},data:r}):(o=e.align,o=typeof o===l?o.apply(e):o),s+=c(o)+'" class="antialias">\n',(o=n.text)?o=o.call(e,{hash:{},data:r}):(o=e.text,o=typeof o===l?o.apply(e):o),s+=c(o)+"\n</div>\n</div>\n</div>"}),this.JST["strut.presentation_generator.impress/TransformContainer"]=t.template(function(t,e,n,i,r){function o(t,e){var i,r,o,a="";return a+="scale(",o={hash:{},inverse:c.noop,fn:c.program(2,s,e),data:e},i=n.round,r=i?i.call(t,(i=t.scale,null==i||i===!1?i:i.x),o):u.call(t,"round",(i=t.scale,null==i||i===!1?i:i.x),o),(r||0===r)&&(a+=r),a+=", ",o={hash:{},inverse:c.noop,fn:c.program(2,s,e),data:e},i=n.round,r=i?i.call(t,(i=t.scale,null==i||i===!1?i:i.y),o):u.call(t,"round",(i=t.scale,null==i||i===!1?i:i.y),o),(r||0===r)&&(a+=r),a+=")"}function s(){var t="";return t}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,r=r||{};var a,l="",c=this,u=n.helperMissing;return l+='<div class="transformContainer" style="-webkit-transform: ',a=n["if"].call(e,e.scale,{hash:{},inverse:c.noop,fn:c.program(1,o,r),data:r}),(a||0===a)&&(l+=a),l+=";\n-moz-transform: ",a=n["if"].call(e,e.scale,{hash:{},inverse:c.noop,fn:c.program(1,o,r),data:r}),(a||0===a)&&(l+=a),l+=";\ntransform: ",a=n["if"].call(e,e.scale,{hash:{},inverse:c.noop,fn:c.program(1,o,r),data:r}),(a||0===a)&&(l+=a),l+='">'}),this.JST["strut.presentation_generator.impress/Video"]=t.template(function(t,e,n,i,r){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,i=i||t.partials,r=r||{};var o,s="",a=this,l="function",c=this.escapeExpression;return o=a.invokePartial(i.ComponentContainer,"ComponentContainer",e,n,i,r),(o||0===o)&&(s+=o),s+='\n<video controls>\n	<source src="',(o=n.src)?o=o.call(e,{hash:{},data:r}):(o=e.src,o=typeof o===l?o.apply(e):o),s+=c(o)+'" type="',(o=n.srcType)?o=o.call(e,{hash:{},data:r}):(o=e.srcType,o=typeof o===l?o.apply(e):o),s+=c(o)+'" preload="metadata"></source>\n</video>\n</div>\n</div>'}),this.JST["strut.presentation_generator.impress/WebFrame"]=t.template(function(t,e,n,i,r){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,i=i||t.partials,r=r||{};var o,s="",a=this,l="function",c=this.escapeExpression;return o=a.invokePartial(i.ComponentContainer,"ComponentContainer",e,n,i,r),(o||0===o)&&(s+=o),s+='\n<iframe width="960" height="768" src="',(o=n.src)?o=o.call(e,{hash:{},data:r}):(o=e.src,o=typeof o===l?o.apply(e):o),s+=c(o)+'"></iframe>\n</div>\n</div>'}),this.JST["strut.presentation_generator.impress/Youtube"]=t.template(function(t,e,n,i,r){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,i=i||t.partials,r=r||{};var o,s,a="",l=this,c="function",u=this.escapeExpression;return o=l.invokePartial(i.SVGContainer,"SVGContainer",e,n,i,r),(o||0===o)&&(a+=o),a+='\n<object width="'+u((o=e.scale,o=null==o||o===!1?o:o.width,typeof o===c?o.apply(e):o))+'" height="'+u((o=e.scale,o=null==o||o===!1?o:o.height,typeof o===c?o.apply(e):o))+'"><param name="movie" value="http://www.youtube.com/v/',(s=n.shortSrc)?s=s.call(e,{hash:{},data:r}):(s=e.shortSrc,s=typeof s===c?s.apply(e):s),a+=u(s)+'&hl=en&fs=1"><param name="allowFullScreen" value="true"><embed src="http://www.youtube.com/v/',(s=n.shortSrc)?s=s.call(e,{hash:{},data:r}):(s=e.shortSrc,s=typeof s===c?s.apply(e):s),a+=u(s)+'&hl=en&fs=1" type="application/x-shockwave-flash" allowfullscreen="true" width="'+u((o=e.scale,o=null==o||o===!1?o:o.width,typeof o===c?o.apply(e):o))+'" height="'+u((o=e.scale,o=null==o||o===!1?o:o.height,typeof o===c?o.apply(e):o))+'"></object>\n</div>\n</div>'}),this.JST["strut.presentation_generator.impress/YoutubeContainer"]=t.template(function(t,e,n,i,r){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,i=i||t.partials,r=r||{};var o,s="",a="function",l=this.escapeExpression,c=this;return s+='<div class="componentContainer" style="top: ',(o=n.y)?o=o.call(e,{hash:{},data:r}):(o=e.y,o=typeof o===a?o.apply(e):o),s+=l(o)+"px; left: ",(o=n.x)?o=o.call(e,{hash:{},data:r}):(o=e.x,o=typeof o===a?o.apply(e):o),s+=l(o)+'px;">\n',o=c.invokePartial(i.TransformContainer,"TransformContainer",e,n,i,r),(o||0===o)&&(s+=o),s}),this.JST["strut.presentation_generator.reveal/RevealTemplate"]=t.template(function(t,e,n,i,r){function o(t,e,i){var r,o,a="";return a+="\n        ",o={hash:{},inverse:d.noop,fn:d.programWithDepth(s,e,i),data:e},(r=n.attributes)?r=r.call(t,o):(r=t.attributes,r=typeof r===f?r.apply(t):r),n.attributes||(r=g.call(t,r,o)),(r||0===r)&&(a+=r),a+="\n        "}function s(t,e,i){var r,o,s,c="";return c+='\n          <section class="',s={hash:{},inverse:d.noop,fn:d.program(3,a,e),data:e},r=n.or,o=r?r.call(t,t.background,i.background,s):p.call(t,"or",t.background,i.background,s),(o||0===o)&&(c+=o),c+=' slideContainer" style="width: 1024px; height: 768px">\n            <div class="themedArea">\n            ',s={hash:{},inverse:d.noop,fn:d.program(3,a,e),data:e},r=n.marked,o=r?r.call(t,t.markdown,s):p.call(t,"marked",t.markdown,s),(o||0===o)&&(c+=o),c+="\n            </div>\n            ",s={hash:{},inverse:d.noop,fn:d.program(5,l,e),data:e},(o=n.components)?o=o.call(t,s):(o=t.components,o=typeof o===f?o.apply(t):o),n.components||(o=g.call(t,o,s)),(o||0===o)&&(c+=o),c+="\n          </section>\n        "
}function a(){var t="";return t}function l(t,e){var i,r,o,s="";return s+="\n              ",o={hash:{},inverse:d.noop,fn:d.program(3,a,e),data:e},i=n.renderComponent,r=i?i.call(t,t,o):p.call(t,"renderComponent",t,o),(r||0===r)&&(s+=r),s+="\n            "}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,r=r||{};var c,u,h="",d=this,p=n.helperMissing,f="function",g=n.blockHelperMissing;return h+='  <style type="text/css">\n    ',(c=n.customStylesheet)?c=c.call(e,{hash:{},data:r}):(c=e.customStylesheet,c=typeof c===f?c.apply(e):c),(c||0===c)&&(h+=c),h+='\n  </style>\n    <div class="reveal">\n      <div class="slides">\n        ',c=e.slides,c=null==c||c===!1?c:c.models,c=typeof c===f?c.apply(e):c,u=g.call(e,c,{hash:{},inverse:d.noop,fn:d.programWithDepth(o,r,e),data:r}),(u||0===u)&&(h+=u),h+="\n      </div>\n    </div>"}),this.JST["strut.presentation_generator/Button"]=t.template(function(t,e,n,i,r){function o(){var t="";return t}function s(t,e){var i,r="";return r+='\n    <li data-option="',(i=n.id)?i=i.call(t,{hash:{},data:e}):(i=t.id,i=typeof i===h?i.apply(t):i),r+=d(i)+'"><a>\n    		<span class="check" style="visibility: hidden;">&#10003;</span>\n    		',(i=n.displayName)?i=i.call(t,{hash:{},data:e}):(i=t.displayName,i=typeof i===h?i.apply(t):i),r+=d(i)+"\n    </a></li>\n    "}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,r=r||{};var a,l,c,u="",h="function",d=this.escapeExpression,p=this,f=n.helperMissing,g=n.blockHelperMissing;return u+='<button class="btn btn-success act"><i class="icon-play icon-white"/>',c={hash:{},inverse:p.noop,fn:p.program(1,o,r),data:r},a=n.lang,l=a?a.call(e,"present",c):f.call(e,"lang","present",c),(l||0===l)&&(u+=l),u+='</button>\n<button class="btn dropdown-toggle btn-success iconBtnsSplit" data-toggle="dropdown">\n  <span class="caret whiteCaret"></span>\n</button>\n<ul class="dropdown-menu">\n	',c={hash:{},inverse:p.noop,fn:p.program(3,s,r),data:r},(l=n.generators)?l=l.call(e,c):(l=e.generators,l=typeof l===h?l.apply(e):l),n.generators||(l=g.call(e,l,c)),(l||0===l)&&(u+=l),u+="\n</ul>"}),this.JST["strut.slide_components/Component"]=t.template(function(t,e,n,i,r){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,r=r||{};var o,s="",a="function",l=this.escapeExpression;return s+='<div class="content-scale">\n<div class="content"></div>\n</div>\n<span class="topLabel label"> \n	<span class="skewx" data-delta="skewX">↔</span>\n	<span class="align" data-option="x">↹</span>\n</span>\n<span class="leftLabel label"> \n	<span class="align" data-option="y">↹</span>\n	<span class="skewy" data-delta="skewY">↔</span>\n</span>\n<span class="rightLabel label rotate" data-delta="rotate">↻</span>\n<span class="scale label" data-delta="scale">↔</span>\n<span class="close-btn-red-20 removeBtn" title="Remove"></span>\n<div class="positioningCtrls form-inline">\n	<span class="label leftposition">→</span>\n	<input class="position" type="text" data-option="x" value="',(o=n.x)?o=o.call(e,{hash:{},data:r}):(o=e.x,o=typeof o===a?o.apply(e):o),s+=l(o)+'"/>\n	<span class="label bottomposition">↑</span>\n	<input class="position" type="text" data-option="y" value="',(o=n.y)?o=o.call(e,{hash:{},data:r}):(o=e.y,o=typeof o===a?o.apply(e):o),s+=l(o)+'"/>\n</div>\n'}),this.JST["strut.slide_components/ShapesDropdown"]=t.template(function(t,e,n,i,r){function o(){var t="";return t}function s(t,e){var i,r="";return r+='\n<li><a class="shape" data-src="',(i=n.src)?i=i.call(t,{hash:{},data:e}):(i=t.src,i=typeof i===h?i.apply(t):i),r+=d(i)+'"><img src="',(i=n.src)?i=i.call(t,{hash:{},data:e}):(i=t.src,i=typeof i===h?i.apply(t):i),r+=d(i)+'" width="100%" height="100%"></img></a></li>\n'}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,r=r||{};var a,l,c,u="",h="function",d=this.escapeExpression,p=this,f=n.helperMissing,g=n.blockHelperMissing;return u+='<a class="btn btn-plast dropdown-toggle" data-toggle="dropdown">\n	<i class="icon-star icon-white"></i>\n	',c={hash:{},inverse:p.noop,fn:p.program(1,o,r),data:r},a=n.lang,l=a?a.call(e,e.title,c):f.call(e,"lang",e.title,c),(l||0===l)&&(u+=l),u+='</a>\n<ul class="dropdown-menu horizontalDropdown" role="menu" style="min-width: 127px; width: 127px">\n',c={hash:{},inverse:p.noop,fn:p.program(3,s,r),data:r},(l=n.shapes)?l=l.call(e,c):(l=e.shapes,l=typeof l===h?l.apply(e):l),n.shapes||(l=g.call(e,l,c)),(l||0===l)&&(u+=l),u+="\n</ul>\n"}),this.JST["strut.slide_editor/Button"]=t.template(function(t,e,n,i,r){function o(){var t="";return t}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,r=r||{};var s,a,l,c="",u=this,h=n.helperMissing;return c+='<div class="btn-group iconBtns">\n	<a class="btn btn-plast">\n		<i class="icon-th-list icon-white"></i>\n		',l={hash:{},inverse:u.noop,fn:u.program(1,o,r),data:r},s=n.lang,a=s?s.call(e,"slides",l):h.call(e,"lang","slides",l),(a||0===a)&&(c+=a),c+="\n	</a>\n</div>"}),this.JST["strut.slide_snapshot/SlideDrawer"]=t.template(function(t,e,n,i,r){function o(){var t="";return t}function s(t,e){var i,r,s,a="";return a+="\n",s={hash:{},inverse:h.noop,fn:h.program(1,o,e),data:e},i=n.renderComponent,r=i?i.call(t,t,"Video WebFrame",s):d.call(t,"renderComponent",t,"Video WebFrame",s),(r||0===r)&&(a+=r),a+="\n"}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,r=r||{};var a,l,c,u="",h=this,d=n.helperMissing,p="function",f=n.blockHelperMissing;return u+='<div class="reveal themedArea">\n',c={hash:{},inverse:h.noop,fn:h.program(1,o,r),data:r},a=n.marked,l=a?a.call(e,e.markdown,c):d.call(e,"marked",e.markdown,c),(l||0===l)&&(u+=l),u+="\n</div>\n",c={hash:{},inverse:h.noop,fn:h.program(3,s,r),data:r},(l=n.components)?l=l.call(e,c):(l=e.components,l=typeof l===p?l.apply(e):l),n.components||(l=f.call(e,l,c)),(l||0===l)&&(u+=l),u+="\n"}),this.JST["strut.slide_snapshot/SlideSnapshot"]=t.template(function(t,e,n,i,r){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,r=r||{},'<div class="slideDrawer"></div>\n<span class="close-btn-red-20 removeBtn" title="Remove"></span>\n<span class="badge badge-inverse"> </span>'}),this.JST["strut.slide_snapshot/TransitionSlideSnapshot"]=t.template(function(t,e,n,i,r){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,r=r||{};var o,s="",a="function",l=this.escapeExpression;return s+='<div class="content">\n<div class="slideDrawer"></div>\n</div>\n<div class="topLabel form-inline">\n	<span class="label rotates" data-delta="rotateY">↻Y</span>\n	<input type="text" data-option="rotateY" value="',(o=n.rotateY)?o=o.call(e,{hash:{},data:r}):(o=e.rotateY,o=typeof o===a?o.apply(e):o),s+=l(o)+'"></input>\n</div>\n<div class="leftLabel form-inline">\n	<span class="label rotates" data-delta="rotateX">↻X</span>\n	<input type="text" data-option="rotateX" value="',(o=n.rotateX)?o=o.call(e,{hash:{},data:r}):(o=e.rotateX,o=typeof o===a?o.apply(e):o),s+=l(o)+'"></input>\n</div>\n<div class="rightLabel form-inline">\n	<span class="label rotates" data-delta="rotateZ">↻Z</span>\n	<input type="text" data-option="rotateZ" value="',(o=n.rotateZ)?o=o.call(e,{hash:{},data:r}):(o=e.rotateZ,o=typeof o===a?o.apply(e):o),s+=l(o)+'"></input>\n</div>\n<div class="positioningCtrls form-inline">\n	<span class="label layer">z</span>\n	<input class="position" type="text" data-option="z" value="',(o=n.z)?o=o.call(e,{hash:{},data:r}):(o=e.z,o=typeof o===a?o.apply(e):o),s+=l(o)+'"/>\n	<span class="label scales">↔</span>\n	<input class="position" type="text" data-option="scale" value="',(o=n.impScale)?o=o.call(e,{hash:{},data:r}):(o=e.impScale,o=typeof o===a?o.apply(e):o),s+=l(o)+'"/>\n</div>\n<span class="badge badge-inverse"> </span>\n'}),this.JST["strut.splash/Splash"]=t.template(function(t,e,n,i,r){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,r=r||{},"<div></div>"}),this.JST["strut.storage/ProviderTab"]=t.template(function(t,e,n,i,r){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,r=r||{},"<div></div>"}),this.JST["strut.storage/StorageModal"]=t.template(function(t,e,n,i,r){function o(t,e){var i,r="";return r+='\n			<li class="providerTab"><a data-provider="',(i=n.id)?i=i.call(t,{hash:{},data:e}):(i=t.id,i=typeof i===c?i.apply(t):i),r+=u(i)+'">',(i=n.name)?i=i.call(t,{hash:{},data:e}):(i=t.name,i=typeof i===c?i.apply(t):i),r+=u(i)+"</a></li>\n		"}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,r=r||{};var s,a,l="",c="function",u=this.escapeExpression,h=this,d=n.blockHelperMissing;return l+='<div class="modal-header">\n	<button class="close" data-dismiss="modal">×</button>\n	<h3 class="title">',(s=n.title)?s=s.call(e,{hash:{},data:r}):(s=e.title,s=typeof s===c?s.apply(e):s),l+=u(s)+'</h3>\n</div>\n<div class="modal-body" style="overflow: hidden">\n	<ul class="nav nav-tabs">\n		',a={hash:{},inverse:h.noop,fn:h.program(1,o,r),data:r},(s=n.tabs)?s=s.call(e,a):(s=e.tabs,s=typeof s===c?s.apply(e):s),n.tabs||(s=d.call(e,s,a)),(s||0===s)&&(l+=s),l+='\n	</ul>\n	<div class="tabContent">\n	</div>\n</div>\n<div class="modal-footer">\n	<a href="#" class="btn btn-primary ok btn-inverse">Ok</a>\n</div>'}),this.JST["strut.themes/BackgroundChooserDropdown"]=t.template(function(t,e,n,i,r){function o(){var t="";return t}function s(t,e){var i,r="";return r+='\n<li><a class="',(i=n.klass)?i=i.call(t,{hash:{},data:e}):(i=t.klass,i=typeof i===h?i.apply(t):i),r+=d(i)+' thumbnail" alt="',(i=n.description)?i=i.call(t,{hash:{},data:e}):(i=t.description,i=typeof i===h?i.apply(t):i),r+=d(i)+'" data-class="',(i=n.klass)?i=i.call(t,{hash:{},data:e}):(i=t.klass,i=typeof i===h?i.apply(t):i),r+=d(i)+'"></a></li>\n'}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,r=r||{};var a,l,c,u="",h="function",d=this.escapeExpression,p=this,f=n.helperMissing,g=n.blockHelperMissing;return u+='<a class="btn btn-plast dropdown-toggle" data-toggle="dropdown">\n	<i class="icon-tint icon-white"></i>\n	',c={hash:{},inverse:p.noop,fn:p.program(1,o,r),data:r},a=n.lang,l=a?a.call(e,e.title,c):f.call(e,"lang",e.title,c),(l||0===l)&&(u+=l),u+='</a>\n<ul class="dropdown-menu horizontalDropdown" role="menu" style="min-width: 127px; width: 127px">\n',c={hash:{},inverse:p.noop,fn:p.program(3,s,r),data:r},(l=n.backgrounds)?l=l.call(e,c):(l=e.backgrounds,l=typeof l===h?l.apply(e):l),n.backgrounds||(l=g.call(e,l,c)),(l||0===l)&&(u+=l),u+='\n<li><a class="nobg thumbnail" data-class="defaultbg"></a></li>\n</ul>\n'}),this.JST["strut.transition_editor/Button"]=t.template(function(t,e,n,i,r){function o(){var t="";return t}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,r=r||{};var s,a,l,c="",u=this,h=n.helperMissing;return c+='<div class="btn-group iconBtns">\n	<a class="btn btn-plast">\n		<i class="icon-th-large icon-white"></i>\n		',l={hash:{},inverse:u.noop,fn:u.program(1,o,r),data:r},s=n.lang,a=s?s.call(e,"overview",l):h.call(e,"lang","overview",l),(a||0===a)&&(c+=a),c+="\n	</a>\n</div>"}),this.JST["tantaman.web.widgets/CodeEditor"]=t.template(function(t,e,n,i,r){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,r=r||{};var o,s="",a="function",l=this.escapeExpression;return s+='<div class="modal-header">\n	<button class="close" data-dismiss="modal">×</button>\n	<h3>',(o=n.title)?o=o.call(e,{hash:{},data:r}):(o=e.title,o=typeof o===a?o.apply(e):o),s+=l(o)+'</h3>\n</div>\n<div class="modal-body" style="overflow: hidden">\n	<textarea class="codeInput" placeholder="',(o=n.placeholder)?o=o.call(e,{hash:{},data:r}):(o=e.placeholder,o=typeof o===a?o.apply(e):o),s+=l(o)+'"></textarea>\n</div>\n<div class="modal-footer">\n	<a href="#" class="btn btn-primary ok btn-inverse">Save</a>\n	<a href="#" class="btn btn-danger cancel">Cancel</a>\n</div>'}),this.JST["tantaman.web.widgets/FileBrowser"]=t.template(function(t,e,n,i,r){function o(t){var e="";return e+='\n	<li data-fileName="'+u(typeof t===c?t.apply(t):t)+'"><a>'+u(typeof t===c?t.apply(t):t)+' <button class="close pull-right">×</button></a></li>\n	'}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,r=r||{};var s,a,l="",c="function",u=this.escapeExpression,h=this,d=n.blockHelperMissing;return l+='<input type="text" class="fileName"></input>\n<ul class="nav nav-pills nav-stacked">\n	',a={hash:{},inverse:h.noop,fn:h.program(1,o,r),data:r},(s=n.files)?s=s.call(e,a):(s=e.files,s=typeof s===c?s.apply(e):s),n.files||(s=d.call(e,s,a)),(s||0===s)&&(l+=s),l+="\n</ul>"}),this.JST["tantaman.web.widgets/ItemImportModal"]=t.template(function(t,e,n,i,r){function o(){return'<div data-option="browse" class="btn">Browse</div>\n	<p><em>*Local images are currently uploaded to imgur.<br/>We\'re working on changing this.</em></p>'}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,r=r||{};var s,a,l="",c="function",u=this.escapeExpression,h=this,d=n.blockHelperMissing;return l+='<div class="modal-header">\n	<button class="close" data-dismiss="modal">×</button>\n	<h3>',(s=n.title)?s=s.call(e,{hash:{},data:r}):(s=e.title,s=typeof s===c?s.apply(e):s),l+=u(s)+'</h3>\n</div>\n<div class="modal-body" style="overflow: hidden">\n	<div class="alert alert-error dispNone">\n  		<button class="close" data-dismiss="alert">×</button>\n  		The image URL you entered appears to be incorrect\n	</div>\n	<h4>URL:</h4><div class="form-inline"><input type="text" name="itemUrl"></input>&nbsp;',a={hash:{},inverse:h.noop,fn:h.program(1,o,r),data:r},(s=n.browsable)?s=s.call(e,a):(s=e.browsable,s=typeof s===c?s.apply(e):s),n.browsable||(s=d.call(e,s,a)),(s||0===s)&&(l+=s),l+='</div>\n	<input type="file" style="display:none"></input>\n	<h4>Preview:</h4>\n	<ul class="thumbnails">\n		<li class="span4">\n			<div class="thumbnail">\n				<',(s=n.tag)?s=s.call(e,{hash:{},data:r}):(s=e.tag,s=typeof s===c?s.apply(e):s),l+=u(s)+' class="preview" width="360" height"268"></',(s=n.tag)?s=s.call(e,{hash:{},data:r}):(s=e.tag,s=typeof s===c?s.apply(e):s),l+=u(s)+'>\n			</div>\n			<div class="progress active progress-striped dispNone">\n  				<div class="bar"></div>\n			</div>\n		</li>\n	</ul>\n</div>\n<div class="modal-footer">\n	<a href="#" class="btn btn-primary ok btn-inverse">',(s=n.title)?s=s.call(e,{hash:{},data:r}):(s=e.title,s=typeof s===c?s.apply(e):s),l+=u(s)+"</a>\n</div>"}),this.JST["tantaman.web.widgets/PopoverTextbox"]=t.template(function(t,e,n,i,r){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,r=r||{};var o,s="",a="function",l=this.escapeExpression;return(o=n.title)?o=o.call(e,{hash:{},data:r}):(o=e.title,o=typeof o===a?o.apply(e):o),s+=l(o)+' <input type="textbox" placeholder="custom1 custom2"></input>\n<div>\n<a class="btn btn-plast ok">Ok</a>\n<a class="btn btn-danger cancel">Cancel</a>\n</div>'}),this.JST["tantaman.web.widgets/TabbedModal"]=t.template(function(t,e,n,i,r){function o(t,e){var i,r="";return r+='\n			<li class="providerTab" data-provider="',(i=n.id)?i=i.call(t,{hash:{},data:e}):(i=t.id,i=typeof i===c?i.apply(t):i),r+=u(i)+'"><a>',(i=n.name)?i=i.call(t,{hash:{},data:e}):(i=t.name,i=typeof i===c?i.apply(t):i),r+=u(i)+"</a></li>\n		"}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,r=r||{};var s,a,l="",c="function",u=this.escapeExpression,h=this,d=n.blockHelperMissing;return l+='<div class="modal-header">\n	<button class="close" data-dismiss="modal">×</button>\n	<h3 class="title">',(s=n.title)?s=s.call(e,{hash:{},data:r}):(s=e.title,s=typeof s===c?s.apply(e):s),l+=u(s)+'</h3>\n</div>\n<div class="modal-body" style="overflow: hidden">\n	<ul class="nav nav-tabs">\n		',s=typeof e===c?e.apply(e):e,a=d.call(e,s,{hash:{},inverse:h.noop,fn:h.program(1,o,r),data:r}),(a||0===a)&&(l+=a),l+='\n	</ul>\n	<div class="tabContent">\n	</div>\n</div>\n<div class="modal-footer">\n	<a href="#!" class="btn btn-primary ok btn-inverse">Ok</a>\n</div>'}),this.JST}),function(t,e){function n(t){var e=t.length,n=oe.type(t);return oe.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||"function"!==n&&(0===e||"number"==typeof e&&e>0&&e-1 in t)}function i(t){var e=fe[t]={};return oe.each(t.match(ae)||[],function(t,n){e[n]=!0}),e}function r(){this.cache={},this.expando=oe.expando+Math.random()}function o(t){ge.discard(t),me.discard(t)}function s(t,n,i){var r;if(i===e&&1===t.nodeType)if(r="data-"+n.replace(ye,"-$1").toLowerCase(),i=t.getAttribute(r),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:ve.test(i)?JSON.parse(i):i}catch(o){}ge.set(t,n,i)}else i=e;return i}function a(){return!0}function l(){return!1}function c(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function u(t,e,n){e=e||0;var i;if(oe.isFunction(e))return oe.grep(t,function(t,i){var r=!!e.call(t,i,t);return r===n});if(e.nodeType)return oe.grep(t,function(t){return t===e===n});if("string"==typeof e){if(i=oe.grep(t,function(t){return 1===t.nodeType}),Ie.test(e))return oe.filter(e,i,!n);e=oe.filter(e,i)}return oe.grep(t,function(t){return ee.call(e,t)>=0===n})}function h(t,e){return t.getElementsByTagName(e)[0]||t.appendChild(t.ownerDocument.createElement(e))}function d(t){var e=t.getAttributeNode("type");return t.type=(e&&e.specified)+"/"+t.type,t}function p(t){var e=Fe.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function f(t,e){for(var n=t.length,i=0;n>i;i++)me.set(t[i],"globalEval",!e||me.get(e[i],"globalEval"))}function g(t,e){var n,i,r,o,s,a,l,c;if(1===e.nodeType){if(me.hasData(t)&&(o=me.access(t),s=oe.extend({},o),c=o.events,me.set(e,s),c)){delete s.handle,s.events={};for(r in c)for(n=0,i=c[r].length;i>n;n++)oe.event.add(e,r,c[r][n])}ge.hasData(t)&&(a=ge.access(t),l=oe.extend({},a),ge.set(e,l))}}function m(t,n){var i=t.getElementsByTagName?t.getElementsByTagName(n||"*"):t.querySelectorAll?t.querySelectorAll(n||"*"):[];return n===e||n&&oe.nodeName(t,n)?oe.merge([t],i):i}function v(t,e){var n=e.nodeName.toLowerCase();"input"===n&&je.test(t.type)?e.checked=t.checked:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}function y(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,r=nn.length;r--;)if(e=nn[r]+n,e in t)return e;return i}function b(t,e){return t=e||t,"none"===oe.css(t,"display")||!oe.contains(t.ownerDocument,t)}function w(e){return t.getComputedStyle(e,null)}function x(t,e){for(var n,i,r,o=[],s=0,a=t.length;a>s;s++)i=t[s],i.style&&(o[s]=oe._data(i,"olddisplay"),n=i.style.display,e?(o[s]||"none"!==n||(i.style.display=""),""===i.style.display&&b(i)&&(o[s]=oe._data(i,"olddisplay",S(i.nodeName)))):o[s]||(r=b(i),(n&&"none"!==n||!r)&&oe._data(i,"olddisplay",r?n:oe.css(i,"display"))));for(s=0;a>s;s++)i=t[s],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?o[s]||"":"none"));return t}function _(t,e,n){var i=Ge.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function k(t,e,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===e?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=oe.css(t,n+en[o],!0,r)),i?("content"===n&&(s-=oe.css(t,"padding"+en[o],!0,r)),"margin"!==n&&(s-=oe.css(t,"border"+en[o]+"Width",!0,r))):(s+=oe.css(t,"padding"+en[o],!0,r),"padding"!==n&&(s+=oe.css(t,"border"+en[o]+"Width",!0,r)));return s}function C(t,e,n){var i=!0,r="width"===e?t.offsetWidth:t.offsetHeight,o=w(t),s=oe.support.boxSizing&&"border-box"===oe.css(t,"boxSizing",!1,o);if(0>=r||null==r){if(r=qe(t,e,o),(0>r||null==r)&&(r=t.style[e]),Je.test(r))return r;i=s&&(oe.support.boxSizingReliable||r===t.style[e]),r=parseFloat(r)||0}return r+k(t,e,n||(s?"border":"content"),i,o)+"px"}function S(t){var e=q,n=Ze[t];return n||(n=$(t,e),"none"!==n&&n||(Ue=(Ue||oe("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(e.documentElement),e=(Ue[0].contentWindow||Ue[0].contentDocument).document,e.write("<!doctype html><html><body>"),e.close(),n=$(t,e),Ue.detach()),Ze[t]=n),n}function $(t,e){var n=oe(e.createElement(t)).appendTo(e.body),i=oe.css(n[0],"display");return n.remove(),i}function T(t,e,n,i){var r;if(oe.isArray(e))oe.each(e,function(e,r){n||on.test(t)?i(t,r):T(t+"["+("object"==typeof r?e:"")+"]",r,n,i)});else if(n||"object"!==oe.type(e))i(t,e);else for(r in e)T(t+"["+r+"]",e[r],n,i)}function M(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,o=e.toLowerCase().match(ae)||[];if(oe.isFunction(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function E(t,n,i,r){function o(l){var c;return s[l]=!0,oe.each(t[l]||[],function(t,l){var u=l(n,i,r);return"string"!=typeof u||a||s[u]?a?!(c=u):e:(n.dataTypes.unshift(u),o(u),!1)}),c}var s={},a=t===_n;return o(n.dataTypes[0])||!s["*"]&&o("*")}function L(t,n){var i,r,o=oe.ajaxSettings.flatOptions||{};for(i in n)n[i]!==e&&((o[i]?t:r||(r={}))[i]=n[i]);return r&&oe.extend(!0,t,r),t}function A(t,n,i){for(var r,o,s,a,l=t.contents,c=t.dataTypes;"*"===c[0];)c.shift(),r===e&&(r=t.mimeType||n.getResponseHeader("Content-Type"));if(r)for(o in l)if(l[o]&&l[o].test(r)){c.unshift(o);break}if(c[0]in i)s=c[0];else{for(o in i){if(!c[0]||t.converters[o+" "+c[0]]){s=o;break}a||(a=o)}s=s||a}return s?(s!==c[0]&&c.unshift(s),i[s]):e}function I(t,e,n,i){var r,o,s,a,l,c={},u=t.dataTypes.slice();if(u[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(o=u.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(s=c[l+" "+o]||c["* "+o],!s)for(r in c)if(a=r.split(" "),a[1]===o&&(s=c[l+" "+a[0]]||c["* "+a[0]])){s===!0?s=c[r]:c[r]!==!0&&(o=a[0],u.unshift(a[1]));break}if(s!==!0)if(s&&t["throws"])e=s(e);else try{e=s(e)}catch(h){return{state:"parsererror",error:s?h:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}function N(){return setTimeout(function(){An=e}),An=oe.now()}function P(t,e){oe.each(e,function(e,n){for(var i=(On[e]||[]).concat(On["*"]),r=0,o=i.length;o>r;r++)if(i[r].call(t,e,n))return})}function D(t,e,n){var i,r,o=0,s=Hn.length,a=oe.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=An||N(),n=Math.max(0,c.startTime+c.duration-e),i=n/c.duration||0,o=1-i,s=0,l=c.tweens.length;l>s;s++)c.tweens[s].run(o);return a.notifyWith(t,[c,o,n]),1>o&&l?n:(a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:oe.extend({},e),opts:oe.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:An||N(),duration:n.duration,tweens:[],createTween:function(e,n){var i=oe.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(i),i},stop:function(e){var n=0,i=e?c.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)c.tweens[n].run(1);return e?a.resolveWith(t,[c,e]):a.rejectWith(t,[c,e]),this}}),u=c.props;for(H(u,c.opts.specialEasing);s>o;o++)if(i=Hn[o].call(c,t,u,c.opts))return i;return P(c,u),oe.isFunction(c.opts.start)&&c.opts.start.call(t,c),oe.fx.timer(oe.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function H(t,e){var n,i,r,o,s;for(n in t)if(i=oe.camelCase(n),r=e[i],o=t[n],oe.isArray(o)&&(r=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),s=oe.cssHooks[i],s&&"expand"in s){o=s.expand(o),delete t[i];for(n in o)n in t||(t[n]=o[n],e[n]=r)}else e[i]=r}function O(t,e,n){var i,r,o,s,a,l,c,u,h,d=this,p=t.style,f={},g=[],m=t.nodeType&&b(t);n.queue||(u=oe._queueHooks(t,"fx"),null==u.unqueued&&(u.unqueued=0,h=u.empty.fire,u.empty.fire=function(){u.unqueued||h()}),u.unqueued++,d.always(function(){d.always(function(){u.unqueued--,oe.queue(t,"fx").length||u.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===oe.css(t,"display")&&"none"===oe.css(t,"float")&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in e)if(o=e[i],Nn.exec(o)){if(delete e[i],l=l||"toggle"===o,o===(m?"hide":"show"))continue;g.push(i)}if(s=g.length){a=oe._data(t,"fxshow")||oe._data(t,"fxshow",{}),"hidden"in a&&(m=a.hidden),l&&(a.hidden=!m),m?oe(t).show():d.done(function(){oe(t).hide()}),d.done(function(){var e;oe._removeData(t,"fxshow");for(e in f)oe.style(t,e,f[e])});for(i=0;s>i;i++)r=g[i],c=d.createTween(r,m?a[r]:0),f[r]=a[r]||oe.style(t,r),r in a||(a[r]=c.start,m&&(c.end=c.start,c.start="width"===r||"height"===r?1:0))}}function B(t,e,n,i,r){return new B.prototype.init(t,e,n,i,r)}function j(t,e){var n,i={height:t},r=0;for(e=e?1:0;4>r;r+=2-e)n=en[r],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function z(t){return oe.isWindow(t)?t:9===t.nodeType&&t.defaultView}var R,F,W=typeof e,V=t.location,q=t.document,U=q.documentElement,X=t.jQuery,Y=t.$,G={},J=[],K="2.0.0-pre",Z=J.concat,Q=J.push,te=J.slice,ee=J.indexOf,ne=G.toString,ie=G.hasOwnProperty,re=K.trim,oe=function(t,e){return new oe.fn.init(t,e,R)},se=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ae=/\S+/g,le=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,ce=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ue=/^-ms-/,he=/-([\da-z])/gi,de=function(t,e){return e.toUpperCase()},pe=function(){q.removeEventListener("DOMContentLoaded",pe,!1),t.removeEventListener("load",pe,!1),oe.ready()};oe.fn=oe.prototype={jquery:K,constructor:oe,init:function(t,n,i){var r,o;if(!t)return this;if("string"==typeof t){if(r="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:le.exec(t),!r||!r[1]&&n)return!n||n.jquery?(n||i).find(t):this.constructor(n).find(t);if(r[1]){if(n=n instanceof oe?n[0]:n,oe.merge(this,oe.parseHTML(r[1],n&&n.nodeType?n.ownerDocument||n:q,!0)),ce.test(r[1])&&oe.isPlainObject(n))for(r in n)oe.isFunction(this[r])?this[r](n[r]):this.attr(r,n[r]);return this}if(o=q.getElementById(r[2]),o&&o.parentNode){if(o.id!==r[2])return i.find(t);this.length=1,this[0]=o}return this.context=q,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):oe.isFunction(t)?i.ready(t):(t.selector!==e&&(this.selector=t.selector,this.context=t.context),oe.makeArray(t,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return te.call(this)},get:function(t){return null==t?this.toArray():0>t?this[this.length+t]:this[t]},pushStack:function(t){var e=oe.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return oe.each(this,t,e)},ready:function(t){return oe.ready.promise().done(t),this},slice:function(){return this.pushStack(te.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},map:function(t){return this.pushStack(oe.map(this,function(e,n){return t.call(e,n,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:Q,sort:[].sort,splice:[].splice},oe.fn.init.prototype=oe.fn,oe.extend=oe.fn.extend=function(){var t,n,i,r,o,s,a=arguments[0]||{},l=1,c=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[1]||{},l=2),"object"==typeof a||oe.isFunction(a)||(a={}),c===l&&(a=this,--l);c>l;l++)if(null!=(t=arguments[l]))for(n in t)i=a[n],r=t[n],a!==r&&(u&&r&&(oe.isPlainObject(r)||(o=oe.isArray(r)))?(o?(o=!1,s=i&&oe.isArray(i)?i:[]):s=i&&oe.isPlainObject(i)?i:{},a[n]=oe.extend(u,s,r)):r!==e&&(a[n]=r));return a},oe.extend({expando:"jQuery"+(K+Math.random()).replace(/\D/g,""),noConflict:function(e){return t.$===oe&&(t.$=Y),e&&t.jQuery===oe&&(t.jQuery=X),oe},isReady:!1,readyWait:1,holdReady:function(t){t?oe.readyWait++:oe.ready(!0)},ready:function(t){(t===!0?--oe.readyWait:oe.isReady)||(oe.isReady=!0,t!==!0&&--oe.readyWait>0||(F.resolveWith(q,[oe]),oe.fn.trigger&&oe(q).trigger("ready").off("ready")))},isFunction:function(t){return"function"===oe.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?G[ne.call(t)]||"object":typeof t},isPlainObject:function(t){if("object"!==oe.type(t)||t.nodeType||oe.isWindow(t))return!1;try{if(t.constructor&&!ie.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},error:function(t){throw Error(t)},parseHTML:function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||q;var i=ce.exec(t),r=!n&&[];return i?[e.createElement(i[1])]:(i=oe.buildFragment([t],e,r),r&&oe(r).remove(),oe.merge([],i.childNodes))},parseJSON:JSON.parse,parseXML:function(t){var n,i;if(!t||"string"!=typeof t)return null;try{i=new DOMParser,n=i.parseFromString(t,"text/xml")}catch(r){n=e}return(!n||n.getElementsByTagName("parsererror").length)&&oe.error("Invalid XML: "+t),n},noop:function(){},globalEval:function(t){var e=eval;oe.trim(t)&&e(t+";")},camelCase:function(t){return t.replace(ue,"ms-").replace(he,de)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var r,o=0,s=t.length,a=n(t);if(i){if(a)for(;s>o&&(r=e.apply(t[o],i),r!==!1);o++);else for(o in t)if(r=e.apply(t[o],i),r===!1)break}else if(a)for(;s>o&&(r=e.call(t[o],o,t[o]),r!==!1);o++);else for(o in t)if(r=e.call(t[o],o,t[o]),r===!1)break;return t},trim:function(t){return null==t?"":re.call(t)},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?oe.merge(i,"string"==typeof t?[t]:t):Q.call(i,t)),i},inArray:function(t,e,n){return null==e?-1:ee.call(e,t,n)},merge:function(t,n){var i=n.length,r=t.length,o=0;if("number"==typeof i)for(;i>o;o++)t[r++]=n[o];else for(;n[o]!==e;)t[r++]=n[o++];return t.length=r,t},grep:function(t,e,n){var i,r=[],o=0,s=t.length;for(n=!!n;s>o;o++)i=!!e(t[o],o),n!==i&&r.push(t[o]);return r},map:function(t,e,i){var r,o=0,s=t.length,a=n(t),l=[];if(a)for(;s>o;o++)r=e(t[o],o,i),null!=r&&(l[l.length]=r);else for(o in t)r=e(t[o],o,i),null!=r&&(l[l.length]=r);return Z.apply([],l)},guid:1,proxy:function(t,n){var i,r,o;return"string"==typeof n&&(i=t[n],n=t,t=i),oe.isFunction(t)?(r=te.call(arguments,2),o=function(){return t.apply(n||this,r.concat(te.call(arguments)))},o.guid=t.guid=t.guid||oe.guid++,o):e},access:function(t,n,i,r,o,s,a){var l=0,c=t.length,u=null==i;if("object"===oe.type(i)){o=!0;for(l in i)oe.access(t,n,l,i[l],!0,s,a)}else if(r!==e&&(o=!0,oe.isFunction(r)||(a=!0),u&&(a?(n.call(t,r),n=null):(u=n,n=function(t,e,n){return u.call(oe(t),n)})),n))for(;c>l;l++)n(t[l],i,a?r:r.call(t[l],l,n(t[l],i)));return o?t:u?n.call(t):c?n(t[0],i):s},now:Date.now}),oe.ready.promise=function(e){return F||(F=oe.Deferred(),"complete"===q.readyState?setTimeout(oe.ready):(q.addEventListener("DOMContentLoaded",pe,!1),t.addEventListener("load",pe,!1))),F.promise(e)},oe.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){G["[object "+e+"]"]=e.toLowerCase()}),R=oe(q);var fe={};oe.Callbacks=function(t){t="string"==typeof t?fe[t]||i(t):oe.extend({},t);var n,r,o,s,a,l,c=[],u=!t.once&&[],h=function(e){for(n=t.memory&&e,r=!0,l=s||0,s=0,a=c.length,o=!0;c&&a>l;l++)if(c[l].apply(e[0],e[1])===!1&&t.stopOnFalse){n=!1;break}o=!1,c&&(u?u.length&&h(u.shift()):n?c=[]:d.disable())},d={add:function(){if(c){var e=c.length;(function i(e){oe.each(e,function(e,n){var r=oe.type(n);"function"===r?t.unique&&d.has(n)||c.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),o?a=c.length:n&&(s=e,h(n))}return this},remove:function(){return c&&oe.each(arguments,function(t,e){for(var n;(n=oe.inArray(e,c,n))>-1;)c.splice(n,1),o&&(a>=n&&a--,l>=n&&l--)}),this},has:function(t){return t?oe.inArray(t,c)>-1:!(!c||!c.length)},empty:function(){return c=[],a=0,this},disable:function(){return c=u=n=e,this},disabled:function(){return!c},lock:function(){return u=e,n||d.disable(),this},locked:function(){return!u},fireWith:function(t,e){return e=e||[],e=[t,e.slice?e.slice():e],!c||r&&!u||(o?u.push(e):h(e)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!r}};return d},oe.extend({Deferred:function(t){var e=[["resolve","done",oe.Callbacks("once memory"),"resolved"],["reject","fail",oe.Callbacks("once memory"),"rejected"],["notify","progress",oe.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return oe.Deferred(function(n){oe.each(e,function(e,o){var s=o[0],a=oe.isFunction(t[e])&&t[e];
r[o[1]](function(){var t=a&&a.apply(this,arguments);t&&oe.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?oe.extend(t,i):i}},r={};return i.pipe=i.then,oe.each(e,function(t,o){var s=o[2],a=o[3];i[o[1]]=s.add,a&&s.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=s.fireWith}),i.promise(r),t&&t.call(r,r),r},when:function(t){var e,n,i,r=0,o=te.call(arguments),s=o.length,a=1!==s||t&&oe.isFunction(t.promise)?s:0,l=1===a?t:oe.Deferred(),c=function(t,n,i){return function(r){n[t]=this,i[t]=arguments.length>1?te.call(arguments):r,i===e?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(s>1)for(e=Array(s),n=Array(s),i=Array(s);s>r;r++)o[r]&&oe.isFunction(o[r].promise)?o[r].promise().done(c(r,i,o)).fail(l.reject).progress(c(r,n,e)):--a;return a||l.resolveWith(i,o),l.promise()}}),oe.support=function(e){var n=q.createElement("input"),i=q.createDocumentFragment(),r=q.createElement("div"),o=q.createElement("select"),s=o.appendChild(q.createElement("option"));return n.type?(n.type="checkbox",e.checkOn=""===n.value,e.optSelected=s.selected,e.boxModel="CSS1Compat"===q.compatMode,e.reliableMarginRight=!0,e.boxSizingReliable=!0,e.pixelPosition=!1,n.checked=!0,e.noCloneChecked=n.cloneNode(!0).checked,o.disabled=!0,e.optDisabled=!s.disabled,n=q.createElement("input"),n.value="t",n.type="radio",e.radioValue="t"===n.value,n.setAttribute("checked","t"),n.setAttribute("name","t"),i.appendChild(n),e.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,e.focusinBubbles="onfocusin"in t,r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",e.clearCloneStyle="content-box"===r.style.backgroundClip,oe(function(){var n,i,o="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",s=q.getElementsByTagName("body")[0];s&&(n=q.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",s.appendChild(n).appendChild(r),r.innerHTML="",r.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",e.boxSizing=4===r.offsetWidth,e.doesNotIncludeMarginInBodyOffset=1!==s.offsetTop,t.getComputedStyle&&(e.pixelPosition="1%"!==(t.getComputedStyle(r,null)||{}).top,e.boxSizingReliable="4px"===(t.getComputedStyle(r,null)||{width:"4px"}).width,i=r.appendChild(q.createElement("div")),i.style.cssText=r.style.cssText=o,i.style.marginRight=i.style.width="0",r.style.width="1px",e.reliableMarginRight=!parseFloat((t.getComputedStyle(i,null)||{}).marginRight)),s.removeChild(n))}),e):e}({});var ge,me,ve=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,ye=/([A-Z])/g;r.uid=1,r.prototype={key:function(t){var e={},n=t[this.expando];if(!n){n=r.uid++;try{e[this.expando]={value:n},Object.defineProperties(t,e)}catch(i){e[this.expando]=n,oe.extend(t,e)}}return this.cache[n]||(this.cache[n]={}),n},set:function(t,e,n){var i,r=this.key(t),o=this.cache[r];if("string"==typeof e)o[e]=n;else if(oe.isEmptyObject(o))this.cache[r]=e;else for(i in e)o[i]=e[i];return this},get:function(t,n){var i=this.cache[this.key(t)];return n===e?i:i[n]},access:function(t,n,i){return n===e||n&&"string"==typeof n&&i===e?this.get(t,n):(this.set(t,n,i),i!==e?i:n)},remove:function(t,n){var i,r,o=this.key(t),s=this.cache[o];if(n===e)this.cache[o]={};else{oe.isArray(n)?r=n.concat(n.map(oe.camelCase)):n in s?r=[n]:(r=oe.camelCase(n),r=r in s?[r]:r.match(ae)||[]),i=r.length;for(;i--;)delete s[r[i]]}},hasData:function(t){return!oe.isEmptyObject(this.cache[this.key(t)])},discard:function(t){delete this.cache[this.key(t)]}},ge=new r,me=new r,oe.extend({acceptData:function(){return!0},hasData:function(t){return ge.hasData(t)||me.hasData(t)},data:function(t,e,n){return ge.access(t,e,n)},removeData:function(t,e){return ge.remove(t,e)},_data:function(t,e,n){return me.access(t,e,n)},_removeData:function(t,e){return me.remove(t,e)}}),oe.fn.extend({data:function(t,n){var i,r,o=this[0],a=0,l=null;if(t===e){if(this.length&&(l=ge.get(o),1===o.nodeType&&!me.get(o,"hasDataAttrs"))){for(i=o.attributes;i.length>a;a++)r=i[a].name,0===r.indexOf("data-")&&(r=oe.camelCase(r.substring(5)),s(o,r,l[r]));me.set(o,"hasDataAttrs",!0)}return l}return"object"==typeof t?this.each(function(){ge.set(this,t)}):oe.access(this,function(n){var i,r=oe.camelCase(t);return o&&n===e?(i=ge.get(o,t),i!==e?i:(i=ge.get(o,r),i!==e?i:(i=s(o,r,e),i!==e?i:e))):(this.each(function(){var i=ge.get(this,r);ge.set(this,r,n),/-/.test(t)&&i!==e&&ge.set(this,t,n)}),e)},null,n,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){ge.remove(this,t)})}}),oe.extend({queue:function(t,n,i){var r;return t?(n=(n||"fx")+"queue",r=oe._data(t,n),i&&(!r||oe.isArray(i)?r=oe._data(t,n,oe.makeArray(i)):r.push(i)),r||[]):e},dequeue:function(t,e){e=e||"fx";var n=oe.queue(t,e),i=n.length,r=n.shift(),o=oe._queueHooks(t,e),s=function(){oe.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),o.cur=r,r&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,s,o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return oe._data(t,n)||oe._data(t,n,{empty:oe.Callbacks("once memory").add(function(){oe._removeData(t,e+"queue"),oe._removeData(t,n)})})}}),oe.fn.extend({queue:function(t,n){var i=2;return"string"!=typeof t&&(n=t,t="fx",i--),i>arguments.length?oe.queue(this[0],t):n===e?this:this.each(function(){var e=oe.queue(this,t,n);oe._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&oe.dequeue(this,t)})},dequeue:function(t){return this.each(function(){oe.dequeue(this,t)})},delay:function(t,e){return t=oe.fx?oe.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,n){var i,r=1,o=oe.Deferred(),s=this,a=this.length,l=function(){--r||o.resolveWith(s,[s])};for("string"!=typeof t&&(n=t,t=e),t=t||"fx";a--;)i=oe._data(s[a],t+"queueHooks"),i&&i.empty&&(r++,i.empty.add(l));return l(),o.promise(n)}});var be,we,xe=/[\t\r\n]/g,_e=/\r/g,ke=/^(?:input|select|textarea|button|object)$/i,Ce=/^(?:a|area)$/i,Se=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i;oe.fn.extend({attr:function(t,e){return oe.access(this,oe.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){oe.removeAttr(this,t)})},prop:function(t,e){return oe.access(this,oe.prop,t,e,arguments.length>1)},removeProp:function(t){return t=oe.propFix[t]||t,this.each(function(){try{this[t]=e,delete this[t]}catch(n){}})},addClass:function(t){var e,n,i,r,o,s=0,a=this.length,l="string"==typeof t&&t;if(oe.isFunction(t))return this.each(function(e){oe(this).addClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(ae)||[];a>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(xe," "):" ")){for(o=0;r=e[o++];)0>i.indexOf(" "+r+" ")&&(i+=r+" ");n.className=oe.trim(i)}return this},removeClass:function(t){var e,n,i,r,o,s=0,a=this.length,l=0===arguments.length||"string"==typeof t&&t;if(oe.isFunction(t))return this.each(function(e){oe(this).removeClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(ae)||[];a>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(xe," "):"")){for(o=0;r=e[o++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");n.className=t?oe.trim(i):""}return this},toggleClass:function(t,e){var n=typeof t,i="boolean"==typeof e;return oe.isFunction(t)?this.each(function(n){oe(this).toggleClass(t.call(this,n,this.className,e),e)}):this.each(function(){if("string"===n)for(var r,o=0,s=oe(this),a=e,l=t.match(ae)||[];r=l[o++];)a=i?a:!s.hasClass(r),s[a?"addClass":"removeClass"](r);else(n===W||"boolean"===n)&&(this.className&&oe._data(this,"__className__",this.className),this.className=this.className||t===!1?"":oe._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(xe," ").indexOf(e)>=0)return!0;return!1},val:function(t){var n,i,r,o=this[0];{if(arguments.length)return r=oe.isFunction(t),this.each(function(i){var o,s=oe(this);1===this.nodeType&&(o=r?t.call(this,i,s.val()):t,null==o?o="":"number"==typeof o?o+="":oe.isArray(o)&&(o=oe.map(o,function(t){return null==t?"":t+""})),n=oe.valHooks[this.type]||oe.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,o,"value")!==e||(this.value=o))});if(o)return n=oe.valHooks[o.type]||oe.valHooks[o.nodeName.toLowerCase()],n&&"get"in n&&(i=n.get(o,"value"))!==e?i:(i=o.value,"string"==typeof i?i.replace(_e,""):null==i?"":i)}}}),oe.extend({valHooks:{option:{get:function(t){var e=t.attributes.value;return!e||e.specified?t.value:t.text}},select:{get:function(t){for(var e,n,i=t.options,r=t.selectedIndex,o="select-one"===t.type||0>r,s=o?null:[],a=o?r+1:i.length,l=0>r?a:o?r:0;a>l;l++)if(n=i[l],!(!n.selected&&l!==r||(oe.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&oe.nodeName(n.parentNode,"optgroup"))){if(e=oe(n).val(),o)return e;s.push(e)}return s},set:function(t,e){for(var n,i,r=t.options,o=oe.makeArray(e),s=r.length;s--;)i=r[s],(i.selected=oe.inArray(oe(i).val(),o)>=0)&&(n=!0);return n||(t.selectedIndex=-1),o}}},attr:function(t,n,i){var r,o,s,a=t.nodeType;if(t&&3!==a&&8!==a&&2!==a)return typeof t.getAttribute===W?oe.prop(t,n,i):(s=1!==a||!oe.isXMLDoc(t),s&&(n=n.toLowerCase(),o=oe.attrHooks[n]||(Se.test(n)?we:be)),i===e?o&&s&&"get"in o&&null!==(r=o.get(t,n))?r:(typeof t.getAttribute!==W&&(r=t.getAttribute(n)),null==r?e:r):null!==i?o&&s&&"set"in o&&(r=o.set(t,i,n))!==e?r:(t.setAttribute(n,i+""),i):(oe.removeAttr(t,n),e))},removeAttr:function(t,e){var n,i,r=0,o=e&&e.match(ae);if(o&&1===t.nodeType)for(;n=o[r++];)i=oe.propFix[n]||n,Se.test(n)&&(t[i]=!1),t.removeAttribute(n)},attrHooks:{type:{set:function(t,e){if(!oe.support.radioValue&&"radio"===e&&oe.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(t,n,i){var r,o,s,a=t.nodeType;if(t&&3!==a&&8!==a&&2!==a)return s=1!==a||!oe.isXMLDoc(t),s&&(n=oe.propFix[n]||n,o=oe.propHooks[n]),i!==e?o&&"set"in o&&(r=o.set(t,i,n))!==e?r:t[n]=i:o&&"get"in o&&null!==(r=o.get(t,n))?r:t[n]},propHooks:{tabIndex:{get:function(t){var n=t.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):ke.test(t.nodeName)||Ce.test(t.nodeName)&&t.href?0:e}}}}),we={get:function(t,n){return null!==t.getAttribute(n)?n.toLowerCase():e},set:function(t,e,n){return e===!1?oe.removeAttr(t,n):t.setAttribute(n,n),n}},oe.support.checkOn||oe.each(["radio","checkbox"],function(){oe.valHooks[this]={get:function(t){return null===t.getAttribute("value")?"on":t.value}}}),oe.each(["radio","checkbox"],function(){oe.valHooks[this]=oe.extend(oe.valHooks[this],{set:function(t,n){return oe.isArray(n)?t.checked=oe.inArray(oe(t).val(),n)>=0:e}})}),oe.support.optSelected||(oe.propHooks.selected=oe.extend(oe.propHooks.selected,{get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}));var $e=/^key/,Te=/^(?:mouse|contextmenu)|click/,Me=/^(?:focusinfocus|focusoutblur)$/,Ee=/^([^.]*)(?:\.(.+)|)$/;oe.event={global:{},add:function(t,n,i,r,o){var s,a,l,c,u,h,d,p,f,g,m,v=me.get(t);if(v){for(i.handler&&(s=i,i=s.handler,o=s.selector),i.guid||(i.guid=oe.guid++),(c=v.events)||(c=v.events={}),(a=v.handle)||(a=v.handle=function(t){return typeof oe===W||t&&oe.event.triggered===t.type?e:oe.event.dispatch.apply(a.elem,arguments)},a.elem=t),n=(n||"").match(ae)||[""],u=n.length;u--;)l=Ee.exec(n[u])||[],f=m=l[1],g=(l[2]||"").split(".").sort(),f&&(d=oe.event.special[f]||{},f=(o?d.delegateType:d.bindType)||f,d=oe.event.special[f]||{},h=oe.extend({type:f,origType:m,data:r,handler:i,guid:i.guid,selector:o,needsContext:o&&oe.expr.match.needsContext.test(o),namespace:g.join(".")},s),(p=c[f])||(p=c[f]=[],p.delegateCount=0,d.setup&&d.setup.call(t,r,g,a)!==!1||t.addEventListener&&t.addEventListener(f,a,!1)),d.add&&(d.add.call(t,h),h.handler.guid||(h.handler.guid=i.guid)),o?p.splice(p.delegateCount++,0,h):p.push(h),oe.event.global[f]=!0);t=null}},remove:function(t,e,n,i,r){var o,s,a,l,c,u,h,d,p,f,g,m=me.hasData(t)&&me.get(t);if(m&&(l=m.events)){for(e=(e||"").match(ae)||[""],c=e.length;c--;)if(a=Ee.exec(e[c])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p){for(h=oe.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,d=l[p]||[],a=a[2]&&RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=d.length;o--;)u=d[o],!r&&g!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(d.splice(o,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(t,u));s&&!d.length&&(h.teardown&&h.teardown.call(t,f,m.handle)!==!1||oe.removeEvent(t,p,m.handle),delete l[p])}else for(p in l)oe.event.remove(t,p+e[c],n,i,!0);oe.isEmptyObject(l)&&(delete m.handle,oe._removeData(t,"events"))}},trigger:function(n,i,r,o){var s,a,l,c,u,h,d,p=[r||q],f=ie.call(n,"type")?n.type:n,g=ie.call(n,"namespace")?n.namespace.split("."):[];if(a=l=r=r||q,3!==r.nodeType&&8!==r.nodeType&&!Me.test(f+oe.event.triggered)&&(f.indexOf(".")>=0&&(g=f.split("."),f=g.shift(),g.sort()),u=0>f.indexOf(":")&&"on"+f,n=n[oe.expando]?n:new oe.Event(f,"object"==typeof n&&n),n.isTrigger=o?2:3,n.namespace=g.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=e,n.target||(n.target=r),i=null==i?[n]:oe.makeArray(i,[n]),d=oe.event.special[f]||{},o||!d.trigger||d.trigger.apply(r,i)!==!1)){if(!o&&!d.noBubble&&!oe.isWindow(r)){for(c=d.delegateType||f,Me.test(c+f)||(a=a.parentNode);a;a=a.parentNode)p.push(a),l=a;l===(r.ownerDocument||q)&&p.push(l.defaultView||l.parentWindow||t)}for(s=0;(a=p[s++])&&!n.isPropagationStopped();)n.type=s>1?c:d.bindType||f,h=(oe._data(a,"events")||{})[n.type]&&oe._data(a,"handle"),h&&h.apply(a,i),h=u&&a[u],h&&oe.acceptData(a)&&h.apply&&h.apply(a,i)===!1&&n.preventDefault();return n.type=f,o||n.isDefaultPrevented()||d._default&&d._default.apply(r.ownerDocument,i)!==!1||"click"===f&&oe.nodeName(r,"a")||!oe.acceptData(r)||u&&oe.isFunction(r[f])&&!oe.isWindow(r)&&(l=r[u],l&&(r[u]=null),oe.event.triggered=f,r[f](),oe.event.triggered=e,l&&(r[u]=l)),n.result}},dispatch:function(t){t=oe.event.fix(t);var n,i,r,o,s,a=[],l=te.call(arguments),c=(oe._data(this,"events")||{})[t.type]||[],u=oe.event.special[t.type]||{};if(l[0]=t,t.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,t)!==!1){for(a=oe.event.handlers.call(this,t,c),n=0;(o=a[n++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,i=0;(s=o.handlers[i++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(s.namespace))&&(t.handleObj=s,t.data=s.data,r=((oe.event.special[s.origType]||{}).handle||s.handler).apply(o.elem,l),r!==e&&(t.result=r)===!1&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,n){var i,r,o,s,a=[],l=n.delegateCount,c=t.target;if(l&&c.nodeType&&(!t.button||"click"!==t.type))for(;c!=this;c=c.parentNode||this)if(c.disabled!==!0||"click"!==t.type){for(r=[],i=0;l>i;i++)s=n[i],o=s.selector+" ",r[o]===e&&(r[o]=s.needsContext?oe(o,this).index(c)>=0:oe.find(o,this,null,[c]).length),r[o]&&r.push(s);r.length&&a.push({elem:c,handlers:r})}return n.length>l&&a.push({elem:this,handlers:n.slice(l)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,n){var i,r,o,s=n.button;return null==t.pageX&&null!=n.clientX&&(i=t.target.ownerDocument||q,r=i.documentElement,o=i.body,t.pageX=n.clientX+(r&&r.scrollLeft||o&&o.scrollLeft||0)-(r&&r.clientLeft||o&&o.clientLeft||0),t.pageY=n.clientY+(r&&r.scrollTop||o&&o.scrollTop||0)-(r&&r.clientTop||o&&o.clientTop||0)),t.which||s===e||(t.which=1&s?1:2&s?3:4&s?2:0),t}},fix:function(t){if(t[oe.expando])return t;var e,n,i,r=t.type,o=t,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=Te.test(r)?this.mouseHooks:$e.test(r)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,t=new oe.Event(o),e=i.length;e--;)n=i[e],t[n]=o[n];return 3===t.target.nodeType&&(t.target=t.target.parentNode),s.filter?s.filter(t,o):t},special:{load:{noBubble:!0},click:{trigger:function(){return"checkbox"===this.type&&this.click&&oe.nodeName(this,"input")?(this.click(),!1):e}},focus:{trigger:function(){return this!==q.activeElement&&this.focus?(this.focus(),!1):e},delegateType:"focusin"},blur:{trigger:function(){return this===q.activeElement&&this.blur?(this.blur(),!1):e},delegateType:"focusout"},beforeunload:{postDispatch:function(t){t.result!==e&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var r=oe.extend(new oe.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?oe.event.trigger(r,null,e):oe.event.dispatch.call(e,r),r.isDefaultPrevented()&&n.preventDefault()}},oe.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)},oe.Event=function(t,n){return this instanceof oe.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.getPreventDefault&&t.getPreventDefault()?a:l):this.type=t,n&&oe.extend(this,n),this.timeStamp=t&&t.timeStamp||oe.now(),this[oe.expando]=!0,e):new oe.Event(t,n)},oe.Event.prototype={isDefaultPrevented:l,isPropagationStopped:l,isImmediatePropagationStopped:l,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=a,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=a,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=a,this.stopPropagation()}},oe.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){oe.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,o=t.handleObj;return(!r||r!==i&&!oe.contains(i,r))&&(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),oe.support.focusinBubbles||oe.each({focus:"focusin",blur:"focusout"},function(t,e){var n=0,i=function(t){oe.event.simulate(e,t.target,oe.event.fix(t),!0)};oe.event.special[e]={setup:function(){0===n++&&q.addEventListener(t,i,!0)},teardown:function(){0===--n&&q.removeEventListener(t,i,!0)}}}),oe.fn.extend({on:function(t,n,i,r,o){var s,a;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=e);for(a in t)this.on(a,n,i,t[a],o);return this}if(null==i&&null==r?(r=n,i=n=e):null==r&&("string"==typeof n?(r=i,i=e):(r=i,i=n,n=e)),r===!1)r=l;else if(!r)return this;return 1===o&&(s=r,r=function(t){return oe().off(t),s.apply(this,arguments)},r.guid=s.guid||(s.guid=oe.guid++)),this.each(function(){oe.event.add(this,t,r,i,n)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,n,i){var r,o;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,oe(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(o in t)this.off(o,n,t[o]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=e),i===!1&&(i=l),this.each(function(){oe.event.remove(this,t,i,n)})},trigger:function(t,e){return this.each(function(){oe.event.trigger(t,e,this)})},triggerHandler:function(t,n){var i=this[0];return i?oe.event.trigger(t,n,i,!0):e}}),function(t,e){function n(t){return me.test(t+"")}function i(){var t,e=[];return t=function(n,i){return e.push(n+=" ")>C.cacheLength&&delete t[e.shift()],t[n]=i}}function r(t){return t[B]=!0,t}function o(t){var e=A.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e=null}}function s(t,e,n,i){var r,o,s,a,l,c,u,p,f,g;if((e?e.ownerDocument||e:j)!==A&&L(e),e=e||A,n=n||[],!t||"string"!=typeof t)return n;if(1!==(a=e.nodeType)&&9!==a)return[];if(N&&!i){if(r=ve.exec(t))if(s=r[1]){if(9===a){if(o=e.getElementById(s),!o||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(s))&&O(e,o)&&o.id===s)return n.push(o),n}else{if(r[2])return Q.apply(n,e.getElementsByTagName(t)),n;if((s=r[3])&&z.getElementsByClassName&&e.getElementsByClassName)return Q.apply(n,e.getElementsByClassName(s)),n}if(z.qsa&&!P.test(t)){if(u=!0,p=B,f=e,g=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(c=h(t),(u=e.getAttribute("id"))?p=u.replace(we,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",l=c.length;l--;)c[l]=p+d(c[l]);f=ge.test(t)&&e.parentNode||e,g=c.join(",")}if(g)try{return Q.apply(n,f.querySelectorAll(g)),n}catch(m){}finally{u||e.removeAttribute("id")}}}return w(t.replace(ce,"$1"),e,n,i)}function a(t,e){var n=e&&t,i=n&&(~e.sourceIndex||G)-(~t.sourceIndex||G);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function l(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function c(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function u(t){return r(function(e){return e=+e,r(function(n,i){for(var r,o=t([],n.length,e),s=o.length;s--;)n[r=o[s]]&&(n[r]=!(i[r]=n[r]))})})}function h(t,e){var n,i,r,o,a,l,c,u=V[t+" "];if(u)return e?0:u.slice(0);for(a=t,l=[],c=C.preFilter;a;){(!n||(i=ue.exec(a)))&&(i&&(a=a.slice(i[0].length)||a),l.push(r=[])),n=!1,(i=he.exec(a))&&(n=i.shift(),r.push({value:n,type:i[0].replace(ce," ")}),a=a.slice(n.length));for(o in C.filter)!(i=fe[o].exec(a))||c[o]&&!(i=c[o](i))||(n=i.shift(),r.push({value:n,type:o,matches:i}),a=a.slice(n.length));if(!n)break}return e?a.length:a?s.error(t):V(t,l).slice(0)}function d(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function p(t,e,n){var i=e.dir,r=n&&"parentNode"===i,o=F++;return e.first?function(e,n,o){for(;e=e[i];)if(1===e.nodeType||r)return t(e,n,o)}:function(e,n,s){var a,l,c,u=R+" "+o;if(s){for(;e=e[i];)if((1===e.nodeType||r)&&t(e,n,s))return!0}else for(;e=e[i];)if(1===e.nodeType||r)if(c=e[B]||(e[B]={}),(l=c[i])&&l[0]===u){if((a=l[1])===!0||a===k)return a===!0}else if(l=c[i]=[u],l[1]=t(e,n,s)||k,l[1]===!0)return!0}}function f(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function g(t,e,n,i,r){for(var o,s=[],a=0,l=t.length,c=null!=e;l>a;a++)(o=t[a])&&(!n||n(o,i,r))&&(s.push(o),c&&e.push(a));return s}function m(t,e,n,i,o,s){return i&&!i[B]&&(i=m(i)),o&&!o[B]&&(o=m(o,s)),r(function(r,s,a,l){var c,u,h,d=[],p=[],f=s.length,m=r||b(e||"*",a.nodeType?[a]:a,[]),v=!t||!r&&e?m:g(m,d,t,a,l),y=n?o||(r?t:f||i)?[]:s:v;if(n&&n(v,y,a,l),i)for(c=g(y,p),i(c,[],a,l),u=c.length;u--;)(h=c[u])&&(y[p[u]]=!(v[p[u]]=h));if(r){if(o||t){if(o){for(c=[],u=y.length;u--;)(h=y[u])&&c.push(v[u]=h);o(null,y=[],c,l)}for(u=y.length;u--;)(h=y[u])&&(c=o?ee.call(r,h):d[u])>-1&&(r[c]=!(s[c]=h))}}else y=g(y===s?y.splice(f,y.length):y),o?o(null,s,y,l):Q.apply(s,y)})}function v(t){for(var e,n,i,r=t.length,o=C.relative[t[0].type],s=o||C.relative[" "],a=o?1:0,l=p(function(t){return t===e},s,!0),c=p(function(t){return ee.call(e,t)>-1},s,!0),u=[function(t,n,i){return!o&&(i||n!==M)||((e=n).nodeType?l(t,n,i):c(t,n,i))}];r>a;a++)if(n=C.relative[t[a].type])u=[p(f(u),n)];else{if(n=C.filter[t[a].type].apply(null,t[a].matches),n[B]){for(i=++a;r>i&&!C.relative[t[i].type];i++);return m(a>1&&f(u),a>1&&d(t.slice(0,a-1)).replace(ce,"$1"),n,i>a&&v(t.slice(a,i)),r>i&&v(t=t.slice(i)),r>i&&d(t))}u.push(n)}return f(u)}function y(t,e){var n=0,i=e.length>0,o=t.length>0,a=function(r,a,l,c,u){var h,d,p,f=[],m=0,v="0",y=r&&[],b=null!=u,w=M,x=r||o&&C.find.TAG("*",u&&a.parentNode||a),_=R+=null==w?1:Math.random()||.1;for(b&&(M=a!==A&&a,k=n);null!=(h=x[v]);v++){if(o&&h){for(d=0;p=t[d++];)if(p(h,a,l)){c.push(h);break}b&&(R=_,k=++n)}i&&((h=!p&&h)&&m--,r&&y.push(h))}if(m+=v,i&&v!==m){for(d=0;p=e[d++];)p(y,f,a,l);if(r){if(m>0)for(;v--;)y[v]||f[v]||(f[v]=K.call(c));f=g(f)}Q.apply(c,f),b&&!r&&f.length>0&&m+e.length>1&&s.uniqueSort(c)}return b&&(R=_,M=w),y};return i?r(a):a}function b(t,e,n){for(var i=0,r=e.length;r>i;i++)s(t,e[i],n);return n}function w(t,e,n,i){var r,o,s,a,l,c=h(t);if(!i&&1===c.length){if(o=c[0]=c[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&9===e.nodeType&&N&&C.relative[o[1].type]){if(e=(C.find.ID(s.matches[0].replace(_e,ke),e)||[])[0],!e)return n;t=t.slice(o.shift().value.length)}for(r=fe.needsContext.test(t)?0:o.length;r--&&(s=o[r],!C.relative[a=s.type]);)if((l=C.find[a])&&(i=l(s.matches[0].replace(_e,ke),ge.test(o[0].type)&&e.parentNode||e))){if(o.splice(r,1),t=i.length&&d(o),!t)return Q.apply(n,i),n;break}}return T(t,c)(i,e,!N,n,ge.test(t)),n}function x(){}var _,k,C,S,$,T,M,E,L,A,I,N,P,D,H,O,B="sizzle"+-new Date,j=t.document,z={},R=0,F=0,W=i(),V=i(),q=i(),U=!1,X=function(){return 0},Y=typeof e,G=1<<31,J=[],K=J.pop,Z=J.push,Q=J.push,te=J.slice,ee=J.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re=ie.replace("w","w#"),se="([*^$|!~]?=)",ae="\\["+ne+"*("+ie+")"+ne+"*(?:"+se+ne+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+re+")|)|)"+ne+"*\\]",le=":("+ie+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ae.replace(3,8)+")*)|.*)\\)|)",ce=RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ue=RegExp("^"+ne+"*,"+ne+"*"),he=RegExp("^"+ne+"*([\\x20\\t\\r\\n\\f>+~])"+ne+"*"),de=RegExp(le),pe=RegExp("^"+re+"$"),fe={ID:RegExp("^#("+ie+")"),CLASS:RegExp("^\\.("+ie+")"),NAME:RegExp("^\\[name=['\"]?("+ie+")['\"]?\\]"),TAG:RegExp("^("+ie.replace("w","w*")+")"),ATTR:RegExp("^"+ae),PSEUDO:RegExp("^"+le),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),needsContext:RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},ge=/[\x20\t\r\n\f]*[+~]/,me=/^[^{]+\{\s*\[native code/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/^(?:input|select|textarea|button)$/i,be=/^h\d$/i,we=/'|\\/g,xe=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,_e=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,ke=function(t,e){var n="0x"+e-65536;return n!==n?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{Q.apply(J=te.call(j.childNodes),j.childNodes),J[j.childNodes.length].nodeType}catch(Ce){Q={apply:J.length?function(t,e){Z.apply(t,te.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}$=s.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},L=s.setDocument=function(t){var i=t?t.ownerDocument||t:j;return i!==A&&9===i.nodeType&&i.documentElement?(A=i,I=i.documentElement,N=!$(i),z.getElementsByTagName=o(function(t){return t.appendChild(i.createComment("")),!t.getElementsByTagName("*").length}),z.attributes=o(function(t){t.innerHTML="<select></select>";var e=typeof t.lastChild.getAttribute("multiple");return"boolean"!==e&&"string"!==e}),z.getElementsByClassName=o(function(t){return t.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",t.getElementsByClassName&&t.getElementsByClassName("e").length?(t.lastChild.className="e",2===t.getElementsByClassName("e").length):!1}),z.getByName=o(function(t){t.id=B+0,t.appendChild(A.createElement("a")).setAttribute("name",B),t.appendChild(A.createElement("i")).setAttribute("name",B),I.appendChild(t);var e=i.getElementsByName&&i.getElementsByName(B).length===2+i.getElementsByName(B+0).length;return I.removeChild(t),e}),z.sortDetached=o(function(t){return t.compareDocumentPosition&&1&t.compareDocumentPosition(A.createElement("div"))}),C.attrHandle=o(function(t){return t.innerHTML="<a href='#'></a>",t.firstChild&&typeof t.firstChild.getAttribute!==Y&&"#"===t.firstChild.getAttribute("href")})?{}:{href:function(t){return t.getAttribute("href",2)},type:function(t){return t.getAttribute("type")}},z.getByName?(C.find.ID=function(t,e){if(typeof e.getElementById!==Y&&N){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},C.filter.ID=function(t){var e=t.replace(_e,ke);return function(t){return t.getAttribute("id")===e}}):(C.find.ID=function(t,n){if(typeof n.getElementById!==Y&&N){var i=n.getElementById(t);return i?i.id===t||typeof i.getAttributeNode!==Y&&i.getAttributeNode("id").value===t?[i]:e:[]}},C.filter.ID=function(t){var e=t.replace(_e,ke);return function(t){var n=typeof t.getAttributeNode!==Y&&t.getAttributeNode("id");return n&&n.value===e}}),C.find.TAG=z.getElementsByTagName?function(t,n){return typeof n.getElementsByTagName!==Y?n.getElementsByTagName(t):e}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},C.find.NAME=z.getByName&&function(t,n){return typeof n.getElementsByName!==Y?n.getElementsByName(name):e},C.find.CLASS=z.getElementsByClassName&&function(t,n){return typeof n.getElementsByClassName!==Y&&N?n.getElementsByClassName(t):e},D=[],P=[":focus"],(z.qsa=n(i.querySelectorAll))&&(o(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||P.push("\\["+ne+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),t.querySelectorAll(":checked").length||P.push(":checked")}),o(function(t){var e=A.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("i",""),t.querySelectorAll("[i^='']").length&&P.push("[*^$]="+ne+"*(?:\"\"|'')"),t.querySelectorAll(":enabled").length||P.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),P.push(",.*:")})),(z.matchesSelector=n(H=I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&o(function(t){z.disconnectedMatch=H.call(t,"div"),H.call(t,"[s!='']:x"),D.push("!=",le)}),P=RegExp(P.join("|")),D=D.length&&RegExp(D.join("|")),O=n(I.contains)||I.compareDocumentPosition?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},X=I.compareDocumentPosition?function(t,e){if(t===e)return U=!0,0;var n=e.compareDocumentPosition&&t.compareDocumentPosition&&t.compareDocumentPosition(e);return n?1&n||!z.sortDetached&&e.compareDocumentPosition(t)===n?t===i||O(j,t)?-1:e===i||O(j,e)?1:E?ee.call(E,t)-ee.call(E,e):0:4&n?-1:1:t.compareDocumentPosition?-1:1}:function(t,e){var n,r=0,o=t.parentNode,s=e.parentNode,l=[t],c=[e];if(t===e)return U=!0,0;if(!o||!s)return t===i?-1:e===i?1:o?-1:s?1:E?ee.call(E,t)-ee.call(E,e):0;if(o===s)return a(t,e);for(n=t;n=n.parentNode;)l.unshift(n);for(n=e;n=n.parentNode;)c.unshift(n);for(;l[r]===c[r];)r++;return r?a(l[r],c[r]):l[r]===j?-1:c[r]===j?1:0},A):A},s.matches=function(t,e){return s(t,null,null,e)},s.matchesSelector=function(t,e){if((t.ownerDocument||t)!==A&&L(t),e=e.replace(xe,"='$1']"),z.matchesSelector&&N&&(!D||!D.test(e))&&!P.test(e))try{var n=H.call(t,e);if(n||z.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(i){}return s(e,A,null,[t]).length>0},s.contains=function(t,e){return(t.ownerDocument||t)!==A&&L(t),O(t,e)},s.attr=function(t,e){var n;return(t.ownerDocument||t)!==A&&L(t),N&&(e=e.toLowerCase()),(n=C.attrHandle[e])?n(t):!N||z.attributes?t.getAttribute(e):((n=t.getAttributeNode(e))||t.getAttribute(e))&&t[e]===!0?e:n&&n.specified?n.value:null
},s.error=function(t){throw Error("Syntax error, unrecognized expression: "+t)},s.uniqueSort=function(t){var e,n=[],i=0,r=0;if(U=!z.detectDuplicates,E=!z.sortStable&&t.slice(0),t.sort(X),U){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return t},S=s.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=S(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i];i++)n+=S(e);return n},C=s.selectors={cacheLength:50,createPseudo:r,match:fe,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(_e,ke),t[3]=(t[4]||t[5]||"").replace(_e,ke),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||s.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&s.error(t[0]),t},PSEUDO:function(t){var e,n=!t[5]&&t[2];return fe.CHILD.test(t[0])?null:(t[4]?t[2]=t[4]:n&&de.test(n)&&(e=h(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){return"*"===t?function(){return!0}:(t=t.replace(_e,ke).toLowerCase(),function(e){return e.nodeName&&e.nodeName.toLowerCase()===t})},CLASS:function(t){var e=W[t+" "];return e||(e=RegExp("(^|"+ne+")"+t+"("+ne+"|$)"))&&W(t,function(t){return e.test(t.className||typeof t.getAttribute!==Y&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(i){var r=s.attr(i,t);return null==r?"!="===e:e?(r+="","="===e?r===n:"!="===e?r!==n:"^="===e?n&&0===r.indexOf(n):"*="===e?n&&r.indexOf(n)>-1:"$="===e?n&&r.slice(-n.length)===n:"~="===e?(" "+r+" ").indexOf(n)>-1:"|="===e?r===n||r.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,n,i,r){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,l){var c,u,h,d,p,f,g=o!==s?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!l&&!a;if(m){if(o){for(;g;){for(h=e;h=h[g];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?m.firstChild:m.lastChild],s&&y){for(u=m[B]||(m[B]={}),c=u[t]||[],p=c[0]===R&&c[1],d=c[0]===R&&c[2],h=p&&m.childNodes[p];h=++p&&h&&h[g]||(d=p=0)||f.pop();)if(1===h.nodeType&&++d&&h===e){u[t]=[R,p,d];break}}else if(y&&(c=(e[B]||(e[B]={}))[t])&&c[0]===R)d=c[1];else for(;(h=++p&&h&&h[g]||(d=p=0)||f.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++d||(y&&((h[B]||(h[B]={}))[t]=[R,d]),h!==e)););return d-=r,d===i||0===d%i&&d/i>=0}}},PSEUDO:function(t,e){var n,i=C.pseudos[t]||C.setFilters[t.toLowerCase()]||s.error("unsupported pseudo: "+t);return i[B]?i(e):i.length>1?(n=[t,t,"",e],C.setFilters.hasOwnProperty(t.toLowerCase())?r(function(t,n){for(var r,o=i(t,e),s=o.length;s--;)r=ee.call(t,o[s]),t[r]=!(n[r]=o[s])}):function(t){return i(t,0,n)}):i}},pseudos:{not:r(function(t){var e=[],n=[],i=T(t.replace(ce,"$1"));return i[B]?r(function(t,e,n,r){for(var o,s=i(t,null,r,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))}):function(t,r,o){return e[0]=t,i(e,null,o,n),!n.pop()}}),has:r(function(t){return function(e){return s(t,e).length>0}}),contains:r(function(t){return function(e){return(e.textContent||e.innerText||S(e)).indexOf(t)>-1}}),lang:r(function(t){return pe.test(t||"")||s.error("unsupported lang: "+t),t=t.replace(_e,ke).toLowerCase(),function(e){var n;do if(n=N?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===I},focus:function(t){return t===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeName>"@"||3===t.nodeType||4===t.nodeType)return!1;return!0},parent:function(t){return!C.pseudos.empty(t)},header:function(t){return be.test(t.nodeName)},input:function(t){return ye.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||e.toLowerCase()===t.type)},first:u(function(){return[0]}),last:u(function(t,e){return[e-1]}),eq:u(function(t,e,n){return[0>n?n+e:n]}),even:u(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:u(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:u(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:u(function(t,e,n){for(var i=0>n?n+e:n;e>++i;)t.push(i);return t})}};for(_ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[_]=l(_);for(_ in{submit:!0,reset:!0})C.pseudos[_]=c(_);T=s.compile=function(t,e){var n,i=[],r=[],o=q[t+" "];if(!o){for(e||(e=h(t)),n=e.length;n--;)o=v(e[n]),o[B]?i.push(o):r.push(o);o=q(t,y(r,i))}return o},C.pseudos.nth=C.pseudos.eq,x.prototype=C.filters=C.pseudos,C.setFilters=new x,z.sortStable=B.split("").sort(X).join("")===B,L(),[0,0].sort(X),z.detectDuplicates=U,s.attr=oe.attr,oe.find=s,oe.expr=s.selectors,oe.expr[":"]=oe.expr.pseudos,oe.unique=s.uniqueSort,oe.text=s.getText,oe.isXMLDoc=s.isXML,oe.contains=s.contains}(t);var Le=/Until$/,Ae=/^(?:parents|prev(?:Until|All))/,Ie=/^.[^:#\[\.,]*$/,Ne=oe.expr.match.needsContext,Pe={children:!0,contents:!0,next:!0,prev:!0};oe.fn.extend({find:function(t){var e,n,i,r=this.length;if("string"!=typeof t)return e=this,this.pushStack(oe(t).filter(function(){for(i=0;r>i;i++)if(oe.contains(e[i],this))return!0}));for(n=[],i=0;r>i;i++)oe.find(t,this[i],n);return n=this.pushStack(r>1?oe.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+t,n},has:function(t){var e=oe(t,this),n=e.length;return this.filter(function(){for(var t=0;n>t;t++)if(oe.contains(this,e[t]))return!0})},not:function(t){return this.pushStack(u(this,t,!1))},filter:function(t){return this.pushStack(u(this,t,!0))},is:function(t){return!!t&&("string"==typeof t?Ne.test(t)?oe(t,this.context).index(this[0])>=0:oe.filter(t,this).length>0:this.filter(t).length>0)},closest:function(t,e){for(var n,i=0,r=this.length,o=[],s=Ne.test(t)||"string"!=typeof t?oe(t,e||this.context):0;r>i;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(11>n.nodeType&&(s?s.index(n)>-1:1===n.nodeType&&oe.find.matchesSelector(n,t))){n=o.push(n);break}return this.pushStack(o.length>1?oe.unique(o):o)},index:function(t){return t?"string"==typeof t?ee.call(oe(t),this[0]):ee.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){var n="string"==typeof t?oe(t,e):oe.makeArray(t&&t.nodeType?[t]:t),i=oe.merge(this.get(),n);return this.pushStack(oe.unique(i))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),oe.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return oe.dir(t,"parentNode")},parentsUntil:function(t,e,n){return oe.dir(t,"parentNode",n)},next:function(t){return c(t,"nextSibling")},prev:function(t){return c(t,"previousSibling")},nextAll:function(t){return oe.dir(t,"nextSibling")},prevAll:function(t){return oe.dir(t,"previousSibling")},nextUntil:function(t,e,n){return oe.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return oe.dir(t,"previousSibling",n)},siblings:function(t){return oe.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return oe.sibling(t.firstChild)},contents:function(t){return oe.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:oe.merge([],t.childNodes)}},function(t,e){oe.fn[t]=function(n,i){var r=oe.map(this,e,n);return Le.test(t)||(i=n),i&&"string"==typeof i&&(r=oe.filter(i,r)),this.length>1&&(Pe[t]||oe.unique(r),Ae.test(t)&&r.reverse()),this.pushStack(r)}}),oe.extend({filter:function(t,e,n){return n&&(t=":not("+t+")"),1===e.length?oe.find.matchesSelector(e[0],t)?[e[0]]:[]:oe.find.matches(t,e)},dir:function(t,n,i){for(var r=[],o=i!==e;(t=t[n])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&oe(t).is(i))break;r.push(t)}return r},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}});var De=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,He=/<([\w:]+)/,Oe=/<|&#?\w+;/,Be=/<(?:script|style|link)/i,je=/^(?:checkbox|radio)$/i,ze=/checked\s*(?:[^=]|=\s*.checked.)/i,Re=/^$|\/(?:java|ecma)script/i,Fe=/^true\/(.*)/,We=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ve={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ve.optgroup=Ve.option,Ve.tbody=Ve.tfoot=Ve.colgroup=Ve.caption=Ve.col=Ve.thead,Ve.th=Ve.td,oe.fn.extend({text:function(t){return oe.access(this,function(t){return t===e?oe.text(this):this.empty().append((this[0]&&this[0].ownerDocument||q).createTextNode(t))},null,t,arguments.length)},wrapAll:function(t){var e;return oe.isFunction(t)?this.each(function(e){oe(this).wrapAll(t.call(this,e))}):(this[0]&&(e=oe(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return oe.isFunction(t)?this.each(function(e){oe(this).wrapInner(t.call(this,e))}):this.each(function(){var e=oe(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=oe.isFunction(t);return this.each(function(n){oe(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){oe.nodeName(this,"body")||oe(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(t){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(t)})},prepend:function(){return this.domManip(arguments,!0,function(t){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(t,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,!1,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=0,r=this.length;r>i;i++)n=this[i],(!t||oe.filter(t,[n]).length>0)&&(e||1!==n.nodeType||oe.cleanData(m(n)),n.parentNode&&(e&&oe.contains(n.ownerDocument,n)&&f(m(n,"script")),n.parentNode.removeChild(n)));return this},empty:function(){for(var t,e=0,n=this.length;n>e;e++)t=this[e],1===t.nodeType&&(oe.cleanData(m(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return oe.clone(this,t,e)})},html:function(t){return oe.access(this,function(t){var n=this[0]||{},i=0,r=this.length;if(t===e&&1===n.nodeType)return n.innerHTML;if("string"==typeof t&&!Be.test(t)&&!Ve[(He.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(De,"<$1></$2>");try{for(;r>i;i++)n=this[i]||{},1===n.nodeType&&(oe.cleanData(m(n,!1)),n.innerHTML=t);n=0}catch(o){}}n&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(t){var e=oe.isFunction(t);return e||"string"==typeof t||(t=oe(t).not(this).detach()),""!==t?this.domManip([t],!0,function(t){var e=this.nextSibling,n=this.parentNode;n&&(oe(this).remove(),n.insertBefore(t,e))}):this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,n,i){t=Z.apply([],t);var r,o,s,a,l,c,u=0,f=this.length,g=this,v=f-1,y=t[0],b=oe.isFunction(y);if(b||!(1>=f||"string"!=typeof y||oe.support.checkClone)&&ze.test(y))return this.each(function(r){var o=g.eq(r);b&&(t[0]=y.call(this,r,n?o.html():e)),o.domManip(t,n,i)});if(f&&(r=oe.buildFragment(t,this[0].ownerDocument,!1,this),o=r.firstChild,1===r.childNodes.length&&(r=o),o)){for(n=n&&oe.nodeName(o,"tr"),s=oe.map(m(r,"script"),d),a=s.length;f>u;u++)l=r,u!==v&&(l=oe.clone(l,!0,!0),a&&oe.merge(s,m(l,"script"))),i.call(n&&oe.nodeName(this[u],"table")?h(this[u],"tbody"):this[u],l,u);if(a)for(c=s[s.length-1].ownerDocument,oe.map(s,p),u=0;a>u;u++)l=s[u],Re.test(l.type||"")&&!me.access(l,"globalEval")&&oe.contains(c,l)&&(l.src?oe.ajax({url:l.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):oe.globalEval(l.textContent.replace(We,"")))}return this}}),oe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){oe.fn[t]=function(t){for(var n,i=[],r=oe(t),o=r.length-1,s=0;o>=s;s++)n=s===o?this:this.clone(!0),oe(r[s])[e](n),Q.apply(i,n.get());return this.pushStack(i)}}),oe.extend({clone:function(t,e,n){var i,r,o,s,a=t.cloneNode(!0),l=oe.contains(t.ownerDocument,t);if(!(oe.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||oe.isXMLDoc(t)))for(s=m(a),o=m(t),i=0,r=o.length;r>i;i++)v(o[i],s[i]);if(e)if(n)for(o=o||m(t),s=s||m(a),i=0,r=o.length;r>i;i++)g(o[i],s[i]);else g(t,a);return s=m(a,"script"),s.length>0&&f(s,!l&&m(t,"script")),a},buildFragment:function(t,e,n,i){for(var r,o,s,a,l,c,u=0,h=t.length,d=e.createDocumentFragment(),p=[];h>u;u++)if(r=t[u],r||0===r)if("object"===oe.type(r))oe.merge(p,r.nodeType?[r]:r);else if(Oe.test(r)){for(o=o||d.appendChild(e.createElement("div")),s=(He.exec(r)||["",""])[1].toLowerCase(),a=Ve[s]||Ve._default,o.innerHTML=a[1]+r.replace(De,"<$1></$2>")+a[2],c=a[0];c--;)o=o.firstChild;oe.merge(p,o.childNodes),o=d.firstChild,o.textContent=""}else p.push(e.createTextNode(r));for(d.textContent="",u=0;r=p[u++];)if((!i||-1===oe.inArray(r,i))&&(l=oe.contains(r.ownerDocument,r),o=m(d.appendChild(r),"script"),l&&f(o),n))for(c=0;r=o[c++];)Re.test(r.type||"")&&n.push(r);return d},cleanData:function(t,e){for(var n,i,r,s=t.length,a=0,l=oe.event.special;s>a;a++){if(i=t[a],(e||oe.acceptData(i))&&(n=me.access(i)))for(r in n.events)l[r]?oe.event.remove(i,r):oe.removeEvent(i,r,n.handle);o(i)}}});var qe,Ue,Xe=/^(none|table(?!-c[ea]).+)/,Ye=/^margin/,Ge=RegExp("^("+se+")(.*)$","i"),Je=RegExp("^("+se+")(?!px)[a-z%]+$","i"),Ke=RegExp("^([+-])=("+se+")","i"),Ze={BODY:"block"},Qe={position:"absolute",visibility:"hidden",display:"block"},tn={letterSpacing:0,fontWeight:400},en=["Top","Right","Bottom","Left"],nn=["Webkit","O","Moz","ms"];oe.fn.extend({css:function(t,n){return oe.access(this,function(t,n,i){var r,o,s={},a=0;if(oe.isArray(n)){for(r=w(t),o=n.length;o>a;a++)s[n[a]]=oe.css(t,n[a],!1,r);return s}return i!==e?oe.style(t,n,i):oe.css(t,n)},t,n,arguments.length>1)},show:function(){return x(this,!0)},hide:function(){return x(this)},toggle:function(t){var e="boolean"==typeof t;return this.each(function(){(e?t:b(this))?oe(this).show():oe(this).hide()})}}),oe.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=qe(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,n,i,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,s,a,l=oe.camelCase(n),c=t.style;return n=oe.cssProps[l]||(oe.cssProps[l]=y(c,l)),a=oe.cssHooks[n]||oe.cssHooks[l],i===e?a&&"get"in a&&(o=a.get(t,!1,r))!==e?o:c[n]:(s=typeof i,"string"===s&&(o=Ke.exec(i))&&(i=(o[1]+1)*o[2]+parseFloat(oe.css(t,n)),s="number"),null==i||"number"===s&&isNaN(i)||("number"!==s||oe.cssNumber[l]||(i+="px"),oe.support.clearCloneStyle||""!==i||0!==n.indexOf("background")||(c[n]="inherit"),a&&"set"in a&&(i=a.set(t,i,r))===e||(c[n]=i)),e)}},css:function(t,n,i,r){var o,s,a,l=oe.camelCase(n);return n=oe.cssProps[l]||(oe.cssProps[l]=y(t.style,l)),a=oe.cssHooks[n]||oe.cssHooks[l],a&&"get"in a&&(o=a.get(t,!0,i)),o===e&&(o=qe(t,n,r)),"normal"===o&&n in tn&&(o=tn[n]),""===i||i?(s=parseFloat(o),i===!0||oe.isNumeric(s)?s||0:o):o},swap:function(t,e,n,i){var r,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];r=n.apply(t,i||[]);for(o in e)t.style[o]=s[o];return r}}),qe=function(t,n,i){var r,o,s,a=i||w(t),l=a?a.getPropertyValue(n)||a[n]:e,c=t.style;return a&&(""!==l||oe.contains(t.ownerDocument,t)||(l=oe.style(t,n)),Je.test(l)&&Ye.test(n)&&(r=c.width,o=c.minWidth,s=c.maxWidth,c.minWidth=c.maxWidth=c.width=l,l=a.width,c.width=r,c.minWidth=o,c.maxWidth=s)),l},oe.each(["height","width"],function(t,n){oe.cssHooks[n]={get:function(t,i,r){return i?0===t.offsetWidth&&Xe.test(oe.css(t,"display"))?oe.swap(t,Qe,function(){return C(t,n,r)}):C(t,n,r):e},set:function(t,e,i){var r=i&&w(t);return _(t,e,i?k(t,n,i,oe.support.boxSizing&&"border-box"===oe.css(t,"boxSizing",!1,r),r):0)}}}),oe(function(){oe.support.reliableMarginRight||(oe.cssHooks.marginRight={get:function(t,n){return n?oe.swap(t,{display:"inline-block"},qe,[t,"marginRight"]):e}}),!oe.support.pixelPosition&&oe.fn.position&&oe.each(["top","left"],function(t,n){oe.cssHooks[n]={get:function(t,i){return i?(i=qe(t,n),Je.test(i)?oe(t).position()[n]+"px":i):e}}})}),oe.expr&&oe.expr.filters&&(oe.expr.filters.hidden=function(t){return 0>=t.offsetWidth&&0>=t.offsetHeight},oe.expr.filters.visible=function(t){return!oe.expr.filters.hidden(t)}),oe.each({margin:"",padding:"",border:"Width"},function(t,e){oe.cssHooks[t+e]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[t+en[i]+e]=o[i]||o[i-2]||o[0];return r}},Ye.test(t)||(oe.cssHooks[t+e].set=_)});var rn=/%20/g,on=/\[\]$/,sn=/\r?\n/g,an=/^(?:submit|button|image|reset|file)$/i,ln=/^(?:input|select|textarea|keygen)/i;oe.fn.extend({serialize:function(){return oe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=oe.prop(this,"elements");return t?oe.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!oe(this).is(":disabled")&&ln.test(this.nodeName)&&!an.test(t)&&(this.checked||!je.test(t))}).map(function(t,e){var n=oe(this).val();return null==n?null:oe.isArray(n)?oe.map(n,function(t){return{name:e.name,value:t.replace(sn,"\r\n")}}):{name:e.name,value:n.replace(sn,"\r\n")}}).get()}}),oe.param=function(t,n){var i,r=[],o=function(t,e){e=oe.isFunction(e)?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(n===e&&(n=oe.ajaxSettings&&oe.ajaxSettings.traditional),oe.isArray(t)||t.jquery&&!oe.isPlainObject(t))oe.each(t,function(){o(this.name,this.value)});else for(i in t)T(i,t[i],n,o);return r.join("&").replace(rn,"+")},oe.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){oe.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),oe.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var cn,un,hn=oe.now(),dn=/\?/,pn=/#.*$/,fn=/([?&])_=[^&]*/,gn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,mn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,vn=/^(?:GET|HEAD)$/,yn=/^\/\//,bn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,wn=oe.fn.load,xn={},_n={},kn="*/".concat("*");try{un=V.href}catch(Cn){un=q.createElement("a"),un.href="",un=un.href}cn=bn.exec(un.toLowerCase())||[],oe.fn.load=function(t,n,i){if("string"!=typeof t&&wn)return wn.apply(this,arguments);var r,o,s,a=this,l=t.indexOf(" ");return l>=0&&(r=t.slice(l),t=t.slice(0,l)),oe.isFunction(n)?(i=n,n=e):n&&"object"==typeof n&&(o="POST"),a.length>0&&oe.ajax({url:t,type:o,dataType:"html",data:n}).done(function(t){s=arguments,a.html(r?oe("<div>").append(oe.parseHTML(t)).find(r):t)}).complete(i&&function(t,e){a.each(i,s||[t.responseText,e,t])}),this},oe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){oe.fn[e]=function(t){return this.on(e,t)}}),oe.each(["get","post"],function(t,n){oe[n]=function(t,i,r,o){return oe.isFunction(i)&&(o=o||r,r=i,i=e),oe.ajax({url:t,type:n,dataType:o,data:i,success:r})}}),oe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:un,type:"GET",isLocal:mn.test(cn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":kn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":oe.parseJSON,"text xml":oe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?L(L(t,oe.ajaxSettings),e):L(oe.ajaxSettings,t)},ajaxPrefilter:M(xn),ajaxTransport:M(_n),ajax:function(t,n){function i(t,n,i,a){var c,h,y,b,x,k=n;2!==w&&(w=2,l&&clearTimeout(l),r=e,s=a||"",_.readyState=t>0?4:0,c=t>=200&&300>t||304===t,i&&(b=A(d,_,i)),b=I(d,b,_,c),c?(d.ifModified&&(x=_.getResponseHeader("Last-Modified"),x&&(oe.lastModified[o]=x),x=_.getResponseHeader("etag"),x&&(oe.etag[o]=x)),204===t?k="nocontent":304===t?k="notmodified":(k=b.state,h=b.data,y=b.error,c=!y)):(y=k,(t||!k)&&(k="error",0>t&&(t=0))),_.status=t,_.statusText=(n||k)+"",c?g.resolveWith(p,[h,k,_]):g.rejectWith(p,[_,k,y]),_.statusCode(v),v=e,u&&f.trigger(c?"ajaxSuccess":"ajaxError",[_,d,c?h:y]),m.fireWith(p,[_,k]),u&&(f.trigger("ajaxComplete",[_,d]),--oe.active||oe.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=e),n=n||{};var r,o,s,a,l,c,u,h,d=oe.ajaxSetup({},n),p=d.context||d,f=d.context&&(p.nodeType||p.jquery)?oe(p):oe.event,g=oe.Deferred(),m=oe.Callbacks("once memory"),v=d.statusCode||{},y={},b={},w=0,x="canceled",_={readyState:0,getResponseHeader:function(t){var e;if(2===w){if(!a)for(a={};e=gn.exec(s);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===w?s:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return w||(t=b[n]=b[n]||t,y[t]=e),this},overrideMimeType:function(t){return w||(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>w)for(e in t)v[e]=[v[e],t[e]];else _.always(t[_.status]);return this},abort:function(t){var e=t||x;return r&&r.abort(e),i(0,e),this}};if(g.promise(_).complete=m.add,_.success=_.done,_.error=_.fail,d.url=((t||d.url||un)+"").replace(pn,"").replace(yn,cn[1]+"//"),d.type=n.method||n.type||d.method||d.type,d.dataTypes=oe.trim(d.dataType||"*").toLowerCase().match(ae)||[""],null==d.crossDomain&&(c=bn.exec(d.url.toLowerCase()),d.crossDomain=!(!c||c[1]===cn[1]&&c[2]===cn[2]&&(c[3]||("http:"===c[1]?80:443))==(cn[3]||("http:"===cn[1]?80:443)))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=oe.param(d.data,d.traditional)),E(xn,d,n,_),2===w)return _;u=d.global,u&&0===oe.active++&&oe.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!vn.test(d.type),o=d.url,d.hasContent||(d.data&&(o=d.url+=(dn.test(o)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=fn.test(o)?o.replace(fn,"$1_="+hn++):o+(dn.test(o)?"&":"?")+"_="+hn++)),d.ifModified&&(oe.lastModified[o]&&_.setRequestHeader("If-Modified-Since",oe.lastModified[o]),oe.etag[o]&&_.setRequestHeader("If-None-Match",oe.etag[o])),(d.data&&d.hasContent&&d.contentType!==!1||n.contentType)&&_.setRequestHeader("Content-Type",d.contentType),_.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+kn+"; q=0.01":""):d.accepts["*"]);for(h in d.headers)_.setRequestHeader(h,d.headers[h]);if(d.beforeSend&&(d.beforeSend.call(p,_,d)===!1||2===w))return _.abort();x="abort";for(h in{success:1,error:1,complete:1})_[h](d[h]);if(r=E(_n,d,n,_)){_.readyState=1,u&&f.trigger("ajaxSend",[_,d]),d.async&&d.timeout>0&&(l=setTimeout(function(){_.abort("timeout")},d.timeout));try{w=1,r.send(y,i)}catch(k){if(!(2>w))throw k;i(-1,k)}}else i(-1,"No Transport");return _},getScript:function(t,n){return oe.get(t,e,n,"script")},getJSON:function(t,e,n){return oe.get(t,e,n,"json")}}),oe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return oe.globalEval(t),t}}}),oe.ajaxPrefilter("script",function(t){t.cache===e&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),oe.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(i,r){e=oe("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),q.head.appendChild(e[0])},abort:function(){n&&n()}}}});var Sn=[],$n=/(=)\?(?=&|$)|\?\?/;oe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Sn.pop()||oe.expando+"_"+hn++;return this[t]=!0,t}}),oe.ajaxPrefilter("json jsonp",function(n,i,r){var o,s,a,l=n.jsonp!==!1&&($n.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&$n.test(n.data)&&"data");return l||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=oe.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,l?n[l]=n[l].replace($n,"$1"+o):n.jsonp!==!1&&(n.url+=(dn.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return a||oe.error(o+" was not called"),a[0]},n.dataTypes[0]="json",s=t[o],t[o]=function(){a=arguments},r.always(function(){t[o]=s,n[o]&&(n.jsonpCallback=i.jsonpCallback,Sn.push(o)),a&&oe.isFunction(s)&&s(a[0]),a=s=e}),"script"):e}),oe.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Tn=oe.ajaxSettings.xhr(),Mn={0:200,1223:204},En=0,Ln={};t.ActiveXObject&&oe(t).on("unload",function(){for(var t in Ln)Ln[t]();Ln=e}),oe.support.cors=!!Tn&&"withCredentials"in Tn,oe.support.ajax=Tn=!!Tn,oe.ajaxTransport(function(t){var n;return oe.support.cors||Tn&&!t.crossDomain?{send:function(i,r){var o,s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)a[o]=t.xhrFields[o];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(o in i)a.setRequestHeader(o,i[o]);n=function(t){return function(){n&&(delete Ln[s],n=a.onload=a.onerror=null,"abort"===t?a.abort():"error"===t?r(a.status||404,a.statusText):r(Mn[a.status]||a.status,a.statusText,"string"==typeof a.responseText?{text:a.responseText}:e,a.getAllResponseHeaders()))}},a.onload=n(),a.onerror=n("error"),n=Ln[s=En++]=n("abort"),a.send(t.hasContent&&t.data||null)},abort:function(){n&&n()}}:e});var An,In,Nn=/^(?:toggle|show|hide)$/,Pn=RegExp("^(?:([+-])=|)("+se+")([a-z%]*)$","i"),Dn=/queueHooks$/,Hn=[O],On={"*":[function(t,e){var n,i,r=this.createTween(t,e),o=Pn.exec(e),s=r.cur(),a=+s||0,l=1,c=20;if(o){if(n=+o[2],i=o[3]||(oe.cssNumber[t]?"":"px"),"px"!==i&&a){a=oe.css(r.elem,t,!0)||n||1;do l=l||".5",a/=l,oe.style(r.elem,t,a+i);while(l!==(l=r.cur()/s)&&1!==l&&--c)}r.unit=i,r.start=a,r.end=o[1]?a+(o[1]+1)*n:n}return r}]};oe.Animation=oe.extend(D,{tweener:function(t,e){oe.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,r=t.length;r>i;i++)n=t[i],On[n]=On[n]||[],On[n].unshift(e)},prefilter:function(t,e){e?Hn.unshift(t):Hn.push(t)}}),oe.Tween=B,B.prototype={constructor:B,init:function(t,e,n,i,r,o){this.elem=t,this.prop=n,this.easing=r||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(oe.cssNumber[n]?"":"px")},cur:function(){var t=B.propHooks[this.prop];return t&&t.get?t.get(this):B.propHooks._default.get(this)},run:function(t){var e,n=B.propHooks[this.prop];return this.pos=e=this.options.duration?oe.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):B.propHooks._default.set(this),this}},B.prototype.init.prototype=B.prototype,B.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=oe.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){oe.fx.step[t.prop]?oe.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[oe.cssProps[t.prop]]||oe.cssHooks[t.prop])?oe.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},B.propHooks.scrollTop=B.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},oe.each(["toggle","show","hide"],function(t,e){var n=oe.fn[e];oe.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(j(e,!0),t,i,r)}}),oe.fn.extend({fadeTo:function(t,e,n,i){return this.filter(b).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=oe.isEmptyObject(t),o=oe.speed(e,n,i),s=function(){var e=D(this,oe.extend({},t),o);s.finish=function(){e.stop(!0)},(r||oe._data(this,"finish"))&&e.stop(!0)};return s.finish=s,r||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(t,n,i){var r=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=n,n=t,t=e),n&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,n=null!=t&&t+"queueHooks",o=oe.timers,s=oe._data(this);if(n)s[n]&&s[n].stop&&r(s[n]);else for(n in s)s[n]&&s[n].stop&&Dn.test(n)&&r(s[n]);for(n=o.length;n--;)o[n].elem!==this||null!=t&&o[n].queue!==t||(o[n].anim.stop(i),e=!1,o.splice(n,1));(e||!i)&&oe.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=oe._data(this),i=n[t+"queue"],r=n[t+"queueHooks"],o=oe.timers,s=i?i.length:0;for(n.finish=!0,oe.queue(this,t,[]),r&&r.cur&&r.cur.finish&&r.cur.finish.call(this),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;s>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),oe.each({slideDown:j("show"),slideUp:j("hide"),slideToggle:j("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){oe.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),oe.speed=function(t,e,n){var i=t&&"object"==typeof t?oe.extend({},t):{complete:n||!n&&e||oe.isFunction(t)&&t,duration:t,easing:n&&e||e&&!oe.isFunction(e)&&e};return i.duration=oe.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in oe.fx.speeds?oe.fx.speeds[i.duration]:oe.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){oe.isFunction(i.old)&&i.old.call(this),i.queue&&oe.dequeue(this,i.queue)},i},oe.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},oe.timers=[],oe.fx=B.prototype.init,oe.fx.tick=function(){var t,n=oe.timers,i=0;for(An=oe.now();n.length>i;i++)t=n[i],t()||n[i]!==t||n.splice(i--,1);n.length||oe.fx.stop(),An=e},oe.fx.timer=function(t){t()&&oe.timers.push(t)&&oe.fx.start()},oe.fx.interval=13,oe.fx.start=function(){In||(In=setInterval(oe.fx.tick,oe.fx.interval))},oe.fx.stop=function(){clearInterval(In),In=null},oe.fx.speeds={slow:600,fast:200,_default:400},oe.fx.step={},oe.expr&&oe.expr.filters&&(oe.expr.filters.animated=function(t){return oe.grep(oe.timers,function(e){return t===e.elem}).length}),oe.fn.offset=function(t){if(arguments.length)return t===e?this:this.each(function(e){oe.offset.setOffset(this,t,e)});var n,i,r=this[0],o={top:0,left:0},s=r&&r.ownerDocument;if(s)return n=s.documentElement,oe.contains(n,r)?(typeof r.getBoundingClientRect!==W&&(o=r.getBoundingClientRect()),i=z(s),{top:o.top+i.pageYOffset-n.clientTop,left:o.left+i.pageXOffset-n.clientLeft}):o},oe.offset={setOffset:function(t,e,n){var i,r,o,s,a,l,c,u=oe.css(t,"position"),h=oe(t),d={};
"static"===u&&(t.style.position="relative"),a=h.offset(),o=oe.css(t,"top"),l=oe.css(t,"left"),c=("absolute"===u||"fixed"===u)&&(o+l).indexOf("auto")>-1,c?(i=h.position(),s=i.top,r=i.left):(s=parseFloat(o)||0,r=parseFloat(l)||0),oe.isFunction(e)&&(e=e.call(t,n,a)),null!=e.top&&(d.top=e.top-a.top+s),null!=e.left&&(d.left=e.left-a.left+r),"using"in e?e.using.call(t,d):h.css(d)}},oe.fn.extend({position:function(){if(this[0]){var t,e,n=this[0],i={top:0,left:0};return"fixed"===oe.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),oe.nodeName(t[0],"html")||(i=t.offset()),i.top+=oe.css(t[0],"borderTopWidth",!0),i.left+=oe.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-oe.css(n,"marginTop",!0),left:e.left-i.left-oe.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||U;t&&!oe.nodeName(t,"html")&&"static"===oe.css(t,"position");)t=t.offsetParent;return t||U})}}),oe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,i){var r="pageYOffset"===i;oe.fn[n]=function(o){return oe.access(this,function(n,o,s){var a=z(n);return s===e?a?a[i]:n[o]:(a?a.scrollTo(r?t.pageXOffset:s,r?s:t.pageYOffset):n[o]=s,e)},n,o,arguments.length,null)}}),oe.each({Height:"height",Width:"width"},function(t,n){oe.each({padding:"inner"+t,content:n,"":"outer"+t},function(i,r){oe.fn[r]=function(r,o){var s=arguments.length&&(i||"boolean"!=typeof r),a=i||(r===!0||o===!0?"margin":"border");return oe.access(this,function(n,i,r){var o;return oe.isWindow(n)?n.document.documentElement["client"+t]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+t],o["scroll"+t],n.body["offset"+t],o["offset"+t],o["client"+t])):r===e?oe.css(n,i,a):oe.style(n,i,r,a)},n,s?r:e,s,null)}})}),oe.fn.andSelf=oe.fn.addBack,"object"==typeof module&&"object"==typeof module.exports?module.exports=oe:(t.jQuery=t.$=oe,"function"==typeof define&&define.amd&&define("jquery",[],function(){return oe}))}(this),function(t,e,n){function i(t,e,n){for(var i=[],r=0;t.length>r;r++){var o=tinycolor(t[r]),s=.5>o.toHsl().l?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";s+=tinycolor.equals(e,t[r])?" sp-thumb-active":"";var a=m?"background-color:"+o.toRgbString():"filter:"+o.toFilter();i.push('<span title="'+o.toRgbString()+'" data-color="'+o.toRgbString()+'" class="'+s+'"><span class="sp-thumb-inner" style="'+a+';" /></span>')}return"<div class='sp-cf "+n+"'>"+i.join("")+"</div>"}function r(){for(var t=0;f.length>t;t++)f[t]&&f[t].hide()}function o(t,n){var i=e.extend({},p,t);return i.callbacks={move:u(i.move,n),change:u(i.change,n),show:u(i.show,n),hide:u(i.hide,n),beforeShow:u(i.beforeShow,n)},i}function s(s,l){function u(){me.toggleClass("sp-flat",W),me.toggleClass("sp-input-disabled",!F.showInput),me.toggleClass("sp-alpha-enabled",F.showAlpha),me.toggleClass("sp-buttons-disabled",!F.showButtons||W),me.toggleClass("sp-palette-disabled",!F.showPalette),me.toggleClass("sp-palette-only",F.showPaletteOnly),me.toggleClass("sp-initial-disabled",!F.showInitial),me.addClass(F.className),O()}function p(){function n(t){return t.data&&t.data.ignore?(L(e(this).data("color")),N()):(L(e(this).data("color")),H(!0),N(),M()),!1}if(g&&me.find("*:not(input)").attr("unselectable","on"),u(),Le&&fe.after(Ae).hide(),W)fe.after(me).hide();else{var i="parent"===F.appendTo?fe.parent():e(F.appendTo);1!==i.length&&(i=e("body")),i.append(me)}if(q&&t.localStorage){try{var r=t.localStorage[q].split(",#");r.length>1&&(delete t.localStorage[q],e.each(r,function(t,e){b(e)}))}catch(o){}try{ue=t.localStorage[q].split(";")}catch(o){}}Ie.bind("click.spectrum touchstart.spectrum",function(t){ge||$(),t.stopPropagation(),e(t.target).is("input")||t.preventDefault()}),(fe.is(":disabled")||F.disabled===!0)&&R(),me.click(c),Ce.change(S),Ce.bind("paste",function(){setTimeout(S,1)}),Ce.keydown(function(t){13==t.keyCode&&S()}),Te.text(F.cancelText),Te.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),M("cancel")}),Me.text(F.chooseText),Me.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),I()&&(H(!0),M())}),h(_e,function(t,e,n){ae=t/ee,n.shiftKey&&(ae=Math.round(10*ae)/10),N()}),h(be,function(t,e){re=parseFloat(e/Q),N()},k,C),h(ve,function(t,e){oe=parseFloat(t/J),se=parseFloat((K-e)/K),N()},k,C),Pe?(L(Pe),P(),Oe=He||tinycolor(Pe).format,b(Pe)):P(),W&&T();var s=g?"mousedown.spectrum":"click.spectrum touchstart.spectrum";Se.delegate(".sp-thumb-el",s,n),$e.delegate(".sp-thumb-el:nth-child(1)",s,{ignore:!0},n)}function b(n){if(V){var i=tinycolor(n).toRgbString();if(-1===e.inArray(i,ue))for(ue.push(i);ue.length>he;)ue.shift();if(q&&t.localStorage)try{t.localStorage[q]=ue.join(";")}catch(r){}}}function w(){var t,e=[],n=ue,i={};if(F.showPalette){for(var r=0;ce.length>r;r++)for(var o=0;ce[r].length>o;o++)t=tinycolor(ce[r][o]).toRgbString(),i[t]=!0;for(r=0;n.length>r;r++)t=tinycolor(n[r]).toRgbString(),i.hasOwnProperty(t)||(e.push(n[r]),i[t]=!0)}return e.reverse().slice(0,F.maxSelectionSize)}function x(){var t=A(),n=e.map(ce,function(e,n){return i(e,t,"sp-palette-row sp-palette-row-"+n)});ue&&n.push(i(w(),t,"sp-palette-row sp-palette-row-selection")),Se.html(n.join(""))}function _(){if(F.showInitial){var t=De,e=A();$e.html(i([t,e],e,"sp-palette-row-initial"))}}function k(){(0>=K||0>=J||0>=Q)&&O(),me.addClass(de)}function C(){me.removeClass(de)}function S(){var t=tinycolor(Ce.val());t.ok?L(t):Ce.addClass("sp-validation-error")}function $(){G?M():T()}function T(){var i=e.Event("beforeShow.spectrum");return G?(O(),n):(fe.trigger(i,[A()]),X.beforeShow(A())===!1||i.isDefaultPrevented()||(r(),G=!0,e(pe).bind("click.spectrum",M),e(t).bind("resize.spectrum",Y),Ae.addClass("sp-active"),me.removeClass("sp-hidden"),F.showPalette&&x(),O(),P(),De=A(),_(),X.show(De),fe.trigger("show.spectrum",[De])),n)}function M(n){if((!n||"click"!=n.type||2!=n.button)&&G&&!W){G=!1,e(pe).unbind("click.spectrum",M),e(t).unbind("resize.spectrum",Y),Ae.removeClass("sp-active"),me.addClass("sp-hidden");var i=!tinycolor.equals(A(),De);i&&(Be&&"cancel"!==n?H(!0):E()),X.hide(A()),fe.trigger("hide.spectrum",[A()])}}function E(){L(De,!0)}function L(t,e){if(!tinycolor.equals(t,A())){var n=tinycolor(t),i=n.toHsv();re=i.h,oe=i.s,se=i.v,ae=i.a,P(),n.ok&&!e&&(Oe=He||n.format)}}function A(t){return t=t||{},tinycolor.fromRatio({h:re,s:oe,v:se,a:Math.round(100*ae)/100},{format:t.format||Oe})}function I(){return!Ce.hasClass("sp-validation-error")}function N(){P(),X.move(A()),fe.trigger("move.spectrum",[A()])}function P(){Ce.removeClass("sp-validation-error"),D();var t=tinycolor.fromRatio({h:re,s:1,v:1});ve.css("background-color",t.toHexString());var e=Oe;1>ae&&("hex"===e||"hex3"===e||"hex6"===e||"name"===e)&&(e="rgb");var n=A({format:e}),i=n.toHexString(),r=n.toRgbString();if(m||1===n.alpha?Ne.css("background-color",r):(Ne.css("background-color","transparent"),Ne.css("filter",n.toFilter())),F.showAlpha){var o=n.toRgb();o.a=0;var s=tinycolor(o).toRgbString(),a="linear-gradient(left, "+s+", "+i+")";g?xe.css("filter",tinycolor(s).toFilter({gradientType:1},i)):(xe.css("background","-webkit-"+a),xe.css("background","-moz-"+a),xe.css("background","-ms-"+a),xe.css("background",a))}F.showInput&&Ce.val(n.toString(e)),F.showPalette&&x(),_()}function D(){var t=oe,e=se,n=t*J,i=K-e*K;n=Math.max(-Z,Math.min(J-Z,n-Z)),i=Math.max(-Z,Math.min(K-Z,i-Z)),ye.css({top:i,left:n});var r=ae*ee;ke.css({left:r-ne/2});var o=re*Q;we.css({top:o-ie})}function H(t){var e=A();Ee&&fe.val(e.toString(Oe)).change();var n=!tinycolor.equals(e,De);De=e,b(e),t&&n&&(X.change(e),fe.trigger("change.spectrum",[e]))}function O(){J=ve.width(),K=ve.height(),Z=ye.height(),te=be.width(),Q=be.height(),ie=we.height(),ee=_e.width(),ne=ke.width(),W||(me.css("position","absolute"),me.offset(a(me,Ie))),D()}function B(){fe.show(),Ie.unbind("click.spectrum touchstart.spectrum"),me.remove(),Ae.remove(),f[je.id]=null}function j(t,i){return t===n?e.extend({},F):i===n?F[t]:(F[t]=i,u(),n)}function z(){ge=!1,fe.attr("disabled",!1),Ie.removeClass("sp-disabled")}function R(){M(),ge=!0,fe.attr("disabled",!0),Ie.addClass("sp-disabled")}var F=o(l,s),W=F.flat,V=F.showSelectionPalette,q=F.localStorageKey,U=F.theme,X=F.callbacks,Y=d(O,10),G=!1,J=0,K=0,Z=0,Q=0,te=0,ee=0,ne=0,ie=0,re=0,oe=0,se=0,ae=1,le=F.palette.slice(0),ce=e.isArray(le[0])?le:[le],ue=F.selectionPalette.slice(0),he=F.maxSelectionSize,de="sp-dragging",pe=s.ownerDocument,fe=(pe.body,e(s)),ge=!1,me=e(y,pe).addClass(U),ve=me.find(".sp-color"),ye=me.find(".sp-dragger"),be=me.find(".sp-hue"),we=me.find(".sp-slider"),xe=me.find(".sp-alpha-inner"),_e=me.find(".sp-alpha"),ke=me.find(".sp-alpha-handle"),Ce=me.find(".sp-input"),Se=me.find(".sp-palette"),$e=me.find(".sp-initial"),Te=me.find(".sp-cancel"),Me=me.find(".sp-choose"),Ee=fe.is("input"),Le=Ee&&!W,Ae=Le?e(v).addClass(U).addClass(F.className):e([]),Ie=Le?Ae:fe,Ne=Ae.find(".sp-preview-inner"),Pe=F.color||Ee&&fe.val(),De=!1,He=F.preferredFormat,Oe=He,Be=!F.showButtons||F.clickoutFiresChange;p();var je={show:T,hide:M,toggle:$,reflow:O,option:j,enable:z,disable:R,set:function(t){L(t),H()},get:A,destroy:B,container:me};return je.id=f.push(je)-1,je}function a(t,n){var i=0,r=t.outerWidth(),o=t.outerHeight(),s=n.outerHeight(),a=t[0].ownerDocument,l=a.documentElement,c=l.clientWidth+e(a).scrollLeft(),u=l.clientHeight+e(a).scrollTop(),h=n.offset();return h.top+=s,h.left-=Math.min(h.left,h.left+r>c&&c>r?Math.abs(h.left+r-c):0),h.top-=Math.min(h.top,h.top+o>u&&u>o?Math.abs(o+s-i):i),h}function l(){}function c(t){t.stopPropagation()}function u(t,e){var n=Array.prototype.slice,i=n.call(arguments,2);return function(){return t.apply(e,i.concat(n.call(arguments)))}}function h(n,i,r,o){function s(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.returnValue=!1}function a(t){if(h){if(g&&9>document.documentMode&&!t.button)return c();var e=t.originalEvent.touches,r=e?e[0].pageX:t.pageX,o=e?e[0].pageY:t.pageY,a=Math.max(0,Math.min(r-d.left,f)),l=Math.max(0,Math.min(o-d.top,p));m&&s(t),i.apply(n,[a,l,t])}}function l(t){var i=t.which?3==t.which:2==t.button;t.originalEvent.touches,i||h||r.apply(n,arguments)!==!1&&(h=!0,p=e(n).height(),f=e(n).width(),d=e(n).offset(),e(u).bind(v),e(u.body).addClass("sp-dragging"),m||a(t),s(t))}function c(){h&&(e(u).unbind(v),e(u.body).removeClass("sp-dragging"),o.apply(n,arguments)),h=!1}i=i||function(){},r=r||function(){},o=o||function(){};var u=n.ownerDocument||document,h=!1,d={},p=0,f=0,m="ontouchstart"in t,v={};v.selectstart=s,v.dragstart=s,v[m?"touchmove":"mousemove"]=a,v[m?"touchend":"mouseup"]=c,e(n).bind(m?"touchstart":"mousedown",l)}function d(t,e,n){var i;return function(){var r=this,o=arguments,s=function(){i=null,t.apply(r,o)};n&&clearTimeout(i),(n||!i)&&(i=setTimeout(s,e))}}var p={beforeShow:l,move:l,change:l,show:l,hide:l,color:!1,flat:!1,showInput:!1,showButtons:!0,clickoutFiresChange:!1,showInitial:!1,showPalette:!1,showPaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",preferredFormat:!1,className:"",showAlpha:!1,theme:"sp-light",palette:["fff","000"],selectionPalette:[],disabled:!1},f=[],g=!!/msie/i.exec(t.navigator.userAgent),m=function(){function t(t,e){return!!~(""+t).indexOf(e)}var e=document.createElement("div"),n=e.style;return n.cssText="background-color:rgba(0,0,0,.5)",t(n.backgroundColor,"rgba")||t(n.backgroundColor,"hsla")}(),v=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),y=function(){var t="";if(g)for(var e=1;6>=e;e++)t+="<div class='sp-"+e+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",t,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","</div>","</div>"].join("")}(),b=function(){};t.console&&(b=Function.prototype.bind?Function.prototype.bind.call(console.log,console):function(){Function.prototype.apply.call(console.log,console,arguments)});var w="spectrum.id";e.fn.spectrum=function(t){if("string"==typeof t){var n=this,i=Array.prototype.slice.call(arguments,1);return this.each(function(){var r=f[e(this).data(w)];if(r){var o=r[t];if(!o)throw Error("Spectrum: no such method: '"+t+"'");"get"==t?n=r.get():"container"==t?n=r.container:"option"==t?n=r.option.apply(r,i):"destroy"==t?(r.destroy(),e(this).removeData(w)):o.apply(r,i)}}),n}return this.spectrum("destroy").each(function(){var n=s(this,t);e(this).data(w,n.id)})},e.fn.spectrum.load=!0,e.fn.spectrum.loadOpts={},e.fn.spectrum.draggable=h,e.fn.spectrum.defaults=p,e.spectrum={},e.spectrum.localization={},e.spectrum.palettes={},e.fn.spectrum.processNativeColorInputs=function(){var t=e("<input type='color' value='!' />")[0],n="color"===t.type&&"!"!=t.value;n||e("input[type=color]").spectrum({preferredFormat:"hex6"})},function(t){function e(t,i){if(t=t?t:"",i=i||{},"object"==typeof t&&t.hasOwnProperty("_tc_id"))return t;var o=n(t),a=o.r,c=o.g,h=o.b,d=o.a,p=_(100*d)/100,f=i.format||o.format;return 1>a&&(a=_(a)),1>c&&(c=_(c)),1>h&&(h=_(h)),{ok:o.ok,format:f,_tc_id:w++,alpha:d,toHsv:function(){var t=s(a,c,h);return{h:360*t.h,s:t.s,v:t.v,a:d}},toHsvString:function(){var t=s(a,c,h),e=_(360*t.h),n=_(100*t.s),i=_(100*t.v);return 1==d?"hsv("+e+", "+n+"%, "+i+"%)":"hsva("+e+", "+n+"%, "+i+"%, "+p+")"},toHsl:function(){var t=r(a,c,h);return{h:360*t.h,s:t.s,l:t.l,a:d}},toHslString:function(){var t=r(a,c,h),e=_(360*t.h),n=_(100*t.s),i=_(100*t.l);return 1==d?"hsl("+e+", "+n+"%, "+i+"%)":"hsla("+e+", "+n+"%, "+i+"%, "+p+")"},toHex:function(t){return l(a,c,h,t)},toHexString:function(t){return"#"+l(a,c,h,t)},toRgb:function(){return{r:_(a),g:_(c),b:_(h),a:d}},toRgbString:function(){return 1==d?"rgb("+_(a)+", "+_(c)+", "+_(h)+")":"rgba("+_(a)+", "+_(c)+", "+_(h)+", "+p+")"},toPercentageRgb:function(){return{r:_(100*u(a,255))+"%",g:_(100*u(c,255))+"%",b:_(100*u(h,255))+"%",a:d}},toPercentageRgbString:function(){return 1==d?"rgb("+_(100*u(a,255))+"%, "+_(100*u(c,255))+"%, "+_(100*u(h,255))+"%)":"rgba("+_(100*u(a,255))+"%, "+_(100*u(c,255))+"%, "+_(100*u(h,255))+"%, "+p+")"},toName:function(){return T[l(a,c,h,!0)]||!1},toFilter:function(t){var n=l(a,c,h),r=n,o=Math.round(255*parseFloat(d)).toString(16),s=o,u=i&&i.gradientType?"GradientType = 1, ":"";if(t){var p=e(t);r=p.toHex(),s=Math.round(255*parseFloat(p.alpha)).toString(16)}return"progid:DXImageTransform.Microsoft.gradient("+u+"startColorstr=#"+g(o)+n+",endColorstr=#"+g(s)+r+")"},toString:function(t){t=t||this.format;var e=!1;return"rgb"===t&&(e=this.toRgbString()),"prgb"===t&&(e=this.toPercentageRgbString()),("hex"===t||"hex6"===t)&&(e=this.toHexString()),"hex3"===t&&(e=this.toHexString(!0)),"name"===t&&(e=this.toName()),"hsl"===t&&(e=this.toHslString()),"hsv"===t&&(e=this.toHsvString()),e||this.toHexString()}}}function n(t){var e={r:0,g:0,b:0},n=1,r=!1,s=!1;return"string"==typeof t&&(t=v(t)),"object"==typeof t&&(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b")?(e=i(t.r,t.g,t.b),r=!0,s="%"===(t.r+"").substr(-1)?"prgb":"rgb"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v")?(t.s=m(t.s),t.v=m(t.v),e=a(t.h,t.s,t.v),r=!0,s="hsv"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("l")&&(t.s=m(t.s),t.l=m(t.l),e=o(t.h,t.s,t.l),r=!0,s="hsl"),t.hasOwnProperty("a")&&(n=t.a)),n=parseFloat(n),(isNaN(n)||0>n||n>1)&&(n=1),{ok:r,format:t.format||s,r:k(255,C(e.r,0)),g:k(255,C(e.g,0)),b:k(255,C(e.b,0)),a:n}}function i(t,e,n){return{r:255*u(t,255),g:255*u(e,255),b:255*u(n,255)}}function r(t,e,n){t=u(t,255),e=u(e,255),n=u(n,255);var i,r,o=C(t,e,n),s=k(t,e,n),a=(o+s)/2;if(o==s)i=r=0;else{var l=o-s;switch(r=a>.5?l/(2-o-s):l/(o+s),o){case t:i=(e-n)/l+(n>e?6:0);break;case e:i=(n-t)/l+2;break;case n:i=(t-e)/l+4}i/=6}return{h:i,s:r,l:a}}function o(t,e,n){function i(t,e,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?t+6*(e-t)*n:.5>n?e:2/3>n?t+6*(e-t)*(2/3-n):t}var r,o,s;if(t=u(t,360),e=u(e,100),n=u(n,100),0===e)r=o=s=n;else{var a=.5>n?n*(1+e):n+e-n*e,l=2*n-a;r=i(l,a,t+1/3),o=i(l,a,t),s=i(l,a,t-1/3)}return{r:255*r,g:255*o,b:255*s}}function s(t,e,n){t=u(t,255),e=u(e,255),n=u(n,255);var i,r,o=C(t,e,n),s=k(t,e,n),a=o,l=o-s;if(r=0===o?0:l/o,o==s)i=0;else{switch(o){case t:i=(e-n)/l+(n>e?6:0);break;case e:i=(n-t)/l+2;break;case n:i=(t-e)/l+4}i/=6}return{h:i,s:r,v:a}}function a(t,e,n){t=6*u(t,360),e=u(e,100),n=u(n,100);var i=x.floor(t),r=t-i,o=n*(1-e),s=n*(1-r*e),a=n*(1-(1-r)*e),l=i%6,c=[n,s,o,o,a,n][l],h=[a,n,n,s,o,o][l],d=[o,o,a,n,n,s][l];return{r:255*c,g:255*h,b:255*d}}function l(t,e,n,i){var r=[g(_(t).toString(16)),g(_(e).toString(16)),g(_(n).toString(16))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function c(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function u(t,e){p(t)&&(t="100%");var n=f(t);return t=k(e,C(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),1e-6>x.abs(t-e)?1:t%e/parseFloat(e)}function h(t){return k(1,C(0,t))}function d(t){return parseInt(t,16)}function p(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)}function f(t){return"string"==typeof t&&-1!=t.indexOf("%")}function g(t){return 1==t.length?"0"+t:""+t}function m(t){return 1>=t&&(t=100*t+"%"),t}function v(t){t=t.replace(y,"").replace(b,"").toLowerCase();var e=!1;if($[t])t=$[t],e=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0};var n;return(n=M.rgb.exec(t))?{r:n[1],g:n[2],b:n[3]}:(n=M.rgba.exec(t))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=M.hsl.exec(t))?{h:n[1],s:n[2],l:n[3]}:(n=M.hsla.exec(t))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=M.hsv.exec(t))?{h:n[1],s:n[2],v:n[3]}:(n=M.hex6.exec(t))?{r:d(n[1]),g:d(n[2]),b:d(n[3]),format:e?"name":"hex"}:(n=M.hex3.exec(t))?{r:d(n[1]+""+n[1]),g:d(n[2]+""+n[2]),b:d(n[3]+""+n[3]),format:e?"name":"hex"}:!1}var y=/^[\s,#]+/,b=/\s+$/,w=0,x=Math,_=x.round,k=x.min,C=x.max,S=x.random;e.fromRatio=function(t,n){if("object"==typeof t){var i={};for(var r in t)t.hasOwnProperty(r)&&(i[r]="a"===r?t[r]:m(t[r]));t=i}return e(t,n)},e.equals=function(t,n){return t&&n?e(t).toRgbString()==e(n).toRgbString():!1},e.random=function(){return e.fromRatio({r:S(),g:S(),b:S()})},e.desaturate=function(t,n){var i=e(t).toHsl();return i.s-=(n||10)/100,i.s=h(i.s),e(i)},e.saturate=function(t,n){var i=e(t).toHsl();return i.s+=(n||10)/100,i.s=h(i.s),e(i)},e.greyscale=function(t){return e.desaturate(t,100)},e.lighten=function(t,n){var i=e(t).toHsl();return i.l+=(n||10)/100,i.l=h(i.l),e(i)},e.darken=function(t,n){var i=e(t).toHsl();return i.l-=(n||10)/100,i.l=h(i.l),e(i)},e.complement=function(t){var n=e(t).toHsl();return n.h=(n.h+180)%360,e(n)},e.triad=function(t){var n=e(t).toHsl(),i=n.h;return[e(t),e({h:(i+120)%360,s:n.s,l:n.l}),e({h:(i+240)%360,s:n.s,l:n.l})]},e.tetrad=function(t){var n=e(t).toHsl(),i=n.h;return[e(t),e({h:(i+90)%360,s:n.s,l:n.l}),e({h:(i+180)%360,s:n.s,l:n.l}),e({h:(i+270)%360,s:n.s,l:n.l})]},e.splitcomplement=function(t){var n=e(t).toHsl(),i=n.h;return[e(t),e({h:(i+72)%360,s:n.s,l:n.l}),e({h:(i+216)%360,s:n.s,l:n.l})]},e.analogous=function(t,n,i){n=n||6,i=i||30;var r=e(t).toHsl(),o=360/i,s=[e(t)];for(r.h=(r.h-(o*n>>1)+720)%360;--n;)r.h=(r.h+o)%360,s.push(e(r));return s},e.monochromatic=function(t,n){n=n||6;for(var i=e(t).toHsv(),r=i.h,o=i.s,s=i.v,a=[],l=1/n;n--;)a.push(e({h:r,s:o,v:s})),s=(s+l)%1;return a},e.readability=function(t,n){var i=e(t).toRgb(),r=e(n).toRgb(),o=(299*i.r+587*i.g+114*i.b)/1e3,s=(299*r.r+587*r.g+114*r.b)/1e3,a=Math.max(i.r,r.r)-Math.min(i.r,r.r)+Math.max(i.g,r.g)-Math.min(i.g,r.g)+Math.max(i.b,r.b)-Math.min(i.b,r.b);return{brightness:Math.abs(o-s),color:a}},e.readable=function(t,n){var i=e.readability(t,n);return i.brightness>125&&i.color>500},e.mostReadable=function(t,n){for(var i=null,r=0,o=!1,s=0;n.length>s;s++){var a=e.readability(t,n[s]),l=a.brightness>125&&a.color>500,c=3*(a.brightness/125)+a.color/500;(l&&!o||l&&o&&c>r||!l&&!o&&c>r)&&(o=l,r=c,i=e(n[s]))}return i};var $=e.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},T=e.hexNames=c($),M=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",n="(?:"+e+")|(?:"+t+")",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{rgb:RegExp("rgb"+i),rgba:RegExp("rgba"+r),hsl:RegExp("hsl"+i),hsla:RegExp("hsla"+r),hsv:RegExp("hsv"+i),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();t.tinycolor=e}(this),e(function(){e.fn.spectrum.load&&e.fn.spectrum.processNativeColorInputs()})}(window,jQuery),define("colorpicker",["jquery"],function(){}),define("strut/config/config",[],function(){var t={slide:{size:{width:1024,height:768},overviewSize:{width:75,height:50}}},e=localStorage.getItem("Strut_sessionMeta");try{var n=JSON.parse(e)}catch(i){}var n=n||{generator_index:0};return window.config=t,window.sessionMeta=n,t}),define("common/EventEmitter",[],function(){function t(){return this instanceof t?(this._events=null,this._deferer="undefined"!=typeof process&&process.nextTick!==void 0?function(t,e,n){process.nextTick(function(){t(e,n)})}:function(t,e,n){setTimeout(function(){t(e,n)},0)},void 0):new t}return t.prototype={_listeners:function(t){var e=this._events||(this._events={});return e[t]||(e[t]=[])},_emit:function(t,e){if(t instanceof Array&&(t=JSON.stringify(t)),this._events){var n=this._events[t];if(n)for(var i=n.length;i--;){var r=n[i];r&&r.cb.apply(r.context,e)}}},_splice:function(t,e,n){return t=Array.prototype.slice.call(t),t.splice(e,n)},_indexOfSub:function(t,e,n){for(var i=0;t.length>i;++i)if(t[i].cb===e&&t[i].context===n)return i;return-1},emit:function(t){var e=arguments.length>1?this._splice(arguments,1,arguments.length):[];this._emit(t,e)},trigger:function(){this.emit.apply(this,arguments)},emitDeferred:function(t){var e=arguments.length>1?this._splice(arguments,1,arguments.length):[];this._deferer(emit,t,e)},on:function(t,e,n){if(!e)throw"Undefined callback provided";t instanceof Array&&(t=JSON.stringify(t));var i=this._listeners(t),r=this._indexOfSub(i,e,n);0>r&&(i.push({cb:e,context:n}),r=i.length-1);var o=this;return{dispose:function(){o.removeListener(t,e,n)}}},once:function(t,e,n){var i={sub:null};return i.sub=this.on(t,function(){i.sub.dispose(),e.apply(n,arguments)}),i.sub},removeListener:function(t,e,n){var i=this._listeners(t),r=this._indexOfSub(i,e,n);r>=0&&i.splice(r,1),0==i.length&&delete this._events[t]},getNumListeners:function(t){var e=0;return this._events[t]&&(e=this._events[t].length),e},off:function(t,e,n){this.removeListener(t,e,n)},removeAllListeners:function(){this._events=null}},t}),define("common/collections/MultiMap",[],function(){"use strict";function t(){this._map={}}return t.prototype={put:function(t,e){var n=this._map[t];return null==n&&(n=[],this._map[t]=n),n.push(e),this},putAll:function(t,e){var n=this._map[t];return null==n&&(n=[]),this._map[t]=n.concat(e),this},get:function(t){var e=this._map[t];return e||[]},remove:function(t,e){var n=this._map[t],i=n.indexOf(e);return i>=0?1>=n.length?(this.removeAll(t),[]):(n.splice(i,1),n):void 0},removeAll:function(t){return delete this._map[t],this},putIfAbsent:function(t,e){var n=this._map[t];return null==n&&(n=[],this._map[t]=n),0>n.indexOf(e)&&n.push(e),this}},t}),define("framework/ServiceRegistry",["common/EventEmitter","common/collections/MultiMap"],function(t,e){"use strict";function n(){this._services=new e}function i(t,e,n){this._interfaces=t,this._meta=e||{},this._service=n}var r=0,o=n.prototype=Object.create(t.prototype);o.register=function(t,e){null==e.__registryIdentifier&&(e.__registryIdentifier=++r);var n;Array.isArray(t)?(n=t,t={}):"string"==typeof t?(n=[t],t={}):n=Array.isArray(t.interfaces)?t.interfaces:[t.interfaces];var o=new i(n,t.meta,e);return n.forEach(function(t){this._services.put(t,o),this.emit("registered:"+t,o)},this),this.emit("registered",o),this},o.deregister=function(t){return t=this.normalize(t),this._deregister(t),this},o._deregister=function(t){var e=[];t.interfaces.forEach(function(n){var i=this._services.get(n);i.forEach(function(i){i._matches(t)&&(this._services.remove(n,i),e.push(i))},this)},this),e.forEach(function(t){this.emit("deregistered",t)},this)},o.getBest=function(t){var e=this.getBestEntry(t);return null!=e?e.service():null},o.getBestEntry=function(t){return this.get(t)[0]};var s=o.normalize=function s(t){var e={};return"string"==typeof t?e.interfaces=[t]:Array.isArray(t)?e.interfaces=t:(e=t,Array.isArray(e.interfaces)||(e.interfaces=[e.interfaces])),e};return o.get=function(t){var e,n=this.normalize(t),i={};n.interfaces.some(function(n,r){return e={},this._services.get(n).forEach(function(n){n.metaMatches(t.meta)&&(0==r||null!=i[n.serviceIdentifier()])&&(e[n.serviceIdentifier()]=n)}),i=e,0==Object.keys(e).length},this);var r=[];for(var o in e)r.push(e[o]);return r},o.getInvoke=function(t,e,n){var i=this.get(t),r={};return i.forEach(function(t){var i=t.service(),o=i[e].apply(i,n);r[o.id]=o},this),r},i.prototype={equals:function(t){return t._service.__registryIdentifier==this._service.__registryIdentifier},service:function(){return this._service},meta:function(){return this._meta},matches:function(t){t=s(t);var e={};return t.interfaces.forEach(function(t){e[t]=!0}),this._interfaces.every(function(t){return e[t]})},metaMatches:function(t){if(null==t)return!0;for(var e in t)if(t[e]!=this._meta[e])return!1;return!0},serviceIdentifier:function(){return this._service.__registryIdentifier}},n}),function(t,e){"use strict";function n(t){return new i(t)}function i(t){return t&&t.__wrapped__?t:(this.__wrapped__=t,e)}function r(t,e){return function(n,i,r){return t.call(e,n,i,r)}}function o(t,e,n){e||(e=0);var i=t.length,r=i-e>=(n||Ie),o=r?{}:t;if(r)for(var s,a=e-1;i>++a;)s=t[a]+"",(Ye.call(o,s)?o[s]:o[s]=[]).push(t[a]);return function(t){if(r){var n=t+"";return Ye.call(o,n)&&O(o[n],t)>-1}return O(o,t,e)>-1}}function s(t,n){var i=t.index,r=n.index;if(t=t.criteria,n=n.criteria,t!==n){if(t>n||t===e)return 1;if(n>t||n===e)return-1}return r>i?-1:1}function a(t,e,n){function i(){var a=arguments,l=o?this:e;if(r||(t=e[s]),n.length&&(a=a.length?n.concat(Ke.call(a)):n),this instanceof i){h.prototype=t.prototype,l=new h;var c=t.apply(l,a);return c&&Nn[typeof c]?c:l}return t.apply(l,a)}var r=f(t),o=!n,s=t;return o&&(n=e),i}function l(){for(var t,e,n,i=-1,o=arguments.length,a={bottom:"",exit:"",init:"",top:"",arrayBranch:{beforeLoop:""},objectBranch:{beforeLoop:""}};o>++i;){t=arguments[i];for(e in t)n=null==(n=t[e])?"":n,/beforeLoop|inLoop/.test(e)?("string"==typeof n&&(n={array:n,object:n}),a.arrayBranch[e]=n.array||"",a.objectBranch[e]=n.object||""):a[e]=n}var l=a.args,c=/^[^,]+/.exec(l)[0],u=a.useStrict;a.firstArg=c,a.hasDontEnumBug=Me,a.isKeysFast=$n,a.noArgsEnum=bn,a.shadowed=qe,a.useHas=a.useHas!==!1,a.useStrict=null==u?Tn:u,null==a.noCharByIndex&&(a.noCharByIndex=_n),a.exit||(a.exit="if (!"+c+") return result"),"collection"==c&&a.arrayBranch.inLoop||(a.arrayBranch=null);var h=Function("arrayLikeClasses, ArrayProto, bind, bindIterator, compareAscending, concat, forIn, hasOwnProperty, identity, indexOf, isArguments, isArray, isFunction, isPlainObject, objectClass, objectTypes, nativeKeys, propertyIsEnumerable, slice, stringClass, toString","var callee = function("+l+") {\n"+Dn(a)+"\n};\n"+"return callee");return h(En,$e,te,r,s,Xe,Jn,Ye,de,O,p,qn,f,Un,fn,Nn,rn,Je,Ke,mn,Ze)}function c(t){return"\\"+Pn[t]}function u(t){return An[t]}function h(){}function d(t){return In[t]}function p(t){return Ze.call(t)==ln}function f(t){return"function"==typeof t}function g(t,e){var n=!1;if(!t||"object"!=typeof t||!e&&p(t))return n;var i=t.constructor;return kn&&"function"!=typeof t.toString&&"string"==typeof(t+"")||f(i)&&!(i instanceof i)?n:Le?(Jn(t,function(t,e,i){return n=!Ye.call(i,e),!1}),n===!1):(Jn(t,function(t,e){n=e}),n===!1||Ye.call(t,n))}function m(t,e,n,i,r){if(null==t)return t;n&&(e=!1);var o=Nn[typeof t];if(o){var s=Ze.call(t);if(!Ln[s]||wn&&p(t))return t;var a=s==cn;o=a||(s==fn?Un(t,!0):o)}if(!o||!e)return o?a?Ke.call(t):Gn({},t):t;var l=t.constructor;switch(s){case un:return new l(1==t);case hn:return new l(+t);case pn:case mn:return new l(t);case gn:return l(t.source,je.exec(t))}i||(i=[]),r||(r=[]);for(var c=i.length;c--;)if(i[c]==t)return r[c];var u=a?l(c=t.length):{};if(i.push(t),r.push(u),a)for(var h=-1;c>++h;)u[h]=m(t[h],e,null,i,r);else Kn(t,function(t,n){u[n]=m(t,e,null,i,r)});return u}function v(t,e){return t?Ye.call(t,e):!1}function y(t){return t===!0||t===!1||Ze.call(t)==un}function b(t){return Ze.call(t)==hn}function w(t){return t?1===t.nodeType:!1}function x(t,e,n,i){if(null==t||null==e)return t===e;if(t===e)return 0!==t||1/t==1/e;(Nn[typeof t]||Nn[typeof e])&&(t=t.__wrapped__||t,e=e.__wrapped__||e);
var r=Ze.call(t);if(r!=Ze.call(e))return!1;switch(r){case un:case hn:return+t==+e;case pn:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case gn:case mn:return t==e+""}var o=En[r];if(wn&&!o&&(o=p(t))&&!p(e))return!1;if(!o&&(r!=fn||kn&&("function"!=typeof t.toString&&"string"==typeof(t+"")||"function"!=typeof e.toString&&"string"==typeof(e+""))))return!1;n||(n=[]),i||(i=[]);for(var s=n.length;s--;)if(n[s]==t)return i[s]==e;var a=-1,l=!0,c=0;if(n.push(t),i.push(e),o){if(c=t.length,l=c==e.length)for(;c--&&(l=x(t[c],e[c],n,i)););return l}var u=t.constructor,h=e.constructor;if(u!=h&&!(f(u)&&u instanceof u&&f(h)&&h instanceof h))return!1;for(var d in t)if(Ye.call(t,d)&&(c++,!Ye.call(e,d)||!x(t[d],e[d],n,i)))return!1;for(d in e)if(Ye.call(e,d)&&!c--)return!1;if(Me)for(;7>++a;)if(d=qe[a],Ye.call(t,d)&&(!Ye.call(e,d)||!x(t[d],e[d],n,i)))return!1;return!0}function _(t){return nn(t)&&Ze.call(t)==pn}function k(t){return t?Nn[typeof t]:!1}function C(t){return Ze.call(t)==pn&&t!=+t}function S(t){return null===t}function $(t){return Ze.call(t)==pn}function T(t){return Ze.call(t)==gn}function M(t){return Ze.call(t)==mn}function E(t){return t===e}function L(t,e,n,i){if(!t)return n;var o=t.length,s=3>arguments.length;if(i&&(e=r(e,i)),o===+o){var a=_n&&Ze.call(t)==mn?t.split(""):t;for(o&&s&&(n=a[--o]);o--;)n=e(n,a[o],o,t);return n}var l,c=ei(t);for(o=c.length,o&&s&&(n=t[c[--o]]);o--;)l=c[o],n=e(n,t[l],l,t);return n}function A(t){if(!t)return 0;var e=t.length;return e===+e?e:ei(t).length}function I(t){if(!t)return[];var e=t.length;return e===+e?(xn?Ze.call(t)==mn:"string"==typeof t)?t.split(""):Ke.call(t):si(t)}function N(t){var e=[];if(!t)return e;for(var n=-1,i=t.length;i>++n;)t[n]&&e.push(t[n]);return e}function P(t){var e=[];if(!t)return e;for(var n=-1,i=t.length,r=Xe.apply(e,arguments),s=o(r,i);i>++n;)s(t[n])||e.push(t[n]);return e}function D(t,n,i){return t?null==n||i?t[0]:Ke.call(t,0,n):e}function H(t,e){var n=[];if(!t)return n;for(var i,r=-1,o=t.length;o>++r;)i=t[r],qn(i)?Ge.apply(n,e?i:H(i)):n.push(i);return n}function O(t,e,n){if(!t)return-1;var i=-1,r=t.length;if(n){if("number"!=typeof n)return i=Y(t,e),t[i]===e?i:-1;i=(0>n?on(0,r+n):n)-1}for(;r>++i;)if(t[i]===e)return i;return-1}function B(t,e,n){return t?Ke.call(t,0,-(null==e||n?1:e)):[]}function j(t){var e=[];if(!t)return e;var n,i=arguments.length,r=[],s=-1,a=t.length;t:for(;a>++s;)if(n=t[s],0>O(e,n)){for(var l=1;i>l;l++)if(!(r[l]||(r[l]=o(arguments[l])))(n))continue t;e.push(n)}return e}function z(t,e,n){if(t){var i=t.length;return null==e||n?t[i-1]:Ke.call(t,-e||i)}}function R(t,e,n){if(!t)return-1;var i=t.length;for(n&&"number"==typeof n&&(i=(0>n?on(0,i+n):sn(n,i-1))+1);i--;)if(t[i]===e)return i;return-1}function F(t,e,n){var i=-1/0,o=i;if(!t)return o;var s,a=-1,l=t.length;if(!e){for(;l>++a;)t[a]>o&&(o=t[a]);return o}for(n&&(e=r(e,n));l>++a;)s=e(t[a],a,t),s>i&&(i=s,o=t[a]);return o}function W(t,e,n){var i=1/0,o=i;if(!t)return o;var s,a=-1,l=t.length;if(!e){for(;l>++a;)o>t[a]&&(o=t[a]);return o}for(n&&(e=r(e,n));l>++a;)s=e(t[a],a,t),i>s&&(i=s,o=t[a]);return o}function V(t,e){if(!t)return{};for(var n=-1,i=t.length,r={};i>++n;)e?r[t[n]]=e[n]:r[t[n][0]]=t[n][1];return r}function q(t,e,n){t=+t||0,n=+n||1,null==e&&(e=t,t=0);for(var i=-1,r=on(0,Math.ceil((e-t)/n)),o=Array(r);r>++i;)o[i]=t,t+=n;return o}function U(t,e,n){return t?Ke.call(t,null==e||n?1:e):[]}function X(t){if(!t)return[];for(var e,n=-1,i=t.length,r=Array(i);i>++n;)e=tn(an()*(n+1)),r[n]=r[e],r[e]=t[n];return r}function Y(t,e,n,i){if(!t)return 0;var r,o=0,s=t.length;if(n)for(i&&(n=te(n,i)),e=n(e);s>o;)r=o+s>>>1,e>n(t[r])?o=r+1:s=r;else for(;s>o;)r=o+s>>>1,e>t[r]?o=r+1:s=r;return o}function G(){for(var t=-1,e=[],n=Xe.apply(e,arguments),i=n.length;i>++t;)0>O(e,n[t])&&e.push(n[t]);return e}function J(t,e,n,i){var o=[];if(!t)return o;var s,a=-1,l=t.length,c=[];for("function"==typeof e&&(i=n,n=e,e=!1),n?i&&(n=r(n,i)):n=de;l>++a;)s=n(t[a],a,t),(e?!a||c[c.length-1]!==s:0>O(c,s))&&(c.push(s),o.push(t[a]));return o}function K(t){var e=[];if(!t)return e;for(var n=-1,i=t.length,r=o(arguments,1,20);i>++n;)r(t[n])||e.push(t[n]);return e}function Z(t){if(!t)return[];for(var e=-1,n=F(mi(arguments,"length")),i=Array(n);n>++e;)i[e]=mi(arguments,e);return i}function Q(t,n){return 1>t?n():function(){return 1>--t?n.apply(this,arguments):e}}function te(t,e){return Sn||Qe&&arguments.length>2?Qe.call.apply(Qe,arguments):a(t,e,Ke.call(arguments,2))}function ee(){var t=arguments;return function(){for(var e=arguments,n=t.length;n--;)e=[t[n].apply(this,e)];return e[0]}}function ne(t,e,n){function i(){a=null,n||(o=t.apply(s,r))}var r,o,s,a;return function(){var l=n&&!a;return r=arguments,s=this,vn(a),a=yn(i,e),l&&(o=t.apply(s,r)),o}}function ie(t,n){var i=Ke.call(arguments,2);return yn(function(){return t.apply(e,i)},n)}function re(t){var n=Ke.call(arguments,1);return yn(function(){return t.apply(e,n)},1)}function oe(t,e){return a(e,t,Ke.call(arguments,2))}function se(t,e){var n={};return function(){var i=e?e.apply(this,arguments):arguments[0];return Ye.call(n,i)?n[i]:n[i]=t.apply(this,arguments)}}function ae(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}}function le(t){return a(t,Ke.call(arguments,1))}function ce(t,e){function n(){a=new Date,s=null,r=t.apply(o,i)}var i,r,o,s,a=0;return function(){var l=new Date,c=e-(l-a);return i=arguments,o=this,0>=c?(a=l,r=t.apply(o,i)):s||(s=yn(n,c)),r}}function ue(t,e){return function(){var n=[t];return arguments.length&&Ge.apply(n,arguments),e.apply(this,n)}}function he(t){return null==t?"":(t+"").replace(We,u)}function de(t){return t}function pe(t){di(Zn(t),function(e){var r=n[e]=t[e];i.prototype[e]=function(){var t=[this.__wrapped__];arguments.length&&Ge.apply(t,arguments);var e=r.apply(n,t);return this.__chain__&&(e=new i(e),e.__chain__=!0),e}})}function fe(){return t._=Ne,this}function ge(t,e){return null==t&&null==e&&(e=1),t=+t||0,null==e&&(e=t,t=0),t+tn(an()*((+e||0)-t+1))}function me(t,e){if(!t)return null;var n=t[e];return f(n)?t[e]():n}function ve(t,e,i){i||(i={}),t+="";var r,o,s=0,a=n.templateSettings,l="__p += '",u=i.variable||a.variable,h=u,d=RegExp((i.escape||a.escape||Fe).source+"|"+(i.interpolate||a.interpolate||Fe).source+"|"+(i.evaluate||a.evaluate||Fe).source+"|$","g");if(t.replace(d,function(e,n,i,o,a){l+=t.slice(s,a).replace(Ve,c),l+=n?"' +\n__e("+n+") +\n'":o?"';\n"+o+";\n__p += '":i?"' +\n((__t = ("+i+")) == null ? '' : __t) +\n'":"",r||(r=o||Pe.test(n||i)),s=a+e.length}),l+="';\n",!h)if(u="obj",r)l="with ("+u+") {\n"+l+"\n}\n";else{var p=RegExp("(\\(\\s*)"+u+"\\."+u+"\\b","g");l=l.replace(ze,"$&"+u+".").replace(p,"$1__d")}l=(r?l.replace(He,""):l).replace(Oe,"$1").replace(Be,"$1;"),l="function("+u+") {\n"+(h?"":u+" || ("+u+" = {});\n")+"var __t, __p = '', __e = _.escape"+(r?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":(h?"":", __d = "+u+"."+u+" || "+u)+";\n")+l+"return __p\n}";var f=Mn?"\n//@ sourceURL=/lodash/template/source["+Ue++ +"]":"";try{o=Function("_","return "+l+f)(n)}catch(g){throw g.source=l,g}return e?o(e):(o.source=l,o)}function ye(t,e,n){var i=-1,r=Array(t||0);if(n)for(;t>++i;)r[i]=e.call(n,i);else for(;t>++i;)r[i]=e(i);return r}function be(t){return null==t?"":(t+"").replace(De,d)}function we(t){var e=Ae++;return t?t+e:e}function xe(t){return t=new i(t),t.__chain__=!0,t}function _e(t,e){return e(t),t}function ke(){return this.__chain__=!0,this}function Ce(){return this.__wrapped__}console.log("LOADING LODASH!!!!");var Se="object"==typeof exports&&exports&&("object"==typeof global&&global&&global==global.global&&(t=global),exports),$e=Array.prototype,Te=(Boolean.prototype,Object.prototype);Number.prototype,String.prototype;var Me,Ee,Le,Ae=0,Ie=30,Ne=t._,Pe=/[-?+=!~*%&^<>|{(\/]|\[\D|\b(?:delete|in|instanceof|new|typeof|void)\b/,De=/&(?:amp|lt|gt|quot|#x27);/g,He=/\b__p \+= '';/g,Oe=/\b(__p \+=) '' \+/g,Be=/(__e\(.*?\)|\b__t\)) \+\n'';/g,je=/\w*$/,ze=/(?:__e|__t = )\(\s*(?![\d\s"']|this\.)/g,Re=RegExp("^"+(Te.valueOf+"").replace(/[.*+?^=!:${}()|[\]\/\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),Fe=/($^)/,We=/[&<>"']/g,Ve=/['\n\r\t\u2028\u2029\\]/g,qe=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ue=0,Xe=$e.concat,Ye=Te.hasOwnProperty,Ge=$e.push,Je=Te.propertyIsEnumerable,Ke=$e.slice,Ze=Te.toString,Qe=Re.test(Qe=Ke.bind)&&Qe,tn=Math.floor,en=Re.test(en=Array.isArray)&&en,nn=t.isFinite,rn=Re.test(rn=Object.keys)&&rn,on=Math.max,sn=Math.min,an=Math.random,ln="[object Arguments]",cn="[object Array]",un="[object Boolean]",hn="[object Date]",dn="[object Function]",pn="[object Number]",fn="[object Object]",gn="[object RegExp]",mn="[object String]",vn=t.clearTimeout,yn=t.setTimeout,bn=!0;(function(){function t(){this.x=1}var e={0:1,length:1},n=[];t.prototype={valueOf:1,y:1};for(var i in new t)n.push(i);for(i in arguments)bn=!i;Me=4>(n+"").length,Le="x"!=n[0],n.splice.call(e,0,1),Ee=e[0]})(1);var wn=!p(arguments),xn="x"!=Ke.call("x")[0],_n="xx"!="x"[0]+Object("x")[0];try{var kn=Ze.call(t.document||0)==fn}catch(Cn){}var Sn=Qe&&/\n|Opera/.test(Qe+Ze.call(t.opera)),$n=rn&&/^.+$|true/.test(rn+!!t.attachEvent),Tn=!Sn;try{var Mn=(Function("//@")(),!t.attachEvent)}catch(Cn){}var En={};En[un]=En[hn]=En[dn]=En[pn]=En[fn]=En[gn]=!1,En[ln]=En[cn]=En[mn]=!0;var Ln={};Ln[ln]=Ln[dn]=!1,Ln[cn]=Ln[un]=Ln[hn]=Ln[pn]=Ln[fn]=Ln[gn]=Ln[mn]=!0;var An={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},In={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'"},Nn={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1,unknown:!0},Pn={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};n.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,variable:""};var Dn=ve("<% if (useStrict) { %>'use strict';\n<% } %>var index, value, iteratee = <%= firstArg %>, result<% if (init) { %> = <%= init %><% } %>;\n<%= exit %>;\n<%= top %>;\n<% if (arrayBranch) { %>var length = iteratee.length; index = -1;  <% if (objectBranch) { %>\nif (length === +length) {<% } %>  <% if (noCharByIndex) { %>\n  if (toString.call(iteratee) == stringClass) {\n    iteratee = iteratee.split('')\n  }  <% } %>\n  <%= arrayBranch.beforeLoop %>;\n  while (++index < length) {\n    value = iteratee[index];\n    <%= arrayBranch.inLoop %>\n  }  <% if (objectBranch) { %>\n}<% } %><% } %><% if (objectBranch) { %>  <% if (arrayBranch) { %>\nelse {  <%  } else if (noArgsEnum) { %>\n  var length = iteratee.length; index = -1;\n  if (length && isArguments(iteratee)) {\n    while (++index < length) {\n      value = iteratee[index += ''];\n      <%= objectBranch.inLoop %>\n    }\n  } else {  <% } %>  <% if (!hasDontEnumBug) { %>\n  var skipProto = typeof iteratee == 'function' && \n    propertyIsEnumerable.call(iteratee, 'prototype');\n  <% } %>  <% if (isKeysFast && useHas) { %>\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iteratee] ? nativeKeys(iteratee) : [],\n      length = ownProps.length;\n\n  <%= objectBranch.beforeLoop %>;\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n    <% if (!hasDontEnumBug) { %>if (!(skipProto && index == 'prototype')) {\n  <% } %>    value = iteratee[index];\n    <%= objectBranch.inLoop %>\n    <% if (!hasDontEnumBug) { %>}\n<% } %>  }  <% } else { %>\n  <%= objectBranch.beforeLoop %>;\n  for (index in iteratee) {<%    if (!hasDontEnumBug || useHas) { %>\n    if (<%      if (!hasDontEnumBug) { %>!(skipProto && index == 'prototype')<% }      if (!hasDontEnumBug && useHas) { %> && <% }      if (useHas) { %>hasOwnProperty.call(iteratee, index)<% }    %>) {    <% } %>\n    value = iteratee[index];\n    <%= objectBranch.inLoop %>;    <% if (!hasDontEnumBug || useHas) { %>\n    }<% } %>\n  }  <% } %>  <% if (hasDontEnumBug) { %>\n\n  var ctor = iteratee.constructor;\n    <% for (var k = 0; k < 7; k++) { %>\n  index = '<%= shadowed[k] %>';\n  if (<%      if (shadowed[k] == 'constructor') {        %>!(ctor && ctor.prototype === iteratee) && <%      } %>hasOwnProperty.call(iteratee, index)) {\n    value = iteratee[index];\n    <%= objectBranch.inLoop %>\n  }    <% } %>  <% } %>  <% if (arrayBranch || noArgsEnum) { %>\n}<% } %><% } %>\n<%= bottom %>;\nreturn result"),Hn={args:"collection, callback, thisArg",init:"collection",top:"if (!callback) {\n  callback = identity\n}\nelse if (thisArg) {\n  callback = bindIterator(callback, thisArg)\n}",inLoop:"if (callback(value, index, collection) === false) return result"},On={init:"{}",top:"var prop;\nif (typeof callback != 'function') {\n  var valueProp = callback;\n  callback = function(value) { return value[valueProp] }\n}\nelse if (thisArg) {\n  callback = bindIterator(callback, thisArg)\n}",inLoop:"prop = callback(value, index, collection);\n(hasOwnProperty.call(result, prop) ? result[prop]++ : result[prop] = 1)"},Bn={init:"true",inLoop:"if (!callback(value, index, collection)) return !result"},jn={useHas:!1,useStrict:!1,args:"object",init:"object",top:"for (var argsIndex = 1, argsLength = arguments.length; argsIndex < argsLength; argsIndex++) {\n  if (iteratee = arguments[argsIndex]) {",inLoop:"result[index] = value",bottom:"  }\n}"},zn={init:"[]",inLoop:"callback(value, index, collection) && result.push(value)"},Rn={top:"if (thisArg) callback = bindIterator(callback, thisArg)"},Fn={inLoop:{object:Hn.inLoop}},Wn={init:"",exit:"if (!collection) return []",beforeLoop:{array:"result = Array(length)",object:"result = "+($n?"Array(length)":"[]")},inLoop:{array:"result[index] = callback(value, index, collection)",object:"result"+($n?"[ownIndex] = ":".push")+"(callback(value, index, collection))"}},Vn={useHas:!1,args:"object, callback, thisArg",init:"{}",top:"var isFunc = typeof callback == 'function';\nif (!isFunc) {\n  var props = concat.apply(ArrayProto, arguments)\n} else if (thisArg) {\n  callback = bindIterator(callback, thisArg)\n}",inLoop:"if (isFunc\n  ? !callback(value, index, object)\n  : indexOf(props, index) < 0\n) result[index] = value"};wn&&(p=function(t){return!(!t||!Ye.call(t,"callee"))});var qn=en||function(t){return Ze.call(t)==cn};f(/x/)&&(f=function(t){return Ze.call(t)==dn});var Un=Nn.__proto__!=Te?g:function(t,e){if(!t)return!1;var n=t.valueOf,i="function"==typeof n&&(i=n.__proto__)&&i.__proto__;return i?t==i||t.__proto__==i&&(e||!p(t)):g(t)},Xn=l({args:"object",init:"[]",inLoop:"result.push(index)"}),Yn=l(jn,{inLoop:"if (result[index] == null) "+jn.inLoop}),Gn=l(jn),Jn=l(Hn,Rn,Fn,{useHas:!1}),Kn=l(Hn,Rn,Fn),Zn=l({useHas:!1,args:"object",init:"[]",inLoop:"if (isFunction(value)) result.push(index)",bottom:"result.sort()"}),Qn=l({args:"object",init:"{}",inLoop:"result[value] = index"}),ti=l({args:"value",init:"true",top:"var className = toString.call(value),\n    length = value.length;\nif (arrayLikeClasses[className]"+(wn?" || isArguments(value)":"")+" ||\n"+"  (className == objectClass && length === +length &&\n"+"  isFunction(value.splice))"+") return !length",inLoop:{object:"return false"}}),ei=rn?function(t){var e=typeof t;return"function"==e&&Je.call(t,"prototype")?Xn(t):t&&Nn[e]?rn(t):[]}:Xn,ni=l(jn,{args:"object, source, indicator",top:"var argsLength, isArr, stackA, stackB,\n    args = arguments, argsIndex = 0;\nif (indicator == isPlainObject) {\n  argsLength = 2;\n  stackA = args[3];\n  stackB = args[4]\n} else {\n  argsLength = args.length;\n  stackA = [];\n  stackB = []\n}\nwhile (++argsIndex < argsLength) {\n  if (iteratee = args[argsIndex]) {",inLoop:"if ((source = value) && ((isArr = isArray(source)) || isPlainObject(source))) {\n  var found = false, stackLength = stackA.length;\n  while (stackLength--) {\n    if (found = stackA[stackLength] == source) break\n  }\n  if (found) {\n    result[index] = stackB[stackLength]\n  } else {\n    stackA.push(source);\n    stackB.push(value = (value = result[index]) && isArr\n      ? (isArray(value) ? value : [])\n      : (isPlainObject(value) ? value : {})\n    );\n    result[index] = callee(value, source, isPlainObject, stackA, stackB)\n  }\n} else if (source != null) {\n  result[index] = source\n}"}),ii=l(Vn),ri=l({args:"object",init:"[]",inLoop:"result"+($n?"[ownIndex] = ":".push")+"([index, value])"}),oi=l(Vn,{top:"if (typeof callback != 'function') {\n  var prop,\n      props = concat.apply(ArrayProto, arguments),\n      length = props.length;\n  for (index = 1; index < length; index++) {\n    prop = props[index];\n    if (prop in object) result[prop] = object[prop]\n  }\n} else {\n  if (thisArg) callback = bindIterator(callback, thisArg)",inLoop:"if (callback(value, index, object)) result[index] = value",bottom:"}"}),si=l({args:"object",init:"[]",inLoop:"result.push(value)"}),ai=l({args:"collection, target",init:"false",noCharByIndex:!1,beforeLoop:{array:"if (toString.call(collection) == stringClass) return collection.indexOf(target) > -1"},inLoop:"if (value === target) return true"}),li=l(Hn,On),ci=l(Hn,Bn),ui=l(Hn,zn),hi=l(Hn,Rn,{init:"",inLoop:"if (callback(value, index, collection)) return value"}),di=l(Hn,Rn),pi=l(Hn,On,{inLoop:"prop = callback(value, index, collection);\n(hasOwnProperty.call(result, prop) ? result[prop] : result[prop] = []).push(value)"}),fi=l(Wn,{args:"collection, methodName",top:"var args = slice.call(arguments, 2),\n    isFunc = typeof methodName == 'function'",inLoop:{array:"result[index] = (isFunc ? methodName : value[methodName]).apply(value, args)",object:"result"+($n?"[ownIndex] = ":".push")+"((isFunc ? methodName : value[methodName]).apply(value, args))"}}),gi=l(Hn,Wn),mi=l(Wn,{args:"collection, property",inLoop:{array:"result[index] = value[property]",object:"result"+($n?"[ownIndex] = ":".push")+"(value[property])"}}),vi=l({args:"collection, callback, accumulator, thisArg",init:"accumulator",top:"var noaccum = arguments.length < 3;\nif (thisArg) callback = bindIterator(callback, thisArg)",beforeLoop:{array:"if (noaccum) result = iteratee[++index]"},inLoop:{array:"result = callback(result, value, index, collection)",object:"result = noaccum\n  ? (noaccum = false, value)\n  : callback(result, value, index, collection)"}}),yi=l(Hn,zn,{inLoop:"!"+zn.inLoop}),bi=l(Hn,Bn,{init:"false",inLoop:Bn.inLoop.replace("!","")}),wi=l(Hn,On,Wn,{inLoop:{array:"result[index] = {\n  criteria: callback(value, index, collection),\n  index: index,\n  value: value\n}",object:"result"+($n?"[ownIndex] = ":".push")+"({\n"+"  criteria: callback(value, index, collection),\n"+"  index: index,\n"+"  value: value\n"+"})"},bottom:"result.sort(compareAscending);\nlength = result.length;\nwhile (length--) {\n  result[length] = result[length].value\n}"}),xi=l(zn,{args:"collection, properties",top:"var props = [];\nforIn(properties, function(value, prop) { props.push(prop) });\nvar propsLength = props.length",inLoop:"for (var prop, pass = true, propIndex = 0; propIndex < propsLength; propIndex++) {\n  prop = props[propIndex];\n  if (!(pass = value[prop] === properties[prop])) break\n}\npass && result.push(value)"}),_i=l({useHas:!1,useStrict:!1,args:"object",init:"object",top:"var funcs = arguments,\n    length = funcs.length;\nif (length > 1) {\n  for (var index = 1; index < length; index++) {\n    result[funcs[index]] = bind(result[funcs[index]], result)\n  }\n  return result\n}",inLoop:"if (isFunction(result[index])) {\n  result[index] = bind(result[index], result)\n}"});n.VERSION="0.7.0",n.after=Q,n.bind=te,n.bindAll=_i,n.chain=xe,n.clone=m,n.compact=N,n.compose=ee,n.contains=ai,n.countBy=li,n.debounce=ne,n.defaults=Yn,n.defer=re,n.delay=ie,n.difference=P,n.escape=he,n.every=ci,n.extend=Gn,n.filter=ui,n.find=hi,n.first=D,n.flatten=H,n.forEach=di,n.forIn=Jn,n.forOwn=Kn,n.functions=Zn,n.groupBy=pi,n.has=v,n.identity=de,n.indexOf=O,n.initial=B,n.intersection=j,n.invert=Qn,n.invoke=fi,n.isArguments=p,n.isArray=qn,n.isBoolean=y,n.isDate=b,n.isElement=w,n.isEmpty=ti,n.isEqual=x,n.isFinite=_,n.isFunction=f,n.isNaN=C,n.isNull=S,n.isNumber=$,n.isObject=k,n.isRegExp=T,n.isString=M,n.isUndefined=E,n.keys=ei,n.last=z,n.lastIndexOf=R,n.lateBind=oe,n.map=gi,n.max=F,n.memoize=se,n.merge=ni,n.min=W,n.mixin=pe,n.noConflict=fe,n.object=V,n.omit=ii,n.once=ae,n.pairs=ri,n.partial=le,n.pick=oi,n.pluck=mi,n.random=ge,n.range=q,n.reduce=vi,n.reduceRight=L,n.reject=yi,n.rest=U,n.result=me,n.shuffle=X,n.size=A,n.some=bi,n.sortBy=wi,n.sortedIndex=Y,n.tap=_e,n.template=ve,n.throttle=ce,n.times=ye,n.toArray=I,n.unescape=be,n.union=G,n.uniq=J,n.uniqueId=we,n.values=si,n.where=xi,n.without=K,n.wrap=ue,n.zip=Z,n.all=ci,n.any=bi,n.collect=gi,n.detect=hi,n.drop=U,n.each=di,n.foldl=vi,n.foldr=L,n.head=D,n.include=ai,n.inject=vi,n.methods=Zn,n.select=ui,n.tail=U,n.take=D,n.unique=J,n._iteratorTemplate=Dn,n._shimKeys=Xn,i.prototype=n.prototype,pe(n),i.prototype.chain=ke,i.prototype.value=Ce,di(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=$e[t];i.prototype[t]=function(){var t=this.__wrapped__;return e.apply(t,arguments),Ee&&0===t.length&&delete t[0],this.__chain__&&(t=new i(t),t.__chain__=!0),t}}),di(["concat","join","slice"],function(t){var e=$e[t];i.prototype[t]=function(){var t=this.__wrapped__,n=e.apply(t,arguments);return this.__chain__&&(n=new i(n),n.__chain__=!0),n}}),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(t._=n,define("lodash",[],function(){return n})):Se?"object"==typeof module&&module&&module.exports==Se?(module.exports=n)._=n:Se._=n:t._=n}(this),define("libs/backbone",["lodash","jquery"],function(t,e){var n={};return n._=t,n.jQuery=e,function(){var t,e=this,n=e.Backbone,i=[],r=i.push,o=i.slice,s=i.splice;t="undefined"!=typeof exports?exports:e.Backbone={},t.VERSION="1.0.0";var a=e._;t.$=e.jQuery||e.Zepto||e.ender||e.$,t.noConflict=function(){return e.Backbone=n,this},t.emulateHTTP=!1,t.emulateJSON=!1;var l=t.Events={on:function(t,e,n){if(!u(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!u(this,"once",t,[e,n])||!e)return this;var i=this,r=a.once(function(){i.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,n)},off:function(t,e,n){var i,r,o,s,l,c,h,d;if(!this._events||!u(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(s=t?[t]:a.keys(this._events),l=0,c=s.length;c>l;l++)if(t=s[l],o=this._events[t]){if(this._events[t]=i=[],e||n)for(h=0,d=o.length;d>h;h++)r=o[h],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=o.call(arguments,1);if(!u(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&h(n,e),i&&h(i,arguments),this},stopListening:function(t,e,n){var i=this._listeners;if(!i)return this;var r=!e&&!n;"object"==typeof e&&(n=this),t&&((i={})[t._listenerId]=t);for(var o in i)i[o].off(e,n,this),r&&delete this._listeners[o];return this}},c=/\s+/,u=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)t[e].apply(t,[r,n[r]].concat(i));return!1}if(c.test(n)){for(var o=n.split(c),s=0,a=o.length;a>s;s++)t[e].apply(t,[o[s]].concat(i));return!1}return!0},h=function(t,e){var n,i=-1,r=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;r>++i;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;r>++i;)(n=t[i]).callback.call(n.ctx,o);return;case 2:for(;r>++i;)(n=t[i]).callback.call(n.ctx,o,s);return;case 3:for(;r>++i;)(n=t[i]).callback.call(n.ctx,o,s,a);return;default:for(;r>++i;)(n=t[i]).callback.apply(n.ctx,e)}},d={listenTo:"on",listenToOnce:"once"};a.each(d,function(t,e){l[e]=function(e,n,i){var r=this._listeners||(this._listeners={}),o=e._listenerId||(e._listenerId=a.uniqueId("l"));return r[o]=e,"object"==typeof n&&(i=this),e[t](n,i,this),this}}),l.bind=l.on,l.unbind=l.off,a.extend(t,l);var p=t.Model=function(t,e){var n,i=t||{};e||(e={}),this.cid=a.uniqueId("c"),this.attributes={},a.extend(this,a.pick(e,f)),e.parse&&(i=this.parse(i,e)||{}),(n=a.result(this,"defaults"))&&(i=a.defaults({},i,n)),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)},f=["url","urlRoot","collection"];a.extend(p.prototype,l,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return a.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return a.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var i,r,o,s,l,c,u,h;if(null==t)return this;if("object"==typeof t?(r=t,n=e):(r={})[t]=e,n||(n={}),!this._validate(r,n))return!1;o=n.unset,l=n.silent,s=[],c=this._changing,this._changing=!0,c||(this.changed={}),h=this.attributes,u=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(i in r)e=r[i],a.isEqual(h[i],e)||s.push(i),o?delete h[i]:h[i]=e;if(!l){s.length&&(this._pending=!0),n.changes=s;for(var d=0,p=s.length;p>d;d++)this.trigger("change:"+s[d],this,h[s[d]],n)}if(c)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,a.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,a.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!a.isEmpty(this.changed):a.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?a.clone(this.changed):!1;var e,n=!1,i=this._changing?this._previousAttributes:this.attributes;for(var r in t)a.isEqual(i[r],e=t[r])||((n||(n={}))[r]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return a.clone(this._previousAttributes)},fetch:function(t){t=t?a.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){return e.set(e.parse(i,t),t)?(n&&n(e,i,t),e.trigger("sync",e,i,t),void 0):!1},O(this,t),this.sync("read",this,t)},save:function(t,e,n){var i,r,o,s=this.attributes;if(null==t||"object"==typeof t?(i=t,n=e):(i={})[t]=e,!(!i||n&&n.wait||this.set(i,n)))return!1;if(n=a.extend({validate:!0},n),!this._validate(i,n))return!1;i&&n.wait&&(this.attributes=a.extend({},s,i)),void 0===n.parse&&(n.parse=!0);var l=this,c=n.success;return n.success=function(t){l.attributes=s;var e=l.parse(t,n);return n.wait&&(e=a.extend(i||{},e)),a.isObject(e)&&!l.set(e,n)?!1:(c&&c(l,t,n),l.trigger("sync",l,t,n),void 0)},O(this,n),r=this.isNew()?"create":n.patch?"patch":"update","patch"===r&&(n.attrs=i),o=this.sync(r,this,n),i&&n.wait&&(this.attributes=s),o},destroy:function(t){t=t?a.clone(t):{};var e=this,n=t.success,i=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(r){(t.wait||e.isNew())&&i(),n&&n(e,r,t),e.isNew()||e.trigger("sync",e,r,t)},this.isNew())return t.success(),!1;O(this,t);var r=this.sync("delete",this,t);return t.wait||i(),r},url:function(){var t=a.result(this,"urlRoot")||a.result(this.collection,"url")||H();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},a.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=a.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,a.extend(e||{},{validationError:n})),!1):!0}});var g=["keys","values","pairs","invert","pick","omit"];a.each(g,function(t){p.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.attributes),a[t].apply(a,e)}});var m=t.Collection=function(t,e){e||(e={}),e.url&&(this.url=e.url),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,a.extend({silent:!0},e))},v={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};a.extend(m.prototype,l,{model:p,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return t.sync.apply(this,arguments)},add:function(t,e){return this.set(t,a.defaults(e||{},y))},remove:function(t,e){t=a.isArray(t)?t.slice():[t],e||(e={});var n,i,r,o;for(n=0,i=t.length;i>n;n++)o=this.get(t[n]),o&&(delete this._byId[o.id],delete this._byId[o.cid],r=this.indexOf(o),this.models.splice(r,1),this.length--,e.silent||(e.index=r,o.trigger("remove",o,this,e)),this._removeReference(o));return this},set:function(t,e){e=a.defaults(e||{},v),e.parse&&(t=this.parse(t,e)),a.isArray(t)||(t=t?[t]:[]);var n,i,o,l,c,u=e.at,h=this.comparator&&null==u&&e.sort!==!1,d=a.isString(this.comparator)?this.comparator:null,p=[],f=[],g={};for(n=0,i=t.length;i>n;n++)(o=this._prepareModel(t[n],e))&&((l=this.get(o))?(e.remove&&(g[l.cid]=!0),e.merge&&(l.set(o.attributes,e),h&&!c&&l.hasChanged(d)&&(c=!0))):e.add&&(p.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,null!=o.id&&(this._byId[o.id]=o)));if(e.remove){for(n=0,i=this.length;i>n;++n)g[(o=this.models[n]).cid]||f.push(o);f.length&&this.remove(f,e)}if(p.length&&(h&&(c=!0),this.length+=p.length,null!=u?s.apply(this.models,[u,0].concat(p)):r.apply(this.models,p)),c&&this.sort({silent:!0}),e.silent)return this;for(n=0,i=p.length;i>n;n++)(o=p[n]).trigger("add",o,this,e);return c&&this.trigger("sort",this,e),this},reset:function(t,e){e||(e={});for(var n=0,i=this.models.length;i>n;n++)this._removeReference(this.models[n]);return e.previousModels=this.models,this._reset(),this.add(t,a.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),this},push:function(t,e){return t=this._prepareModel(t,e),this.add(t,a.extend({at:this.length},e)),t},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return t=this._prepareModel(t,e),this.add(t,a.extend({at:0},e)),t},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(t,e){return this.models.slice(t,e)},get:function(t){return null==t?void 0:this._byId[null!=t.id?t.id:t.cid||t]},at:function(t){return this.models[t]},where:function(t,e){return a.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw Error("Cannot sort a set without a comparator");return t||(t={}),a.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(a.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},sortedIndex:function(t,e,n){e||(e=this.comparator);var i=a.isFunction(e)?e:function(t){return t.get(e)};return a.sortedIndex(this.models,t,i,n)},pluck:function(t){return a.invoke(this.models,"get",t)},fetch:function(t){t=t?a.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var r=t.reset?"reset":"set";n[r](i,t),e&&e(n,i,t),n.trigger("sync",n,i,t)},O(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?a.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,i=e.success;return e.success=function(r){e.wait&&n.add(t,e),i&&i(t,r,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof p)return t.collection||(t.collection=this),t;e||(e={}),e.collection=this;var n=new this.model(t,e);return n._validate(t,e)?n:(this.trigger("invalid",this,t,e),!1)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,i),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))
}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];a.each(b,function(t){m.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.models),a[t].apply(a,e)}});var w=["groupBy","countBy","sortBy"];a.each(w,function(t){m.prototype[t]=function(e,n){var i=a.isFunction(e)?e:function(t){return t.get(e)};return a[t](this.models,i,n)}});var x=t.View=function(t){this.cid=a.uniqueId("view"),this._configure(t||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},_=/^(\S+)\s*(.*)$/,k=["model","collection","el","id","attributes","className","tagName","events"];a.extend(x.prototype,l,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=a.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(a.isFunction(n)||(n=this[t[e]]),n){var i=e.match(_),r=i[1],o=i[2];n=a.bind(n,this),r+=".delegateEvents"+this.cid,""===o?this.$el.on(r,n):this.$el.on(r,o,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(t){this.options&&(t=a.extend({},a.result(this,"options"),t)),a.extend(this,a.pick(t,k)),this.options=t},_ensureElement:function(){if(this.el)this.setElement(a.result(this,"el"),!1);else{var e=a.extend({},a.result(this,"attributes"));this.id&&(e.id=a.result(this,"id")),this.className&&(e["class"]=a.result(this,"className"));var n=t.$("<"+a.result(this,"tagName")+">").attr(e);this.setElement(n,!1)}}}),t.sync=function(e,n,i){var r=C[e];a.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:r,dataType:"json"};if(i.url||(o.url=a.result(n,"url")||H()),null!=i.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(o.contentType="application/json",o.data=JSON.stringify(i.attrs||n.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),i.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){o.type="POST",i.emulateJSON&&(o.data._method=r);var s=i.beforeSend;i.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",r),s?s.apply(this,arguments):void 0}}"GET"===o.type||i.emulateJSON||(o.processData=!1),"PATCH"!==o.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=i.xhr=t.ajax(a.extend(o,i));return n.trigger("request",n,l,i),l};var C={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var S=t.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},$=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,M=/\*\w+/g,E=/[\-{}\[\]+?.,\\\^$|#\s]/g;a.extend(S.prototype,l,{initialize:function(){},route:function(e,n,i){a.isRegExp(e)||(e=this._routeToRegExp(e)),a.isFunction(n)&&(i=n,n=""),i||(i=this[n]);var r=this;return t.history.route(e,function(o){var s=r._extractParameters(e,o);i&&i.apply(r,s),r.trigger.apply(r,["route:"+n].concat(s)),r.trigger("route",n,s),t.history.trigger("route",r,n,s)}),this},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=a.result(this,"routes");for(var t,e=a.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(E,"\\$&").replace($,"(?:$1)?").replace(T,function(t,e){return e?t:"([^/]+)"}).replace(M,"(.*?)"),RegExp("^"+t+"$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return a.map(n,function(t){return t?decodeURIComponent(t):null})}});var L=t.History=function(){this.handlers=[],a.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},A=/^[#\/]|\s+$/g,I=/^\/+|\/+$/g,N=/msie [\w.]+/,P=/\/$/;L.started=!1,a.extend(L.prototype,l,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var n=this.root.replace(P,"");t.indexOf(n)||(t=t.substr(n.length))}else t=this.getHash();return t.replace(A,"")},start:function(e){if(L.started)throw Error("Backbone.history has already been started");L.started=!0,this.options=a.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),i=document.documentMode,r=N.exec(navigator.userAgent.toLowerCase())&&(!i||7>=i);this.root=("/"+this.root+"/").replace(I,"/"),r&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var o=this.location,s=o.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&s&&o.hash&&(this.fragment=this.getHash().replace(A,""),this.history.replaceState({},document.title,this.root+this.fragment+o.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),L.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash()),void 0)},loadUrl:function(t){var e=this.fragment=this.getFragment(t),n=a.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0});return n},navigate:function(t,e){if(!L.started)return!1;if(e&&e!==!0||(e={trigger:e}),t=this.getFragment(t||""),this.fragment!==t){this.fragment=t;var n=this.root+t;if(this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}e.trigger&&this.loadUrl(t)}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),t.history=new L;var D=function(t,e){var n,i=this;n=t&&a.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},a.extend(n,i,e);var r=function(){this.constructor=n};return r.prototype=i.prototype,n.prototype=new r,t&&a.extend(n.prototype,t),n.__super__=i.prototype,n};p.extend=m.extend=S.extend=x.extend=L.extend=D;var H=function(){throw Error('A "url" property or function must be specified')},O=function(t,e){var n=e.error;e.error=function(i){n&&n(t,i,e),t.trigger("error",t,i,e)}}}.call(n),n.Backbone}),define("libs/etch",["libs/backbone"],function(e){"use strict";function n(t){var e=t.target.dataset.value;return null==e&&($target=$(t.target),e=$target.parent()[0].dataset.value),e}var i={},r={},o={},s={};return s.VERSION="0.6.2",s.config={selector:".editable",buttonClasses:{"default":["save"],all:["bold","italic","underline","unordered-list","ordered-list","link","clear-formatting","save"],title:["bold","italic","underline","save"]}},i.Editor=e.Model,r.Editor=e.View.extend({initialize:function(){this.$el=$(this.el),_.bindAll(this,"changeButtons","changePosition","changeEditable","insertImage","_editableModelChanged"),this.model.bind("change:buttons",this.changeButtons),this.model.bind("change:position",this.changePosition),this.model.bind("change:editable",this.changeEditable),this.model.bind("caretUpdated",this._caretUpdated,this),this.model.on("change:editableModel",this._editableModelChanged),this._editableModelChanged(this.model,this.model.get("editableModel")),this.changeEditable()},events:{"click .etch-bold":"toggleBold","click .etch-italic":"toggleItalic","click .etch-underline":"toggleUnderline","click .etch-heading":"toggleHeading","click .etch-unordered-list":"toggleUnorderedList","click .etch-justify-left":"justifyLeft","click .etch-justify-center":"justifyCenter","click .etch-justify-right":"justifyRight","click .etch-ordered-list":"toggleOrderedList","click .etch-link":"toggleLink","click .etch-image":"getImage","click .etch-save":"save","click .etch-clear-formatting":"clearFormatting",'click [data-option="fontSize"]':"setFontSize",'click [data-option="fontFamily"]':"setFontFamily"},_editableModelChanged:function(t,e){null!=this._lastEditableModel&&this._lastEditableModel.off(null,null,this),this._lastEditableModel=e,e.on("change:size",this._fontSizeChanged,this)},_caretUpdated:function(){var e=$(t(window)),n=e.attr("color"),i=e.attr("face");n=n||e.parents("font").attr("color")||"#333",i=i||e.parents("font").attr("face")||"Helvetica Neue",i&&(i=i.split(",")[0]),this.$fontFamilyReadout.text(i),this.$colorChooser.spectrum("set",n)},changeEditable:function(){this.setButtonClass()},setButtonClass:function(){var t=this.model,e=t.get("editable").attr("data-button-class")||"default";t.set({buttons:s.config.buttonClasses[e]})},_fontSizeChanged:function(t,e){this.$fontSizeReadout.text(e)},changeButtons:function(){console.log("Change btns"),this.$el.empty();var t=this,e=this.model.get("buttons");if(!e.length)return $(this.el).hide(),void 0;var n=t.$el;_.each(this.model.get("buttons"),function(e){if("<group>"==e)n=s.groupElFactory(),t.$el.append(n);else if("</group>"==e)n=t.$el;else{var i=s.buttonElFactory(e);n.append(i)}}),$(this.el).show("fast");var i=this.$el.find(".color-chooser");if(i.length>0){var r="333";i.spectrum({color:"#"+r,showSelectionPalette:!0,localStorageKey:"strut.fontColorChooser",showPalette:!0,showInitial:!0,showInput:!0,palette:[],clickoutFiresChange:!0,theme:"sp-dark",move:function(t){document.execCommand("foreColor",!1,t.toHexString())}});var o=function(t){t.preventDefault()};$(".sp-replacer").mousedown(o),$(".sp-container").mousedown(o),i.mousedown(o),i.find("div").css("backgroundColor","#"+r)}var a=this.$el.find(".dropdown-toggle");a.dropdown(),this.$fontSizeReadout=this.$el.find(".fontSizeReadout"),this.$colorChooser=i,this.$fontFamilyReadout=this.$el.find(".fontFamilyBtn > .text")},changePosition:function(){var t=this.model.get("position");this.$el.animate({top:t.y,left:t.x},{queue:!1,duration:300})},wrapSelection:function(t,e){var n=t===Range?t:t.getRangeAt(0),i=document.createElement(e);n.surroundContents(i)},clearFormatting:function(t){t.preventDefault(),document.execCommand("removeFormat",!1,null)},setFontFamily:function(t){t.preventDefault();var e=n(t);document.execCommand("fontName",!1,e),e=e.substr(e.indexOf("'")+1,e.lastIndexOf("'")-1),this.$el.find(".fontFamilyBtn .text").text(e)},setFontSize:function(t){var e=this.model.get("editableModel"),i=n(t);e.set("size",i|=0),this.$el.find(".fontSizeBtn .text").text(i)},toggleBold:function(t){t.preventDefault(),document.execCommand("bold",!1,null)},toggleItalic:function(t){t.preventDefault(),document.execCommand("italic",!1,null)},toggleUnderline:function(t){t.preventDefault(),document.execCommand("underline",!1,null)},toggleHeading:function(t){t.preventDefault();var e=window.getSelection().getRangeAt(0),n=e.commonAncestorContainer.parentElement;if($(n).is("h3"))return $(n).replaceWith(n.textContent),void 0;var i=document.createElement("h3");e.surroundContents(i)},urlPrompt:function(t){var e=prompt("Enter a url","http://");/^((http|https)...)/.test(e)?t(e):t("http://"+e)},toggleLink:function(t){t.preventDefault();var e=window.getSelection().getRangeAt(0);"A"===e.startContainer.parentNode.tagName||"A"===e.endContainer.parentNode.tagName?document.execCommand("unlink",!1,null):this.urlPrompt(function(t){document.execCommand("createLink",!1,t)})},toggleUnorderedList:function(t){t.preventDefault(),document.execCommand("insertUnorderedList",!1,null)},toggleOrderedList:function(t){t.preventDefault(),document.execCommand("insertOrderedList",!1,null)},justifyLeft:function(t){t.preventDefault(),document.execCommand("justifyLeft",!1,null)},justifyCenter:function(t){t.preventDefault(),document.execCommand("justifyCenter",!1,null)},justifyRight:function(t){t.preventDefault(),document.execCommand("justifyRight",!1,null)},getImage:function(t){t.preventDefault(),this.startUploader(this.insertImage)},startUploader:function(t){var e=new i.ImageUploader,n=new r.ImageUploader({model:e});e._imageCallback=function(e){n.startCropper(e,t)},this._savedRange=window.getSelection().getRangeAt(0),$("body").append(n.render().el)},insertImage:function(t){var e=window.getSelection();e.removeAllRanges(),e.addRange(this._savedRange);var n={editable:this.model.get("editable"),editableModel:this.model.get("editableModel")};_.extend(n,t);var o=new i.EditableImage(n),s=new r.EditableImage({model:o});this._savedRange.insertNode($(s.render().el).addClass("etch-float-left")[0])},save:function(t){t.preventDefault();var e=this.model.get("editableModel");e.trigger("save")}}),_.extend(s,{models:i,views:r,collections:o,triggerCaret:function(){var t=$(".etch-editor-panel").data("model");t.trigger("caretUpdated")},editableInit:function(t,e){t.stopPropagation();var n=t.target||t.srcElement,o=$(n).etchFindEditable(),a=$(".etch-editor-panel"),l=a.data("model");if(a.size())o[0]!==l.get("editable")[0]?(l.set({editable:o,editableModel:this.model}),a.css("display","block")):a.css("display","block");else{a=$('<div class="etch-editor-panel">');var c={editable:o,editableModel:this.model};document.body.appendChild(a[0]),a.etchInstantiate({classType:"Editor",attrs:c}),l=a.data("model")}try{document.execCommand("StyleWithCSS",!1,!1)}catch(u){if("Invalid argument."!==u.message)throw u}if(i.EditableImage){var h=o.find("img");if(h.size()){var d={editable:o,editableModel:this.model};h.each(function(){var t=$(this);if(!t.data("editableImageModel")){var e=new i.EditableImage(d);new r.EditableImage({model:e,el:this,tagName:this.tagName}),t.data("editableImageModel",e)}})}}$("body").bind("mousedown.editor",function(t){var e=t.target||t.srcElement;$(e).not(".colorpicker *, .etch-editor-panel, .etch-editor-panel *, .etch-image-tools, .etch-image-tools *").size()&&(a.css("display","none"),i.EditableImage&&(o.find("img").unbind("mouseenter"),$(s.config.selector+" img").data("editableImageModel",!1)),$(this).unbind("mousedown.editor"))}),this.model.trigger("change:size",this.model,this.model.get("size"),{}),l.set({position:{x:t.pageX-15,y:e||t.pageY-80}})}}),$.fn.etchInstantiate=function(t,e){return this.each(function(){var n=$(this);t||(t={});var o={el:this,attrs:{}};_.extend(o,t);var s=new i[o.classType](o.attrs,o);if(_.isFunction(r[o.classType]))var a=new r[o.classType]({model:s,el:this,tagName:this.tagName});n.data({model:s}),n.data({view:a}),_.isFunction(e)&&e({model:s,view:a})})},s.buttonElFactory=function(t){return $('<a href="#" class="etch-editor-button etch-'+t+'" title="'+t.replace("-"," ")+'"><span></span></a>')},$.fn.etchFindEditable=function(){var t=$(this);return t.is(s.config.selector)?t:t.closest(s.config.selector)},s}),define("css",[],function(){function t(t){if("undefined"==typeof document)return e(t),void 0;if(!isOptimized){var n=document.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=t,document.getElementsByTagName("head")[0].appendChild(n)}}function e(t){var e=i.readFileSync("app/"+t,"utf8");i.appendFileSync(r,e+"\n")}var n=void 0;if("undefined"!=typeof process&&"undefined"!=typeof nodeRequire){var i=nodeRequire("fs");n=nodeRequire("path");var r=null}return{load:function(e,o,s){n&&!r&&(i.existsSync("dist")||i.mkdirSync("dist"),i.existsSync("dist/styles")||i.mkdirSync("dist/styles"),r="dist/styles/built.css"),t(e),s(null)}}}),define("strut/etch_extension/main",["libs/etch","css!styles/etch_extension/EtchOverrides.css"],function(t){"use strict";_.extend(t.config.buttonClasses,{"default":["<group>","bold","italic","</group>","<group>","unordered-list","ordered-list","</group>","<group>","justify-left","justify-center","</group>","<group>","link","</group>","font-family","font-size","<group>","color","</group>","<group>","clear-formatting","</group>"]});var e=["link","clear-formatting","ordered-list","unordered-list"];return t.buttonElFactory=function(t){var n={button:t,title:t.replace("-"," "),display:t.substring(0,1).toUpperCase()};switch(e.indexOf(t)>-1&&(n.display=""),t){case"font-size":return JST["strut.etch_extension/fontSizeSelection"](n);case"font-family":return JST["strut.etch_extension/fontFamilySelection"](n);case"color":return JST["strut.etch_extension/colorChooser"](n);default:return-1!==t.indexOf("justify")?(n.icon=t.substring(t.indexOf("-")+1,t.length),JST["strut.etch_extension/align"](n)):JST["strut.etch_extension/defaultButton"](n)}},t.groupElFactory=function(){return $('<div class="btn-group">')},{initialize:function(){}}}),define("tantaman/web/widgets/FileBrowser",["libs/backbone","css!styles/widgets/fileBrowser.css"],function(t){return t.View.extend({events:{destroyed:"dispose","click li[data-filename]":"_fileClicked","click button.close":"_deleteClicked","dblclick li[data-filename]":"_fileChosen"},className:"fileBrowser",initialize:function(){this.render=this.render.bind(this),this.storageInterface.on("change:currentProvider",this.render),this.template=JST["tantaman.web.widgets/FileBrowser"],this.renderListing=this.renderListing.bind(this)},render:function(){return this.$el.html('<div class="browserContent">'),this.storageInterface.providerReady(this.$el)?this.renderListing():this.storageInterface.activateProvider(this.$el,this.renderListing),this},dispose:function(){this.storageInterface.off(null,null,this)},_fileClicked:function(t){this.$fileName.val(t.currentTarget.dataset.filename),this.$el.find(".active").removeClass("active"),$(t.currentTarget).addClass("active")},_fileChosen:function(t){this.$el.trigger("fileChosen",t.currentTarget.dataset.fileName)},_deleteClicked:function(t){var e=$(t.currentTarget),n=e.parent().parent();return this.storageInterface.remove(n.attr("data-filename")),n.remove(),t.stopPropagation(),!1},renderListing:function(){var t=this;this.storageInterface.listPresentations("/",function(e,n){n?t.$el.find(".browserContent").html(n):t.$el.find(".browserContent").html(t.template({files:e})),t.$fileName=t.$el.find(".fileName")})},fileName:function(){return this.$fileName.val()},constructor:function(e,n){this.storageInterface=e,this.editorModel=n,t.View.prototype.constructor.call(this)}})}),define("strut/storage/view/StorageModal",["libs/backbone","tantaman/web/widgets/FileBrowser","css!styles/storage/storageModal.css"],function(t,e){return t.View.extend({className:"storageModal modal hide",events:{"click a[data-provider]":"_providerSelected","click .ok":"_okClicked",destroyed:"dispose"},initialize:function(){this.storageInterface=this.options.storageInterface,this.editorModel=this.options.editorModel,delete this.options.storageInterface,delete this.options.editorModel,this.template=JST["strut.storage/StorageModal"],this.storageInterface.on("change:providers",this.render,this),this.storageInterface.on("change:currentProvider",this._providerChanged,this),this.fileBrowser=new e(this.storageInterface,this.editorModel)},title:function(t){this.$el.find(".title").html(t)},dispose:function(){this.storageInterface.off(null,null,this)},render:function(){var t=this.storageInterface.providerNames();this.$el.html(this.template({title:this.__title(),tabs:t})),this._providerChanged(),this.$el.find(".tabContent").append(this.fileBrowser.render().$el)},show:function(t,e){this.actionHandler=t,this.title(e),this.$el.modal("show"),this.fileBrowser.render()},_providerChanged:function(){this.$lastProviderTab&&this.$lastProviderTab.removeClass("active"),this.$lastProviderTab=this.$el.find('[data-provider="'+this.storageInterface.currentProviderId()+'"]').parent(),this.$lastProviderTab.addClass("active")},__title:function(){return"none"},_okClicked:function(){if(this.actionHandler){if(""==this.fileBrowser.fileName())return;var t=this;this.actionHandler(this.storageInterface,this.editorModel,this.fileBrowser.fileName(),function(e,n){n||t.$el.modal("hide")})}},_providerSelected:function(t){this.storageInterface.selectProvider(t.target.dataset.provider)},constructor:function(){t.View.prototype.constructor.apply(this,arguments)}})}),define("strut/storage/model/ActionHandlers",[],function(){return{save:function(t,e,n,i){t.savePresentation(n,e.exportPresentation(n),i)},open:function(t,e,n,i){t.savePresentation(e.fileName(),e.exportPresentation(e.fileName()),function(){t.load(n,function(t,n){n?(console.log(n),console.log(n.stack)):e.importPresentation(t),i(null,n)})})},new_:function(t){t.newPresentation()}}}),define("tantaman/web/widgets/ErrorModal",[],function(){return{show:function(t){console.log(t)}}}),define("strut/storage/view/SaveMenuItem",["libs/backbone","../model/ActionHandlers","tantaman/web/widgets/ErrorModal","lang"],function(t,e,n,i){return t.View.extend({tagName:"li",events:{click:"save"},constructor:function(e,n,i){t.View.prototype.constructor.call(this),this.model=n,this.saveAsModal=e,this.storageInterface=i},save:function(){fileName=this.model.fileName(),null==fileName?this.saveAsModal.show(e.save,i.save_as):e.save(this.storageInterface,this.model,fileName,n.show)},render:function(){return this.$el.html("<a>"+i.save+"</a>"),this}})}),define("tantaman/web/storage/StorageProvidersWrapper",["libs/backbone"],function(t){"use strict";function e(t){this.registry=t,this.registry.on("registered:tantaman.web.StorageProvider",this._providerRegistered,this),this._getProviders(),this._updateCurrentProvider()}return _.extend(e.prototype,t.Events,{_currentProviderId:null,_providerRegistered:function(t){var e=t.service();this.providers[e.id]=e,null==this._currentProviderId&&(this._currentProviderId=e.id),this.trigger("change:providers.push",this.providers,e),this.trigger("change:providers",this.providers,e)},_getProviders:function(){var t=this.registry.get("tantaman.web.StorageProvider"),e={};t.forEach(function(t){var n=t.service();e[n.id]=n,null==this._currentProviderId&&(this._currentProviderId=n.id)},this),this.providers=e},selectProvider:function(t){t!=this._currentProviderId&&(this.currentProvider().bg(),this._currentProviderId=t,this.trigger("change:currentProvider"))},providerNames:function(){var t=[];for(var e in this.providers)t.push({name:this.providers[e].name,id:e});return t},currentProvider:function(){return this.providers[this._currentProviderId]},_updateCurrentProvider:function(){window.sessionMeta.lastProvider&&(this._currentProviderId=window.sessionMeta.lastProvider)}}),e}),define("strut/storage/model/StorageInterface",["tantaman/web/storage/StorageProvidersWrapper"],function(t){"use strict";function e(e){this._providers=new t(e)}return e.prototype={providerNames:function(){return this._providers.providerNames()},providerReady:function(t){return this.currentProvider().ready(t)},activateProvider:function(t,e){this.currentProvider().activate(t,e)},selectProvider:function(t){this._providers.selectProvider(t)},currentProvider:function(){return this._providers.currentProvider()},currentProviderId:function(){return this._providers._currentProviderId},on:function(){return this._providers.on.apply(this._providers,arguments)},store:function(t,e,n){return this.currentProvider().setContents(t,e,n),this},load:function(t,e){return this.currentProvider().getContents(t,e),this},remove:function(t,e){return this.currentProvider().rm(t,e),this},list:function(t,e){return this.currentProvider().ls(t,/.*/,e),this},listPresentations:function(t,e){return this.currentProvider().ls(t,/.*\.strut$/,e),this},savePresentation:function(t,e,n){var i=t.indexOf(".strut");i+".strut".length!=t.length&&(t+=".strut"),window.sessionMeta.lastPresentation=t,this.store(t,e,n)}},e}),define("tantaman/web/widgets/MenuItem",[],function(){function t(t){this.$el=$("<li><a>"+t.title+" "+(t.hotkey?'<span class="label pull-right">'+t.hotkey+"</span>":"")+"</a></li>"),this.$el.click(function(){t.modal?t.modal.show(t.handler,t.title):t.handler(t.model)})}return t.prototype={render:function(){return this}},t}),define("strut/storage/main",["./view/StorageModal","./view/SaveMenuItem","./model/StorageInterface","./model/ActionHandlers","tantaman/web/widgets/MenuItem","lang"],function(t,e,n,i,r,o){"use strict";var s=null,a=null,l=$("#modals"),c={createMenuItems:function(n){var c=[];return null==a&&(a=new t({editorModel:n,storageInterface:s}),a.render(),l.append(a.$el)),c.push(new r({title:o.new_,handler:i.new_,model:n})),c.push(new r({title:o.open,modal:a,handler:i.open})),c.push(new e(a,n,s)),c.push(new r({title:o.save_as,modal:a,handler:i.save})),c.push({$el:$('<li class="divider"></li>'),render:function(){return this}}),c}};return{initialize:function(t){s=new n(t),t.register({interfaces:"strut.LogoMenuItemProvider"},c),t.register({interfaces:"strut.StorageInterface"},s)}}}),define("framework/ServiceCollection",["common/EventEmitter","lodash"],function(t,e){"use strict";function n(n,r,o){e.extend(this,new t),this._idToItem={},this._lookup=n.normalize(r),this._converter=o||i,this._registry=n,this._register(),this._populateItems()}var i=function(t){return t};n.toServiceConverter=function(t){return t.service()};var r=n.prototype=Object.create(Array.prototype);return r._register=function(){this._registry.on("registered",this._serviceRegistered,this),this._registry.on("deregistered",this._serviceDeregistered,this)},r._serviceDeregistered=function(t){t.matches(this._lookup)&&this._handleRemoval(item,t)},r._handleRemoval=function(t,e){var t=this._idToItem(e.serviceIdentifier());Array.isArray(t)||(t=[t]),t.forEach(function(n){var n=this.indexOf(t);this.splice(n,1),this.emit("deregistered",t,e,n)},this)},r._serviceRegistered=function(t){if(t.matches(this._lookup)){var e=this._converter(t);this._handleAddition(e,t)}},r._populateItems=function(){var t=this._registry.get(this._lookup);t.forEach(function(t){var e=this._converter(t);this._handleAddition(e,t)},this)},r._handleAddition=function(t,e){this._idToItem[e.serviceIdentifier()]=t,Array.isArray(t)?t.forEach(function(n){this.push(n),this.emit("registered",t,e,n)},this):(this.push(t),this.emit("registered",t,e,this.length-1))},r.dispose=function(){this._registry.off(null,null,this)},n}),define("common/collections/LinkedList",[],function(){var t;return t=function(){function t(){this.head=this.tail=null,this.length=0}return t.prototype.push=function(t){var e;return e={prev:null,next:null,value:t},null!=this.tail?(this.tail.next=e,e.prev=this.tail,this.tail=e):this.head=this.tail=e,++this.length,this},t.prototype.pop=function(){var t;if(null==this.tail)throw"List is empty";return t=this.tail.value,this.tail===this.head?this.tail=this.head=null:(this.tail=this.tail.prev,this.tail.next=null),--this.length,t},t.prototype.shift=function(){var t;if(null==this.head)throw"List is empty";return t=this.head.value,this.tail===this.head?this.tail=this.head=null:(this.head=this.head.next,this.head.prev=null),--this.length,t},t.prototype.unshift=function(t){var e;return e={prev:null,next:null,value:t},null!=this.head?(this.head.prev=e,e.next=this.head,this.head=e):this.head=this.tail=e,++this.length,this},t.prototype.first=function(){return this.head.value},t.prototype.last=function(){return this.tail.value},t.prototype.forEach=function(t){var e,n,i;for(e=this.head,n=0,i=[];null!==e;)t(e.value,n++,this),i.push(e=e.next);return i},t}()}),define("tantaman/web/undo_support/CmdList",["common/EventEmitter","common/collections/LinkedList"],function(t,e){var n=function(){function n(n){this.size=n,this.actions=new e,this.cursor=null,this.undoCount=0,_.extend(this,new t)}return n.prototype.clear=function(){this.cursor=null,this.undoCount=null,this.actions=new e},n.prototype.push=function(t){var e;return this.actions.length-this.undoCount<this.size?this.undoCount>0?(e={prev:null,next:null,value:t},this.cursor?(e.prev=this.cursor,this.cursor.next.prev=null,this.cursor.next=e,this.actions.length+=1,this.actions.length=this.actions.length-this.undoCount):(this.actions.head=e,this.actions.length=1),this.actions.tail=e,this.undoCount=0,this.cursor=null):(this.actions.push(t),this.cursor=null):(this.actions.shift(),this.actions.push(t)),this.emit("updated"),this},n.prototype.pushdo=function(t){var e=t.do();return this.push(t),e},n.prototype.undoName=function(){var t;return this.undoCount<this.actions.length?(t=this.cursor||this.actions.tail,null!=t?t.value.name:""):""},n.prototype.redoName=function(){var t;return this.undoCount>0?(t=null==this.cursor?this.actions.head:this.cursor.next,null!=t?t.value.name:""):""},n.prototype.undo=function(){return this.undoCount<this.actions.length&&(null==this.cursor&&(this.cursor=this.actions.tail),this.cursor.value.undo(),this.cursor=this.cursor.prev,++this.undoCount,this.emit("updated")),this},n.prototype.redo=function(){return this.undoCount>0&&(this.cursor=null==this.cursor?this.actions.head:this.cursor.next,this.cursor.value["do"](),--this.undoCount,this.emit("updated")),this},n}();return n}),define("tantaman/web/undo_support/CmdListFactory",["./CmdList"],function(t){"use strict";var e={};return{create:function(e){return e=e||{},new t(e.size||20)},managedInstance:function(t,n){var i=e[t];return i||(i=this.create(n),e[t]=i),i}}}),define("tantaman/web/widgets/UndoRedoMenuItem",[],function(){"use strict";function t(t){this.$el=$("<li><a>"+t.title+'<span class="label pull-right">'+t.hotkey+"</span></a>"+"</li>"),this.options=t,this.$el.click(this._perform.bind(this)),this._sub=t.cmdList.on("updated",this._listUpdated,this)}return t.prototype={render:function(){return this},_listUpdated:function(){var t=this.options.cmdList[this.options.action+"Name"]();if(t){var e=this.$el.find(".label");e.html(t),e.removeClass("dispNone")}else{var e=this.$el.find(".label");e.addClass("dispNone")}},dispose:function(){this._sub.dispose()},_perform:function(){this.options.handler()}},t}),define("strut/logo_button/main",["framework/ServiceCollection","tantaman/web/widgets/MenuItem","tantaman/web/undo_support/CmdListFactory","tantaman/web/widgets/UndoRedoMenuItem"],function(t,e,n,i){"use strict";function r(t){return"undo"==t.meta().action||"redo"==t.meta().action?new i({cmdList:s,action:t.meta().action,handler:t.service(),hotkey:t.meta().hotkey,title:t.meta().title}):new e({title:t.meta().title,handler:t.service(),hotkey:t.meta().hotkey})}var o,s=n.managedInstance("editor"),a={createMenuItems:function(){var t=[];return o.forEach(function(e){t.push(r(e)),"redo"==e.meta().action&&t.push({$el:$('<li class="divider"></li>'),render:function(){return this}})}),t.push({$el:$('<li class="divider"></li>'),render:function(){return this}}),t}};return{initialize:function(e){o=new t(e,"strut.editor.glob.action"),e.register({interfaces:"strut.LogoMenuItemProvider"},a)}}}),define("tantaman/web/widgets/Dropdown",["libs/backbone","css!styles/widgets/widgets.css"],function(t){function e(t,e,n){this.$el=$('<div class="dropdown btn-group">'),this.el=this.$el[0],n&&n.class&&this.$el.addClass(n.class),this._template=e;
var i=this;this.$el.on("destroyed",function(){i.dispose()}),this._model=t,t.on&&t.on("change",this._render,this),this._over=this._over.bind(this),this._selected=this._selected.bind(this),this._out=this._out.bind(this),this.$el.on("mouseover","li > a",this._over),this.$el.on("click","li > a",this._selected),this.$el.on("mouseout",this._out)}return e.prototype={render:function(){var t;return t=this._model.attributes?this._model.attributes:this._model,this.$el.html(this._template(t)),this},_over:function(t){this.trigger("over",t)},_out:function(t){this.trigger("out",t)},_selected:function(t){this.trigger("selected",t)},dispose:function(){this._model.off&&this._model.off(null,null,this),this.off()}},_.extend(e.prototype,t.Events),e}),define("strut/deck/Utils",[],function(){return{slideBackground:function(t,e,n){var i;return t&&(i="defaultbg"!=t.get("background")?t.get("background")||e.slideBackground():e.get("surface")),i||(i=e.slideBackground()),i==e.get("surface")&&n?"defaultbg":i}}}),define("strut/themes/BackgroundProvider",["tantaman/web/widgets/Dropdown","strut/deck/Utils"],function(t,e){function n(e,n,i,r,o){this._view=new t(e,JST["strut.themes/BackgroundChooserDropdown"],{"class":"iconBtns group-dropdown"}),this._editorModel=n,this._selector=i,this._attr=r,this._view.on("over",this._previewBackground,this),this._view.on("out",this._restoreBackground,this),this._view.on("selected",this._setBackground,this),this._classes=o}return n.prototype={view:function(){return this._view},_previewBackground:function(t){var e=$(this._selector),n=t.currentTarget.dataset["class"];"defaultbg"==n&&"Background"==this._attr&&(n=this._editorModel.deck().slideSurface()),this._swapBg(e,n)},_setBackground:function(t){var e=this._attr.substring(0,1).toLowerCase()+this._attr.substring(1);this._editorModel.deck().set(e,t.currentTarget.dataset["class"]||"defaultbg")},_restoreBackground:function(){var t;"Background"==this._attr&&(t=e.slideBackground(this._editorModel.activeSlide(),this._editorModel.deck())),t=t||this._editorModel.deck()["slide"+this._attr]();var n=$(this._selector);this._swapBg(n,t)},_swapBg:function(t,e){t.removeClass(),t.addClass(this._classes+" "+e)},dispose:function(){this._view.dispose()}},n}),define("strut/themes/AvailableBackgrounds",["css!styles/strut.themes/backgroundClasses.css"],function(){return{title:"background",backgrounds:[{klass:"solid-bg-black",description:"Black"},{klass:"solid-bg-light",description:"Light"},{klass:"solid-bg-smoke",description:"Smoke"},{klass:"solid-bg-orange",description:"Orange"},{klass:"solid-bg-yellow",description:"Yellow"},{klass:"solid-bg-grass",description:"Grass"},{klass:"solid-bg-darkgreen",description:"Dark Green"},{klass:"solid-bg-sky",description:"Sky"},{klass:"solid-bg-lavender",description:"Lavender"},{klass:"solid-bg-purple",description:"Purple"},{klass:"solid-bg-salmon",description:"Salmon"}]}}),define("strut/themes/AvailableSurfaces",["css!styles/strut.themes/surfaceClasses.css"],function(){return{title:"surface",backgrounds:[{klass:"surf-grad-bg-black"},{klass:"surf-grad-bg-light"},{klass:"surf-grad-bg-smoke"},{klass:"surf-grad-bg-orange"},{klass:"surf-grad-bg-yellow"},{klass:"surf-grad-bg-grass"},{klass:"surf-grad-bg-darkgreen"},{klass:"surf-grad-bg-sky"},{klass:"surf-grad-bg-lavender"},{klass:"surf-grad-bg-purple"},{klass:"surf-grad-bg-salmon"}]}}),define("tantaman/web/widgets/CodeEditor",["libs/backbone"],function(t){return t.View.extend({className:"CodeEditor modal hide",events:{"click .ok":"saveCode","click .cancel":"hide",hidden:"_hidden"},initialize:function(){this.template=JST["tantaman.web.widgets/CodeEditor"]},saveCode:function(){var t=this.$input.val();this._saveCb(t)},show:function(t,e){e&&this.$input.val(e),this._saveCb=t,this.$el.modal("show")},hide:function(){this.$el.modal("hide")},_hidden:function(){this.$input.val("")},render:function(){return this.$el.html(this.template(this.options)),this.$el.addClass(this.options.class),this.$input=this.$el.find(".codeInput"),this.$el.modal({show:!1}),this},constructor:function(){t.View.prototype.constructor.apply(this,arguments)}})}),define("strut/themes/Button",["libs/backbone"],function(t){"use strict";return t.View.extend({className:"btn btn-plast",tagName:"a",events:{click:"_clicked"},initialize:function(){},_clicked:function(){this._disabled||this.options.cb()},render:function(){return this.$el.html('<i class="'+this.options.icon+' icon-white"></i>'+this.options.name),this},disable:function(){this.$el.addClass("disabled"),this._disabled=!0},enable:function(){this._disabled=!1,this.$el.removeClass("disabled")},constructor:function(){t.View.prototype.constructor.apply(this,arguments)}})}),define("tantaman/web/css_manip/CssManip",[],function(){var t=/\.-?[_a-zA-Z]+[_a-zA-Z0-9-]*/g;return{createStyleElem:function(t){var e=document.createElement("style");return e.type="text/css",t.id&&(e.id=t.id),e},getStyleElem:function(t){var e=document.getElementById(t.id);return!e&&t.create&&(e=this.createStyleElem(t),this.appendStyleElem(e)),e},appendStyleElem:function(t){document.getElementsByTagName("head")[0].appendChild(t)},extractClasses:function(e){for(var n=e.rules||e.cssRules,i={},r=0;n.length>r;++r){var o=n[r],s=o.selectorText.match(t);if(s)for(var a=0;s.length>a;++a){var l=s[a].substring(1);i[l]=!0}}return i}}}),function(t,e){"use strict";function n(t){var e=Object.keys(t),n=[];return e.forEach(function(e){if("^"==e[0])throw"rules with ^ as their first character are currently unsupported.";var i={regex:RegExp("^("+e+")"),action:t[e]};n.push(i)}),n}function i(t,e){t||(t={}),e||(e={});var n=e.initial;if(n)for(var i in t)n[i]=t[i];else e.initial=t;return e}function r(t,e,o){"string"==typeof t&&(t=new r.StringStream(t)),this._stream=t,this._currString="",this._state="initial",e=i(e,o),this._rules={};for(var s in e)this._rules[s]=n(e[s])}r.EOF={toString:function(){return"eof"}},r.IGNORE={toString:function(){return"ignored"}},r.NO_MATCH={msg:"NO SUITABLE CONTINUOUS MATCH"},r.StringStream=function(t){this._string=t},r.StringStream.prototype={nextString:function(){var t=this._string;return this._string=e,t}},r.prototype={lex:function(){var t=this._getInput();if(!(t||""!=this._currString&&this._currString))return r.EOF;this._currString+=t;for(var e,n,i=this._rules[this._state];!e;){for(var o=0;i.length>o;++o){var s=i[o],a=s.regex.exec(this._currString);a&&(!e||a[0].length>e[0].length)&&(e=a,n=o)}if(!e){var t=this._getInput(!0);if(!t)throw r.NO_MATCH;this._currString+=t}}this._currString=this._currString.substring(e[0].length);var s=i[n];if("function"==typeof s.action){var l=s.action(e[0],this);return l===r.IGNORE?this.lex():l}return s.action===r.IGNORE?this.lex():s.action},_getInput:function(t){return!this._currString||""==this._currString||t?this._stream.nextString():""},state:function(t){return t?(this._state=t,e):this._state}},"function"==typeof define?define("lexed",[],function(){return r}):t.Lexed=r}(this),define("strut/themes/StylesheetPreProcessor",["lexed"],function(t){var e={initial:{"/\\*":function(t,e){return e.state("comment"),t},"@[A-Za-z\\-]+":function(t){return t},"\\s+":function(t){return t},"{":function(t,e){return e.state("ruleDefinition"),t},",":function(t){return t},"[^{\\s\\/,@]+":function(t,e){return e.state("ruleName"),{text:t}}},ruleName:{"{":function(t,e){return e.state("ruleDefinition"),t},",":function(t,e){return e.state("initial"),t},"[^{,]+":function(t){return t}},comment:{"\\*/":function(t,e){return e.state("initial"),t},"\\*":function(t){return t},"[^*]":function(t){return t}},ruleDefinition:{"/\\*":function(t,e){return e.state("comment"),t},"[^}]":function(t){return t},"}":function(t,e){return e.state("initial"),t}}};return{beforeSave:function(n){for(var i="",r=new t(n,null,e);(token=r.lex())!=t.EOF;)i+=token.text?".slideContainer "+token.text:token;return i},beforeEdit:function(t){return t?t.replace(/.slideContainer /g,""):""}}}),define("strut/themes/StylesheetProvider",["tantaman/web/widgets/CodeEditor","./Button","tantaman/web/css_manip/CssManip","css!styles/strut.themes/stylesheetEditor.css","./StylesheetPreProcessor"],function(t,e,n,i,r){function o(t){this._cssEditor=s,this._editorModel=t,l.innerHTML=t.customStylesheet(),t.deck().on("change:customStylesheet",this._editorSheetChanged,this),this._button=new e({icon:"icon-edit",cb:this._launch.bind(this),name:"CSS"}),this._button.$el.addClass("iconBtns btn-grouped"),this._cssSaved=this._cssSaved.bind(this),c||(c=!0)}var s=new t({"class":"stylesheetEditor",title:"Edit CSS",placeholder:".customText {\nfont-weight: bold;\n}"}),a="userStylesheet",l=n.getStyleElem({id:a,create:!0}),c=!1;return $("#modals").append(s.render().$el),o.prototype={view:function(){return this._button},_launch:function(){var t=this._editorModel.customStylesheet();this._cssEditor.show(this._cssSaved,r.beforeEdit(t))},_cssSaved:function(t){t=r.beforeSave(t),l.innerHTML=t,this._editorModel.customStylesheet(t),this._cssEditor.hide()},_editorSheetChanged:function(t,e){l.innerHTML=e},dispose:function(){this._editorModel.deck().off(null,null,this)}},o}),define("tantaman/web/widgets/PopoverTextbox",["libs/backbone"],function(t){return t.View.extend({events:{"click .ok":"_save","click .cancel":"hide",click:"_stopProp"},className:"popover",initialize:function(){this.hide=this.hide.bind(this),this.template=JST["tantaman.web.widgets/PopoverTextbox"]},show:function(t,e,n){console.log("Showing popover"),this._cb=e,this.$el.css(t),this.$el.css("display","block"),this.$input.val(n),this.$input.focus()},hide:function(){this.$el.css("display",""),this.$input.val("")},_save:function(t){t.stopPropagation(),this._cb(this.$input.val())},_stopProp:function(t){t.stopPropagation()},render:function(){return this.$el.html(this.template(this.options)),this.$input=this.$el.find("input"),this},remove:function(){t.View.prototype.remove.apply(this,arguments)},constructor:function(){t.View.prototype.constructor.apply(this,arguments)}})}),define("strut/themes/ClassEditor",["./Button","tantaman/web/widgets/PopoverTextbox"],function(t,e){function n(e){this._button=new t({icon:"icon-plus",cb:this._launch.bind(this),name:"Class"}),this._appended=!1,this._button.$el.addClass("iconBtns btn-grouped"),this._button.disable(),this._deck=e.deck(),this._popover=i;var n=this._deck.get("activeSlide");n&&this._activeSlideChanged(this._deck,n),this._deck.on("change:activeSlide",this._activeSlideChanged,this),this._classesSaved=this._classesSaved.bind(this)}var i=new e({title:"Classes: "});return i.render(),n.prototype={view:function(){return this._button},_activeSlideChanged:function(t,e){this._activeSlide&&this._activeSlide.off(null,null,this),this._activeSlide=e,this._activeSlide&&(this._activeSlide.on("change:activeComponent",this._activeComponentsChanged,this),this._activeComponentsChanged(e))},_activeComponentsChanged:function(){this._activeComponents=this._activeSlide.selected,this._activeComponents.length?this._button.enable():this._button.disable(),this._popover.hide()},_launch:function(){if(!this._appended){var t=$(".slideContainer");t.append(i.$el),this._appended=!0}this._activeComponents.length?this._popover.show({left:this._activeComponents[0].get("x"),top:this._activeComponents[0].get("y")},this._classesSaved,this._activeComponents[0].customClasses()):alert("Please, select some component first.")},_classesSaved:function(t){this._activeComponents.forEach(function(e){e.customClasses(t)}),this._popover.hide()},dispose:function(){this._activeSlide&&this._activeSlide.off(null,null,this),this._deck.off(null,null,this),i.$el.remove()}},n}),define("strut/themes/main",["./BackgroundProvider","./AvailableBackgrounds","./AvailableSurfaces","./StylesheetProvider","./ClassEditor"],function(t,e,n,i,r){"use strict";var o={create:function(n){return new t(e,n,".slideContainer","Background","slideContainer slideEditArea")}},s={create:function(e){return new t(n,e,".slideTable","Surface","slideTable")}},a={create:function(t){return new i(t)}},l={create:function(t){return new r(t)}};return{initialize:function(t){t.register({interfaces:"strut.ThemeProvider",meta:{modes:{"slide-editor":!0,"transition-editor":!0}}},o),t.register({interfaces:"strut.ThemeProvider",meta:{modes:{"transition-editor":!0}}},s),t.register({interfaces:"strut.ThemeProvider",meta:{modes:{"transition-editor":!0,"slide-editor":!0}}},a),t.register({interfaces:"strut.ThemeProvider",meta:{modes:{"transition-editor":!0,"slide-editor":!0}}},l)}}}),function(){function t(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!1),void 0):(t.attachEvent("on"+e,n),void 0)}function e(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return y[t.which]?y[t.which]:b[t.which]?b[t.which]:String.fromCharCode(t.which).toLowerCase()}function n(t,e){return t.sort().join(",")===e.sort().join(",")}function i(t,e){t=t||{};var n,i=!1;for(n in C)t[n]&&C[n]>e?i=!0:C[n]=0;i||($=!1)}function r(t,e,i,r,o){var s,a,l=[],u=i.type;if(!_[t])return[];for("keyup"==u&&c(t)&&(e=[t]),s=0;_[t].length>s;++s)a=_[t][s],a.seq&&C[a.seq]!=a.level||u==a.action&&("keypress"==u&&!i.metaKey&&!i.ctrlKey||n(e,a.modifiers))&&(r&&a.combo==o&&_[t].splice(s,1),l.push(a));return l}function o(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}function s(t,e,n){M.stopCallback(e,e.target||e.srcElement,n)||t(e,n)===!1&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.returnValue=!1,e.cancelBubble=!0)}function a(t,e,n){var o,a=r(t,e,n),l={},u=0,h=!1;for(o=0;a.length>o;++o)a[o].seq?(h=!0,u=Math.max(u,a[o].level),l[a[o].seq]=1,s(a[o].callback,n,a[o].combo)):h||$||s(a[o].callback,n,a[o].combo);n.type!=$||c(t)||i(l,u)}function l(t){"number"!=typeof t.which&&(t.which=t.keyCode);var n=e(t);if(n){if("keyup"==t.type&&S==n)return S=!1,void 0;"keydown"==t.type?M.pressed[n]=!0:"keyup"==t.type&&delete M.pressed[n],M.handleKey(n,o(t),t)}}function c(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function u(){clearTimeout(v),v=setTimeout(i,1e3)}function h(){if(!m){m={};for(var t in y)t>95&&112>t||y.hasOwnProperty(t)&&(m[y[t]]=t)}return m}function d(t,e,n){return n||(n=h()[t]?"keydown":"keypress"),"keypress"==n&&e.length&&(n="keydown"),n}function p(t,n,r,o){C[t]=0,o||(o=d(n[0],[]));var a,l=function(){$=o,++C[t],u()},c=function(n){s(r,n,t),"keyup"!==o&&(S=e(n)),setTimeout(i,10)};for(a=0;n.length>a;++a)f(n[a],n.length-1>a?l:c,o,t,a)}function f(t,e,n,i,o){k[t+":"+n]=e,t=t.replace(/\s+/g," ");var s,a,l,u=t.split(" "),h=[];if(u.length>1)return p(t,u,e,n),void 0;for(l="+"===t?["+"]:t.split("+"),s=0;l.length>s;++s)a=l[s],x[a]&&(a=x[a]),n&&"keypress"!=n&&w[a]&&(a=w[a],h.push("shift")),c(a)&&h.push(a);n=d(a,h,n),_[a]||(_[a]=[]),r(a,h,{type:n},!i,t),_[a][i?"unshift":"push"]({callback:e,modifiers:h,action:n,seq:i,level:o,combo:t})}function g(t,e,n){for(var i=0;t.length>i;++i)f(t[i],e,n)}for(var m,v,y={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},b={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},w={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},x={option:"alt",command:"meta","return":"enter",escape:"esc"},_={},k={},C={},S=!1,$=!1,T=1;20>T;++T)y[111+T]="f"+T;for(T=0;9>=T;++T)y[T+96]=T;t(document,"keypress",l),t(document,"keydown",l),t(document,"keyup",l);var M={bind:function(t,e,n){return t=t instanceof Array?t:[t],g(t,e,n),this},unbind:function(t,e){return M.bind(t,function(){},e)},trigger:function(t,e){return k[t+":"+e]&&k[t+":"+e]({},t),this},reset:function(){return _={},k={},this},stopCallback:function(t,e){return(" "+e.className+" ").indexOf(" mousetrap ")>-1?!1:"INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.contentEditable&&"true"==e.contentEditable},handleKey:a,pressed:{}};window.Mousetrap=M,"function"==typeof define&&define.amd&&define("libs/mousetrap",M)}(),define("strut/editor/GlobalEvents",["libs/mousetrap","libs/backbone"],function(t,e){"use strict";var n=_.extend({pressed:t.pressed},e.Events);return t.bind(["ctrl+x","command+x"],function(t){n.trigger("cut",t)}),t.bind(["ctrl+c","command+c"],function(t){n.trigger("copy",t)}),t.bind(["ctrl+v","command+v"],function(t){n.trigger("paste",t)}),t.bind(["del","command+backspace"],function(t){n.trigger("delete",t)}),t.bind(["ctrl+z","command+z"],function(t){n.trigger("undo",t)}),t.bind(["ctrl+y","command+y"],function(t){n.trigger("redo",t)}),$(window).blur(function(){var t=Object.keys(n.pressed);t.forEach(function(t){delete n.pressed[t]})}),n}),define("strut/editor/main",["./GlobalEvents","lang"],function(t,e){"use strict";return{initialize:function(n){var i;i=-1!=navigator.appVersion.indexOf("Mac")?[["undo","⌘+Z"],["redo","⌘+Y"],["cut","⌘+X"],["copy","⌘+C"],["paste","⌘+V"],["delete","⌘+⌫"]]:[["undo","Ctrl+Z"],["redo","Ctrl+Y"],["cut","Ctrl+X"],["copy","Ctrl+C"],["paste","Ctrl+V"],["delete","Del"]],i.forEach(function(i){n.register({interfaces:"strut.editor.glob.action",meta:{title:e[i[0]],action:i[0],hotkey:i[1]}},function(){t.trigger(i[0])})})}}}),define("common/FileUtils",[],function(){var t;return t={baseName:function(t,e){var n;return"/"===t[t.length-1]&&(t=t.substring(0,t.length-1)),n=t.lastIndexOf("/"),-1!==n&&t.length>n+1&&(t=t.substring(n+1,t.length)),null!=e&&(n=t.lastIndexOf(e),n+e.length===t.length&&(t=t.substring(0,n))),t},imageType:function(e){var n;return 0===e.indexOf("data:")?(n=e.indexOf(";"),e.substring(11,n).toUpperCase()):t.extension(e)},extension:function(t){var e,n;return n=t.lastIndexOf("."),-1!==n&&t.length>n+1?(e=t.substring(n+1,t.length),n=e.lastIndexOf("?"),-1!==n&&(e=e.substring(0,n)),e.toUpperCase()):""},type:function(t){switch(t){case"MP4":return"video/mp4";case"WEBM":return"video/webm";case"OGG":return"video/ogg";default:return""}},createDownloadAttrs:function(t,e,n){var i,r,o;return r=new Blob([e],{type:t}),o=window.URL.createObjectURL(r),i={href:o,download:n,downloadurl:[t,n,o].join(":")}},toText:function(t,e){var n;return console.log(t.type),null!=t?(n=new FileReader,n.onload=function(t){return e(t.target.result)},n.readAsText(t)):void 0}}}),define("strut/exporter/json/View",["libs/backbone","common/FileUtils","lang"],function(t,e,n){"use strict";return t.View.extend({initialize:function(){this.name="JSON",this._rendered=!1,this._dlSupported=window.dlSupported,this.$el.html('<div class="alert alert-info">'+n.strut_exporter_json.explain+"</div>"),this._dlSupported&&this.$el.append('<div class="alert alert-success">'+n.strut_exporter_json.click_below+"</div>")},show:function(t,e){this._$modal=e;var n=this._$modal.find(".ok");this._dlSupported?(n.html('<i class="icon-download-alt icon-white"></i>'),this._makeDownloadable(n)):(n.html(""),window.hasFlash?this._populateDownloadify():this._populateTextArea()),t.append(this.$el)},_makeDownloadable:function(t){var n=e.createDownloadAttrs("application/json",JSON.stringify(this._exportable.export(),null,2),this._exportable.identifier()+".json"),i=t[0];i.download=n.download,i.href=n.href,i.dataset.downloadurl=n.downloadurl},_populateTextArea:function(){var t=this.$el.find("textarea");0==t.length&&(t=$('<textarea style="width: 500px; height: 200px;"></textarea>'),this.$el.append(t)),t.val(JSON.stringify(this._exportable.export()))},_populateDownloadify:function(){var t=this.$el.find("#downloadify");if(0==t.length){t=$('<p id="downloadify"></p>'),this.$el.append(t),console.log("Puplating downloadify");var e=this;setTimeout(function(){Downloadify.create(t[0],{filename:function(){return e._exportable.identifier()+".json"},data:function(){return JSON.stringify(e._exportable.export(),null,2)},onComplete:function(){},onCancel:function(){},onError:function(){alert("Error exporting")},swf:"preview_export/download_assist/downloadify.swf",downloadImage:"preview_export/download_assist/download.png",width:100,height:30,transparent:!1,append:!1})},0)}},hide:function(){this.$el.detach(),this.hidden()},hidden:function(){if(this._dlSupported){var t=this._$modal.find(".ok");window.URL.revokeObjectURL(t.attr("href"))}else this.$el.find("textarea").val("")},render:function(){},constructor:function(e){this._exportable=e,t.View.prototype.constructor.call(this)}})}),define("strut/exporter/json/main",["./View"],function(t){"use strict";var e={createView:function(e){return new t(e.exportable)}};return{initialize:function(t){t.register({interfaces:"strut.exporter"},e)}}}),define("libs/jszip",[],function(){var t=function(t,e){this.files={},this.root="",t&&this.load(t,e)};t.signature={LOCAL_FILE_HEADER:"PK",CENTRAL_FILE_HEADER:"PK",CENTRAL_DIRECTORY_END:"PK",ZIP64_CENTRAL_DIRECTORY_LOCATOR:"PK",ZIP64_CENTRAL_DIRECTORY_END:"PK",DATA_DESCRIPTOR:"PK\b"},t.defaults={base64:!1,binary:!1,dir:!1,date:null,compression:null},t.prototype=function(){var n=function(t,e,n){this.name=t,this.data=e,this.options=n};n.prototype={asText:function(){var n=this.data;return null===n||n===void 0?"":(this.options.base64&&(n=e.decode(n)),this.options.binary&&(n=t.prototype.utf8decode(n)),n)},asBinary:function(){var n=this.data;return null===n||n===void 0?"":(this.options.base64&&(n=e.decode(n)),this.options.binary||(n=t.prototype.utf8encode(n)),n)},asUint8Array:function(){return t.utils.string2Uint8Array(this.asBinary())},asArrayBuffer:function(){return t.utils.string2Uint8Array(this.asBinary()).buffer}};var i=function(t,e){var n,i="";for(n=0;e>n;n++)i+=String.fromCharCode(255&t),t>>>=8;return i},r=function(){var t,e,n={};for(t=0;arguments.length>t;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&n[e]===void 0&&(n[e]=arguments[t][e]);return n},o=function(e){return e=e||{},e.base64===!0&&null==e.binary&&(e.binary=!0),e=r(e,t.defaults),e.date=e.date||new Date,null!==e.compression&&(e.compression=e.compression.toUpperCase()),e},s=function(e,i,r){var s=a(e);if(s&&l.call(this,s),r=o(r),r.dir||null===i||i===void 0)r.base64=!1,r.binary=!1,i=null;else if(t.support.uint8array&&i instanceof Uint8Array)r.base64=!1,r.binary=!0,i=t.utils.uint8Array2String(i);else if(t.support.arraybuffer&&i instanceof ArrayBuffer){r.base64=!1,r.binary=!0;var c=new Uint8Array(i);i=t.utils.uint8Array2String(c)}else r.binary&&!r.base64&&(r.optimizedBinaryString!==!0&&(i=t.utils.string2binary(i)),delete r.optimizedBinaryString);return this.files[e]=new n(e,i,r)},a=function(t){"/"==t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},l=function(t){if("/"!=t.slice(-1)&&(t+="/"),!this.files[t]){var e=a(t);e&&l.call(this,e),s.call(this,t,null,{dir:!0})}return this.files[t]},c=function(e,n,r){var o,s,a=n!==e.name,l=e.asBinary(),c=e.options;o=c.date.getHours(),o<<=6,o|=c.date.getMinutes(),o<<=5,o|=c.date.getSeconds()/2,s=c.date.getFullYear()-1980,s<<=4,s|=c.date.getMonth()+1,s<<=5,s|=c.date.getDate();var u=null!==l&&0!==l.length;if(r=c.compression||r,!t.compressions[r])throw r+" is not a valid compression method !";var h=t.compressions[r],d=u?h.compress(l):"",p="";return p+="\n\0",p+=a?"\0\b":"\0\0",p+=u?h.magic:t.compressions.STORE.magic,p+=i(o,2),p+=i(s,2),p+=u?i(this.crc32(l),4):"\0\0\0\0",p+=u?i(d.length,4):"\0\0\0\0",p+=u?i(l.length,4):"\0\0\0\0",p+=i(n.length,2),p+="\0\0",{header:p,compressedData:d}};return{load:function(){throw Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(t){var e,i,o,s,a=[];for(e in this.files)this.files.hasOwnProperty(e)&&(o=this.files[e],s=new n(o.name,o.data,r(o.options)),i=e.slice(this.root.length,e.length),e.slice(0,this.root.length)===this.root&&t(i,s)&&a.push(s));return a},file:function(t,e,n){if(1===arguments.length){if(t instanceof RegExp){var i=t;return this.filter(function(t,e){return!e.options.dir&&i.test(t)})}return this.filter(function(e,n){return!n.options.dir&&e===t})[0]||null}return t=this.root+t,s.call(this,t,e,n),this},folder:function(t){if(!t)return this;if(t instanceof RegExp)return this.filter(function(e,n){return n.options.dir&&t.test(e)});var e=this.root+t,n=l.call(this,e),i=this.clone();return i.root=n.name,i},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!=t.slice(-1)&&(t+="/"),e=this.files[t]),e)if(e.options.dir)for(var n=this.filter(function(e,n){return n.name.slice(0,t.length)===t}),i=0;n.length>i;i++)delete this.files[n[i].name];else delete this.files[t];return this},generate:function(n){n=r(n||{},{base64:!0,compression:"STORE",type:"base64"});var o=n.compression.toUpperCase();if(!t.compressions[o])throw o+" is not a valid compression method !";var s=[],a=[],l=0;for(var u in this.files)if(this.files.hasOwnProperty(u)){var h=this.files[u],d=this.utf8encode(h.name),p="",f="",g=c.call(this,h,d,o);p=t.signature.LOCAL_FILE_HEADER+g.header+d+g.compressedData,f=t.signature.CENTRAL_FILE_HEADER+"\0"+g.header+"\0\0"+"\0\0"+"\0\0"+(this.files[u].options.dir===!0?"\0\0\0":"\0\0\0\0")+i(l,4)+d,l+=p.length,a.push(p),s.push(f)}var m=a.join(""),v=s.join(""),y="";y=t.signature.CENTRAL_DIRECTORY_END+"\0\0"+"\0\0"+i(a.length,2)+i(a.length,2)+i(v.length,4)+i(m.length,4)+"\0\0";var b=m+v+y;switch(n.type.toLowerCase()){case"uint8array":return t.utils.string2Uint8Array(b);case"arraybuffer":return t.utils.string2Uint8Array(b).buffer;case"blob":return t.utils.string2Blob(b);case"base64":return n.base64?e.encode(b):b;default:return b}},crc32:function(t,e){if(""===t||t===void 0)return 0;var n=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];e===void 0&&(e=0);var i=0,r=0;e=-1^e;for(var o=0,s=t.length;s>o;o++)r=255&(e^t.charCodeAt(o)),i=n[r],e=e>>>8^i;return-1^e},clone:function(){var e=new t;for(var n in this)"function"!=typeof this[n]&&(e[n]=this[n]);return e},utf8encode:function(t){for(var e="",n=0;t.length>n;n++){var i=t.charCodeAt(n);128>i?e+=String.fromCharCode(i):i>127&&2048>i?(e+=String.fromCharCode(192|i>>6),e+=String.fromCharCode(128|63&i)):(e+=String.fromCharCode(224|i>>12),e+=String.fromCharCode(128|63&i>>6),e+=String.fromCharCode(128|63&i))}return e},utf8decode:function(t){for(var e="",n=0,i=0,r=0,o=0;t.length>n;)i=t.charCodeAt(n),128>i?(e+=String.fromCharCode(i),n++):i>191&&224>i?(r=t.charCodeAt(n+1),e+=String.fromCharCode((31&i)<<6|63&r),n+=2):(r=t.charCodeAt(n+1),o=t.charCodeAt(n+2),e+=String.fromCharCode((15&i)<<12|(63&r)<<6|63&o),n+=3);return e}}}(),t.compressions={STORE:{magic:"\0\0",compress:function(t){return t},uncompress:function(t){return t}}},t.support={arraybuffer:function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array}(),uint8array:function(){return"undefined"!=typeof Uint8Array}(),blob:function(){if("undefined"==typeof ArrayBuffer)return!1;var t=new ArrayBuffer(0);try{return 0===new Blob([t],{type:"application/zip"}).size}catch(e){}try{var n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return n.append(t),0===n.getBlob("application/zip").size}catch(e){}return!1}()},t.utils={string2binary:function(t){for(var e="",n=0;t.length>n;n++)e+=String.fromCharCode(255&t.charCodeAt(n));return e},string2Uint8Array:function(e){if(!t.support.uint8array)throw Error("Uint8Array is not supported by this browser");for(var n=new ArrayBuffer(e.length),i=new Uint8Array(n),r=0;e.length>r;r++)i[r]=e.charCodeAt(r);return i},uint8Array2String:function(e){if(!t.support.uint8array)throw Error("Uint8Array is not supported by this browser");for(var n="",i=0;e.length>i;i++)n+=String.fromCharCode(e[i]);return n},string2Blob:function(e){if(!t.support.blob)throw Error("Blob is not supported by this browser");var n=t.utils.string2Uint8Array(e).buffer;try{return new Blob([n],{type:"application/zip"})}catch(i){}try{var r=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return r.append(n),r.getBlob("application/zip")}catch(i){}throw Error("Bug : can't construct the Blob.")}};var e=function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(e){for(var n,i,r,o,s,a,l,c="",u=0;e.length>u;)n=e.charCodeAt(u++),i=e.charCodeAt(u++),r=e.charCodeAt(u++),o=n>>2,s=(3&n)<<4|i>>4,a=(15&i)<<2|r>>6,l=63&r,isNaN(i)?a=l=64:isNaN(r)&&(l=64),c=c+t.charAt(o)+t.charAt(s)+t.charAt(a)+t.charAt(l);return c},decode:function(e){var n,i,r,o,s,a,l,c="",u=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");e.length>u;)o=t.indexOf(e.charAt(u++)),s=t.indexOf(e.charAt(u++)),a=t.indexOf(e.charAt(u++)),l=t.indexOf(e.charAt(u++)),n=o<<2|s>>4,i=(15&s)<<4|a>>2,r=(3&a)<<6|l,c+=String.fromCharCode(n),64!=a&&(c+=String.fromCharCode(i)),64!=l&&(c+=String.fromCharCode(r));return c}}}();return t}),define("common/Calcium",["libs/backbone"],function(t){function e(e){return e instanceof t.Model||e instanceof t.Collection}function n(t,e,n){this.args=n,this.obj=t,this.fn=e}var i=t.Model.extend({toJSON:function(n,i){if(n)return t.Model.prototype.toJSON.apply(this,arguments);var r={};for(var o in this.attributes){var s=this.attributes[o];if(e(s))r[o]=s.toJSON(n,i);else if(i&&s instanceof Array){var a=[];r[o]=a,s.forEach(function(t){e(t)?a.push(t.toJSON(n,i)):a.push(t)})}else r[o]=s}return r}}),r=t.Collection.extend({toJSON:function(e,n){if(e)return t.Collection.prototype.toJSON.apply(this,arguments);
var i=[];return this.models.forEach(function(t){i.push(t.toJSON(e,n))}),i}});return n.prototype={dispose:function(){this.fn.apply(this.obj,this.args)}},{Model:i,Collection:r}}),define("common/Math2",{round:function(t,e){var n;return null!=e||(e=0),n=Math.pow(10,e),Math.round(t*n)/n},toDeg:function(t){return 180*t/Math.PI},toRads:function(t){return t*Math.PI/180},compare:function(t,e,n){return n>Math.abs(t-e)},rotatePt:function(t,e){var n;return n=0>e?{x:t.x*Math.cos(e)+t.y*Math.sin(e),y:-1*t.x*Math.sin(e)+t.y*Math.cos(e)}:{x:t.x*Math.cos(e)-t.y*Math.sin(e),y:t.x*Math.sin(e)+t.y*Math.cos(e)}},rotatePtE:function(t,e){var n;return n=0>e?{left:t.left*Math.cos(e)+t.top*Math.sin(e),top:-1*t.left*Math.sin(e)+t.top*Math.cos(e)}:{left:t.left*Math.cos(e)-t.top*Math.sin(e),top:t.left*Math.sin(e)+t.top*Math.cos(e)}}}),define("strut/deck/SpatialObject",["common/Calcium","common/Math2"],function(t,e){"use strict";return t.Model.extend({initialize:function(){},setInt:function(t,e){if("string"==typeof e)try{e=parseInt(e,10)}catch(n){return}this.set(t,Math.round(e))},setFloat:function(t,n,i){if("string"==typeof n)try{n=parseFloat(n)}catch(r){return}n=e.round(n,i||2),this.set(t,n)},constructor:function(){t.Model.prototype.constructor.apply(this,arguments)}})}),define("strut/slide_components/ComponentFactory",[],function(){"use strict";function t(t){var e=t.get("strut.ComponentModel");this._modelCtors={},e.forEach(function(t){this._modelCtors[t.meta().type]=t.service()},this),this._viewCtors={};var n=t.get("strut.ComponentView");n.forEach(function(t){this._viewCtors[t.meta().type]=t.service()},this),this._drawers={};var i=t.get("strut.ComponentDrawer");i.forEach(function(t){this._drawers[t.meta().type]=t.service()},this)}return t.prototype={createView:function(t){var e=t.get("type"),n=this._viewCtors[e];return n?new n({model:t}):void 0},createModel:function(t){if("ImageModel"==t.type&&(t.type="Image"),"string"==typeof t)var e=t;else var e=t.type;var n=this._modelCtors[e];return n?new n(t):void 0},getDrawer:function(t){return this._drawers[t]}},{initialize:function(e){log("Initing"),this.instance||(this.instance=new t(e))}}}),define("strut/deck/ComponentCommands",[],function(){function t(t,e,n,i){this.start=t,this.end=e.get(n)||0,this.model=e,this.name=i,this.attr=n}var e,n,i,r;return t.prototype={"do":function(){this.model.set(this.attr,this.end),this.model.set("selected",!0)},undo:function(){this.model.set(this.attr,this.start),this.model.set("selected",!0)}},e=function(t,e){this.slide=t,this.components=e.slice(0)},e.prototype={"do":function(){this.slide.__doAdd(this.components)},undo:function(){this.slide.__doRemove(this.components)},name:"Add Comp"},n=function(t,e){this.slide=t,this.components=e.slice(0)},n.prototype={"do":function(){this.slide.__doRemove(this.components)},undo:function(){this.slide.__doAdd(this.components)},name:"Remove Comp"},i=function(t,e){return this.startLoc=t,this.model=e,this.endLoc={x:this.model.get("x"),y:this.model.get("y")},this},i.prototype={"do":function(){this.model.set(this.endLoc),this.model.set("selected",!0)},undo:function(){this.model.set(this.startLoc),this.model.set("selected",!0)},name:"Move"},r=function(t,e){this.commands=t,this.name=e},r.prototype={"do":function(){this.commands.forEach(function(t){t.do()})},undo:function(){this.commands.forEach(function(t){t.undo()})}},{CombinedCommand:r,Add:e,Remove:n,Move:i,SkewX:function(e,n){return new t(e,n,"skewX","Skew X")},SkewY:function(e,n){return new t(e,n,"skewY","Skew Y")},Rotate:function(e,n){return new t(e,n,"rotate","Rotate")},Scale:function(e,n){return new t(e,n,"scale","Scale")},TextScale:function(e,n){return new t(e,n,"size","Scale")},Text:function(e,n){return new t(e,n,"text","Text")}}}),define("strut/deck/Slide",["libs/backbone","./SpatialObject","strut/slide_components/ComponentFactory","common/Math2","./ComponentCommands","tantaman/web/undo_support/CmdListFactory","strut/editor/GlobalEvents"],function(t,e,n,i,r,o,s){var a,l=o.managedInstance("editor");return a={z:0,impScale:3,rotateX:0,rotateY:0,rotateZ:0},e.extend({type:"slide",selected:[],initialize:function(){var e,i;e=this.get("components"),void 0===e?this.set("components",[]):(i=[],this.set("components",i),e.forEach(function(e){var r;return e instanceof t.Model?(r=e.clone(),i.push(r)):(r=n.instance.createModel(e),i.push(r)),this._registerWithComponent(r)},this)),_.defaults(this.attributes,a),this.on("unrender",this._unrendered,this),this.on("change:markdown",this._contentsChanged,this),e=this.get("components"),e.forEach(function(t){t.get("selected")&&this._selectionChanged(t,!0,{multiselect:!0})},this)},_unrendered:function(){this.get("components").forEach(function(t){t.trigger("unrender",!0)})},_registerWithComponent:function(t){t.slide=this,t.on("dispose",this._selectionChanged,this),t.on("change:selected",this._selectionChanged,this),t.on("change",this._contentsChanged,this)},customClasses:function(){return""},getPositionData:function(){return{x:this.get("x"),y:this.get("y"),z:this.get("z"),impScale:this.get("impScale"),rotateX:this.get("rotateX"),rotateY:this.get("rotateY"),rotateZ:this.get("rotateZ")}},selectComponents:function(t){t=_.isArray(t)?t:[t],t.length&&(this.get("components").forEach(function(t){return t.set("selected",!1)}),t.forEach(function(t){t.set("selected",!0,{multiselect:!0})}))},unselectComponents:function(t){t=t||this.selected,t=_.isArray(t)?t:[t],t.forEach(function(t){t.set("selected",!1)})},_selectionChanged:function(t,e,n){n=n||{};var i=n.multiselect||s.pressed.ctrl||s.pressed.meta||s.pressed.shift;if(e)i||this.get("components").forEach(function(e){return t!==e?e.set("selected",!1):void 0}),-1==this.selected.indexOf(t)&&this.selected.push(t),this.trigger("change:activeComponent",this,t,e);else{var r=this.selected.indexOf(t);-1!==r&&this.selected.splice(r,1),this.trigger("change:activeComponent",this,void 0)}},_contentsChanged:function(){this.trigger("contentsChanged")},add:function(t){t=_.isArray(t)?t.slice():[t],t.forEach(function(t){this._placeComponent(t)},this);var e=new r.Add(this,t);e.do(),l.push(e)},__doAdd:function(t){t.forEach(function(t){this.get("components").push(t),this._registerWithComponent(t),this.trigger("contentsChanged"),this.trigger("change:components.add",this,t)},this),this.selectComponents(t)},_placeComponent:function(t){return this.get("components").forEach(function(e){var n,r;return n=e.get("x"),r=e.get("y"),i.compare(n,t.get("x"),5)&&i.compare(r,t.get("y"),5)?t.set({x:n+20,y:r+20}):void 0})},remove:function(t){t=_.isArray(t)?t:[t],l.pushdo(new r.Remove(this,t))},__doRemove:function(t){t.forEach(function(t){var e;return e=this.get("components").indexOf(t),-1!==e?(this.get("components").splice(e,1),this.trigger("contentsChanged"),this.trigger("change:components.remove",this,t),this._selectionChanged(t,!1),t.trigger("unrender"),t.off(),t):void 0},this)},dispose:function(){this.set({active:!1,selected:!1}),this.trigger("dispose",this),this.off()},constructor:function(){e.prototype.constructor.apply(this,arguments)}})}),define("strut/deck/SlideCollection",["common/Calcium","./Slide"],function(t,e){return t.Collection.extend({model:e,initialize:function(){this.on("add",this._updateIndexes,this),this.on("remove",this._updateIndexes,this)},_updateIndexes:function(){this.models.forEach(function(t,e){return t.set("index",e)})},slidesReorganized:function(t){var e=[];this.models.forEach(function(n,i){e.push(t[i].getPositionData())},this);var n={silent:!0};return e.forEach(function(t,e){this.models[e].set(t,n)},this),this.models.forEach(function(t,e){t.set("index",e)}),this},_swapTransitionPositions:function(t,e){var n,i;i=t.getPositionData(),n={silent:!0},t.set(e.getPositionData(),n),e.set(i,n)}})}),define("strut/deck/SlideCommands",["strut/deck/Slide"],function(){var t,e;return t=function(t,e,n){this.deck=t,this.selected=this.deck.selected.slice(0),this.activeSlide=this.deck.get("activeSlide"),this.slides=e?e.slice(0):null,this.index=n},t.prototype={name:"Add Slide","do":function(){this.slides=this.deck._doAdd(this.slides,{preserveIndexes:!1,at:this.index})},undo:function(){this.deck._doRemove(this.slides),this.deck.selectSlides(this.selected,this.activeSlide)}},e=function(t,e){this.deck=t,this.slides=e.slice(0)},e.prototype={name:"Remove Slide","do":function(){this.deck._doRemove(this.slides)},undo:function(){this.deck._doAdd(this.slides,{preserveIndexes:!0})}},{Add:t,Remove:e}}),define("strut/deck/Deck",["common/Calcium","./SlideCollection","./SlideCommands","tantaman/web/undo_support/CmdListFactory","strut/deck/Slide","strut/editor/GlobalEvents"],function(t,e,n,i,r,o){return t.Model.extend({selected:[],initialize:function(){var t;this.undoHistory=i.managedInstance("editor"),this.set("slides",new e),t=this.get("slides"),t.on("add",this._slideAdded,this),t.on("remove",this._slideRemoved,this),t.on("reset",this._slidesReset,this),this.set("background","defaultbg")},set:function(e,n){return"activeSlide"===e&&this._activeSlideChanging(n),t.Model.prototype.set.apply(this,arguments)},moveSlide:function(t,e){if(t!=e){var n=this.get("slides"),i=n.slice(0),r=n.at(t);n.remove(r,{silent:!0}),n.add(r,{at:e,silent:!0}),n.slidesReorganized(i)}},slideBackground:function(t){return t?t||this.get("surface")||"defaultbg":"defaultbg"==this.get("background")?this.get("surface")||"defaultbg":this.get("background")||this.get("surface")||"defaultbg"},slideSurface:function(){return this.get("surface")||"defaultbg"},"import":function(t){var e,n;return n=this.get("slides"),e=this.get("activeSlide"),void 0!==e&&e.unselectComponents(),this.set("activeSlide",void 0),this.set("background",t.background),this.set("fileName",t.fileName),this.set("surface",t.surface),this.set("customStylesheet",t.customStylesheet),this.undoHistory.clear(),n.reset(t.slides)},_activeSlideChanging:function(t){var e;return e=this.get("activeSlide"),t!==e?(void 0!==e&&(e.unselectComponents(),e.set({active:!1,selected:!1})),void 0!==t?t.set({selected:!0,active:!0}):void 0):void 0},_slideAdded:function(t,e,n){this.set("activeSlide",t);var i=null==n.at?e.length:n.at;this.trigger("slideAdded",t,i),this._registerWithSlide(t)},_slideDisposed:function(t){t.off(null,null,this)},_slideRemoved:function(t,e,n){this.get("activeSlide")===t&&(n.index<e.length?this.set("activeSlide",e.at(n.index)):n.index>0?this.set("activeSlide",e.at(n.index-1)):this.set("activeSlide",void 0)),t.dispose()},_slidesReset:function(t,e){return e.previousModels.forEach(function(t){return t.dispose()}),this.trigger("slidesReset",t),t.forEach(function(t){this._registerWithSlide(t),t.get("active")?(t.trigger("change:active",t,!0),t.trigger("change:selected",t,!0),this._selectionChanged(t,!0)):t.get("selected")&&t.set("selected",!1)},this)},_slideActivated:function(t,e){e&&this.set("activeSlide",t)},selectSlides:function(t,e){t=_.isArray(t)?t:[t],t.length&&(e=e||t[0],this.get("slides").forEach(function(t){return t.set("selected",!1)}),e.set("active",!0,{multiselect:!0}),t.forEach(function(t){t.set("selected",!0,{multiselect:!0})}))},unselectSlides:function(t){t=t||this.get("slides").models,t=_.isArray(t)?t:[t],t.forEach(function(t){t.get("active")||t.set("selected",!1)})},_selectionChanged:function(t,e,n){n=n||{};var i=n.multiselect||o.pressed.ctrl||o.pressed.meta||o.pressed.shift;if(e)i||this.get("slides").forEach(function(e){return t!==e?e.set("selected",!1):void 0}),-1==this.selected.indexOf(t)&&this.selected.push(t);else{var r=this.selected.indexOf(t);-1!==r&&this.selected.splice(r,1)}this.selected.sort(function(t,e){return t.get("index")-e.get("index")})},_registerWithSlide:function(t){t.on("change:active",this._slideActivated,this),t.on("change:selected",this._selectionChanged,this),t.on("dispose",this._slideDisposed,this)},create:function(t){return this.undoHistory.pushdo(new n.Add(this,null,t))},add:function(t,e){return this.undoHistory.pushdo(new n.Add(this,t,e))},_doAdd:function(t,e){var n=this.get("slides");if(t=t||[new r],t=_.isArray(t)?t:[t],e=e||{},!e.preserveIndexes&&this.selected.length)var i=n.indexOf(this.selected[this.selected.length-1]);for(var o=0;t.length>o;o++){var s=t[o];s.on("unrender",s._unrendered,s);var a=e.at||(e.preserveIndexes?s.get("index"):i+1+o)||0;n.add(s,{at:a})}return this.selectSlides(t),t},remove:function(t){t=_.isArray(t)?t:[t],this.undoHistory.pushdo(new n.Remove(this,t))},_doRemove:function(t){t=_.isArray(t)?t:[t];var e=this.get("slides"),n=t.slice(0).reverse();n.forEach(function(t){e.remove(t),t.off(),t.dispose()})},undo:function(){this.undoHistory.undo()},redo:function(){this.undoHistory.redo()}})}),function(){function t(t){this.tokens=[],this.tokens.links={},this.options=t||a.defaults,this.rules=l.normal,this.options.gfm&&(this.rules=this.options.tables?l.tables:l.gfm)}function e(t,e){if(this.options=e||a.defaults,this.links=t,this.rules=c.normal,!this.links)throw Error("Tokens array requires a `links` property.");this.options.gfm?this.rules=this.options.breaks?c.breaks:c.gfm:this.options.pedantic&&(this.rules=c.pedantic)}function n(t){this.tokens=[],this.token=null,this.options=t||a.defaults}function i(t,e){return t.replace(e?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function r(t,e){return t=t.source,e=e||"",function n(i,r){return i?(r=r.source||r,r=r.replace(/(^|[^\[])\^/g,"$1"),t=t.replace(i,r),n):RegExp(t,e)}}function o(){}function s(t){for(var e,n,i=1;arguments.length>i;i++){e=arguments[i];for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t}function a(e,r,o){if(o||"function"==typeof r){o||(o=r,r=null),r=s({},a.defaults,r||{});var l,c,u=r.highlight,h=0;try{l=t.lex(e,r)}catch(d){return o(d)}c=l.length;var p=function(){var t,e;try{t=n.parse(l,r)}catch(i){e=i}return r.highlight=u,e?o(e):o(null,t)};if(!u||3>u.length)return p();if(delete r.highlight,!c)return p();for(;l.length>h;h++)(function(t){return"code"!==t.type?--c||p():u(t.text,t.lang,function(e,n){return null==n||n===t.text?--c||p():(t.text=n,t.escaped=!0,--c||p(),void 0)})})(l[h])}else try{return r&&(r=s({},a.defaults,r)),n.parse(t.lex(e,r),r)}catch(d){if(d.message+="\nPlease report this to https://github.com/chjj/marked.",(r||a.defaults).silent)return"<p>An error occured:</p><pre>"+i(d.message+"",!0)+"</pre>";throw d}}var l={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:o,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:o,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:o,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};l.bullet=/(?:[*+-]|\d+\.)/,l.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,l.item=r(l.item,"gm")(/bull/g,l.bullet)(),l.list=r(l.list)(/bull/g,l.bullet)("hr",/\n+(?=(?: *[-*_]){3,} *(?:\n+|$))/)(),l._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|@)\\b",l.html=r(l.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,l._tag)(),l.paragraph=r(l.paragraph)("hr",l.hr)("heading",l.heading)("lheading",l.lheading)("blockquote",l.blockquote)("tag","<"+l._tag)("def",l.def)(),l.normal=s({},l),l.gfm=s({},l.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),l.gfm.paragraph=r(l.paragraph)("(?!","(?!"+l.gfm.fences.source.replace("\\1","\\2")+"|"+l.list.source.replace("\\1","\\3")+"|")(),l.tables=s({},l.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),t.rules=l,t.lex=function(e,n){var i=new t(n);return i.lex(e)},t.prototype.lex=function(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(t,!0)},t.prototype.token=function(t,e){for(var n,i,r,o,s,a,c,u,h,t=t.replace(/^ +$/gm,"");t;)if((r=this.rules.newline.exec(t))&&(t=t.substring(r[0].length),r[0].length>1&&this.tokens.push({type:"space"})),r=this.rules.code.exec(t))t=t.substring(r[0].length),r=r[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?r:r.replace(/\n+$/,"")});else if(r=this.rules.fences.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"code",lang:r[2],text:r[3]});else if(r=this.rules.heading.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"heading",depth:r[1].length,text:r[2]});else if(e&&(r=this.rules.nptable.exec(t))){for(t=t.substring(r[0].length),a={type:"table",header:r[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3].replace(/\n$/,"").split("\n")},u=0;a.align.length>u;u++)a.align[u]=/^ *-+: *$/.test(a.align[u])?"right":/^ *:-+: *$/.test(a.align[u])?"center":/^ *:-+ *$/.test(a.align[u])?"left":null;for(u=0;a.cells.length>u;u++)a.cells[u]=a.cells[u].split(/ *\| */);this.tokens.push(a)}else if(r=this.rules.lheading.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"heading",depth:"="===r[2]?1:2,text:r[1]});else if(r=this.rules.hr.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"hr"});else if(r=this.rules.blockquote.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"blockquote_start"}),r=r[0].replace(/^ *> ?/gm,""),this.token(r,e),this.tokens.push({type:"blockquote_end"});else if(r=this.rules.list.exec(t)){for(t=t.substring(r[0].length),o=r[2],this.tokens.push({type:"list_start",ordered:o.length>1}),r=r[0].match(this.rules.item),n=!1,h=r.length,u=0;h>u;u++)a=r[u],c=a.length,a=a.replace(/^ *([*+-]|\d+\.) +/,""),~a.indexOf("\n ")&&(c-=a.length,a=this.options.pedantic?a.replace(/^ {1,4}/gm,""):a.replace(RegExp("^ {1,"+c+"}","gm"),"")),this.options.smartLists&&u!==h-1&&(s=l.bullet.exec(r[u+1])[0],o===s||o.length>1&&s.length>1||(t=r.slice(u+1).join("\n")+t,u=h-1)),i=n||/\n\n(?!\s*$)/.test(a),u!==h-1&&(n="\n"===a.charAt(a.length-1),i||(i=n)),this.tokens.push({type:i?"loose_item_start":"list_item_start"}),this.token(a,!1),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(r=this.rules.html.exec(t))t=t.substring(r[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:"pre"===r[1]||"script"===r[1]||"style"===r[1],text:r[0]});else if(e&&(r=this.rules.def.exec(t)))t=t.substring(r[0].length),this.tokens.links[r[1].toLowerCase()]={href:r[2],title:r[3]};else if(e&&(r=this.rules.table.exec(t))){for(t=t.substring(r[0].length),a={type:"table",header:r[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3].replace(/(?: *\| *)?\n$/,"").split("\n")},u=0;a.align.length>u;u++)a.align[u]=/^ *-+: *$/.test(a.align[u])?"right":/^ *:-+: *$/.test(a.align[u])?"center":/^ *:-+ *$/.test(a.align[u])?"left":null;for(u=0;a.cells.length>u;u++)a.cells[u]=a.cells[u].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(a)}else if(e&&(r=this.rules.paragraph.exec(t)))t=t.substring(r[0].length),this.tokens.push({type:"paragraph",text:"\n"===r[1].charAt(r[1].length-1)?r[1].slice(0,-1):r[1]});else if(r=this.rules.text.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"text",text:r[0]});else if(t)throw Error("Infinite loop on byte: "+t.charCodeAt(0));return this.tokens};var c={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:o,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:o,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};c._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,c._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,c.link=r(c.link)("inside",c._inside)("href",c._href)(),c.reflink=r(c.reflink)("inside",c._inside)(),c.normal=s({},c),c.pedantic=s({},c.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),c.gfm=s({},c.normal,{escape:r(c.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:r(c.text)("]|","~]|")("|","|https?://|")()}),c.breaks=s({},c.gfm,{br:r(c.br)("{2,}","*")(),text:r(c.gfm.text)("{2,}","*")()}),e.rules=c,e.output=function(t,n,i){var r=new e(n,i);return r.output(t)},e.prototype.output=function(t){for(var e,n,r,o,s="";t;)if(o=this.rules.escape.exec(t))t=t.substring(o[0].length),s+=o[1];else if(o=this.rules.autolink.exec(t))t=t.substring(o[0].length),"@"===o[2]?(n=":"===o[1].charAt(6)?this.mangle(o[1].substring(7)):this.mangle(o[1]),r=this.mangle("mailto:")+n):(n=i(o[1]),r=n),s+='<a href="'+r+'">'+n+"</a>";else if(o=this.rules.url.exec(t))t=t.substring(o[0].length),n=i(o[1]),r=n,s+='<a href="'+r+'">'+n+"</a>";else if(o=this.rules.tag.exec(t))t=t.substring(o[0].length),s+=this.options.sanitize?i(o[0]):o[0];else if(o=this.rules.link.exec(t))t=t.substring(o[0].length),s+=this.outputLink(o,{href:o[2],title:o[3]});else if((o=this.rules.reflink.exec(t))||(o=this.rules.nolink.exec(t))){if(t=t.substring(o[0].length),e=(o[2]||o[1]).replace(/\s+/g," "),e=this.links[e.toLowerCase()],!e||!e.href){s+=o[0].charAt(0),t=o[0].substring(1)+t;continue}s+=this.outputLink(o,e)}else if(o=this.rules.strong.exec(t))t=t.substring(o[0].length),s+="<strong>"+this.output(o[2]||o[1])+"</strong>";else if(o=this.rules.em.exec(t))t=t.substring(o[0].length),s+="<em>"+this.output(o[2]||o[1])+"</em>";else if(o=this.rules.code.exec(t))t=t.substring(o[0].length),s+="<code>"+i(o[2],!0)+"</code>";else if(o=this.rules.br.exec(t))t=t.substring(o[0].length),s+="<br>";else if(o=this.rules.del.exec(t))t=t.substring(o[0].length),s+="<del>"+this.output(o[1])+"</del>";else if(o=this.rules.text.exec(t))t=t.substring(o[0].length),s+=i(this.smartypants(o[0]));else if(t)throw Error("Infinite loop on byte: "+t.charCodeAt(0));return s},e.prototype.outputLink=function(t,e){return"!"!==t[0].charAt(0)?'<a href="'+i(e.href)+'"'+(e.title?' title="'+i(e.title)+'"':"")+">"+this.output(t[1])+"</a>":'<img src="'+i(e.href)+'" alt="'+i(t[1])+'"'+(e.title?' title="'+i(e.title)+'"':"")+">"},e.prototype.smartypants=function(t){return this.options.smartypants?t.replace(/--/g,"—").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):t},e.prototype.mangle=function(t){for(var e,n="",i=t.length,r=0;i>r;r++)e=t.charCodeAt(r),Math.random()>.5&&(e="x"+e.toString(16)),n+="&#"+e+";";return n},n.parse=function(t,e){var i=new n(e);return i.parse(t)},n.prototype.parse=function(t){this.inline=new e(t.links,this.options),this.tokens=t.reverse();for(var n="";this.next();)n+=this.tok();return n},n.prototype.next=function(){return this.token=this.tokens.pop()},n.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},n.prototype.parseText=function(){for(var t=this.token.text;"text"===this.peek().type;)t+="\n"+this.next().text;return this.inline.output(t)},n.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return"<hr>\n";case"heading":return"<h"+this.token.depth+' id="'+this.token.text.toLowerCase().replace(/[^\w]+/g,"-")+'">'+this.inline.output(this.token.text)+"</h"+this.token.depth+">\n";case"code":if(this.options.highlight){var t=this.options.highlight(this.token.text,this.token.lang);null!=t&&t!==this.token.text&&(this.token.escaped=!0,this.token.text=t)}return this.token.escaped||(this.token.text=i(this.token.text,!0)),"<pre><code"+(this.token.lang?' class="'+this.options.langPrefix+this.token.lang+'"':"")+">"+this.token.text+"</code></pre>\n";case"table":var e,n,r,o,s,a="";for(a+="<thead>\n<tr>\n",n=0;this.token.header.length>n;n++)e=this.inline.output(this.token.header[n]),a+="<th",this.token.align[n]&&(a+=' style="text-align:'+this.token.align[n]+'"'),a+=">"+e+"</th>\n";for(a+="</tr>\n</thead>\n",a+="<tbody>\n",n=0;this.token.cells.length>n;n++){for(r=this.token.cells[n],a+="<tr>\n",s=0;r.length>s;s++)o=this.inline.output(r[s]),a+="<td",this.token.align[s]&&(a+=' style="text-align:'+this.token.align[s]+'"'),a+=">"+o+"</td>\n";a+="</tr>\n"}return a+="</tbody>\n","<table>\n"+a+"</table>\n";case"blockquote_start":for(var a="";"blockquote_end"!==this.next().type;)a+=this.tok();return"<blockquote>\n"+a+"</blockquote>\n";case"list_start":for(var l=this.token.ordered?"ol":"ul",a="";"list_end"!==this.next().type;)a+=this.tok();return"<"+l+">\n"+a+"</"+l+">\n";case"list_item_start":for(var a="";"list_item_end"!==this.next().type;)a+="text"===this.token.type?this.parseText():this.tok();return"<li>"+a+"</li>\n";case"loose_item_start":for(var a="";"list_item_end"!==this.next().type;)a+=this.tok();return"<li>"+a+"</li>\n";case"html":return this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);case"paragraph":return"<p>"+this.inline.output(this.token.text)+"</p>\n";case"text":return"<p>"+this.parseText()+"</p>\n"}},o.exec=o,a.options=a.setOptions=function(t){return s(a.defaults,t),a},a.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1},a.Parser=n,a.parser=n.parse,a.Lexer=t,a.lexer=t.lex,a.InlineLexer=e,a.inlineLexer=e.output,a.parse=a,"object"==typeof exports?module.exports=a:"function"==typeof define&&define.amd?define("marked",[],function(){return a}):this.marked=a}.call(function(){return this||("undefined"!=typeof window?window:global)}()),define("strut/presentation_generator/impress/ImpressGenerator",["handlebars","common/Math2","marked"],function(t,e,n){var i,r=window.config.slide;return i=function(){function i(){var i=this;t.registerHelper("renderComponent",function(e,n){var r;if(r="",n&&"string"==typeof n&&(n=n.split(" "),-1!=n.indexOf(e.get("type"))))return r;switch(e.get("type")){case"Image":r="SVG"===e.get("imageType")?JST["strut.presentation_generator.impress/SVGImage"](e.attributes):JST["strut.presentation_generator.impress/Image"](e.attributes);break;case"TextBox":r=JST["strut.presentation_generator.impress/TextBox"](i.convertTextBoxData(e.attributes));break;case"Video":r="html5"===e.get("videoType")?JST["strut.presentation_generator.impress/Video"](e.attributes):JST["strut.presentation_generator.impress/Youtube"](e.attributes);break;case"WebFrame":r=JST["strut.presentation_generator.impress/WebFrame"](e.attributes)}return new t.SafeString(r)}),t.registerHelper("scaleX",function(t){return t*r.size.width/r.overviewSize.width}),t.registerHelper("scaleY",function(t){return t*r.size.width/r.overviewSize.width}),t.registerHelper("toDeg",function(t){return 180*t/Math.PI}),t.registerHelper("negate",function(t){return-1*t}),t.registerHelper("round",function(t){return e.round(t,2)}),t.registerHelper("extractBG",function(t){var e,n,i,r,o,s;if(null!=t&&t.length>0){for(i="",r=t[0],e=["-moz-","-webkit-","-o-","-ms-",""],o=0,s=e.length;s>o;o++)n=e[o],i+="background-image: "+n+r+"; ";return i}return""}),t.registerHelper("or",function(t,e){return t||e}),t.registerHelper("marked",function(e){return e?new t.SafeString(n(e)):""}),t.registerPartial("ComponentContainer",JST["strut.presentation_generator.impress/ComponentContainer"]),t.registerPartial("TransformContainer",JST["strut.presentation_generator.impress/TransformContainer"]),t.registerPartial("SVGContainer",JST["strut.presentation_generator.impress/SVGContainer"])}return i.prototype.render=function(t){var e,n,i;i=t.slides,n=6,e=0;var r,o,s,a;return i.each(function(t){var i;return i=t.get("x"),y=t.get("y"),null==i&&(t.set("x",160*e+30),t.set("y",160*(0|e/n)+80)),(null==r||r>i)&&(r=i),(null==o||o>y)&&(o=y),(null==s||i>s)&&(s=i),(null==a||y>a)&&(a=y),++e}),t.overviewX=(s+r)/2,t.overviewY=(a+o)/2,JST["strut.presentation_generator.impress/ImpressTemplate"](t)},i.prototype.getStartPreviewFn=function(t,e,n){function i(){console.log("Loaded!"),window.location.hash="#/step-"+(t.activeSlideIndex()+1),e.previewWind.document.open(),e.previewWind.document.write(n),e.previewWind.document.close()}return i},i.prototype.convertTextBoxData=function(e){var n;return n=_.extend({},e),n.text=new t.SafeString(e.text),n},i}(),new i}),define("strut/exporter/zip/browser/Archiver",["libs/jszip","strut/deck/Deck","strut/presentation_generator/impress/ImpressGenerator","common/FileUtils"],function(t,e,n,i){var r,o;return o={includeImages:!0,includeFonts:!0},r=function(){function r(t,e){this.presentation=t,this.options=e,this.options||(this.options={}),this.canvas=$("<canvas></canvas>")[0],this._archivedImages={},this._imageIdx=0,_.defaults(this.options,o)}return r.prototype.create=function(){var i,r,o=this;return this.archive=new t,this.previewExportDir=this.archive.folder("preview_export"),this.imagesDir=this.previewExportDir.folder("images"),this.scriptsDir=this.previewExportDir.folder("scripts"),this.fontsDir=this.previewExportDir.folder("fonts"),this.cssDir=this.previewExportDir.folder("css"),i=new e,i["import"](this.presentation.toJSON(!1,!0)),i.get("slides").each(function(t){return o.processComponents(t.get("components"))}),r="<!doctype html><html>"+n.render(i.attributes)+"</html>",this._archiveIndexHtml(r),this._archiveScripts(),this._archiveFonts(),this._archiveCss(),this._archivedImages={},this.archive.generate()},r.prototype.createSimple=function(e,i){var r,o=this;return this.archive=new t,this.previewExportDir=this.archive.folder("preview_export"),this.scriptsDir=this.previewExportDir.folder("scripts"),this.cssDir=this.previewExportDir.folder("css"),r="<!doctype html><html>"+n.render(this.presentation.attributes)+"</html>",this._archiveIndexHtml(r),this._archiveScripts(function(){return o._archiveCss(function(){return e(o.archive.generate(i))})})},r.prototype.processComponents=function(t){var e=this;return t.forEach(function(t){return e.processComponent(t)})},r.prototype.processComponent=function(t){return"ImageModel"===t.get("type")&&this.options.includeImages?this._archiveImage(t):void 0},r.prototype._archiveIndexHtml=function(t){return this.archive.file("index.html",t)},r.prototype._archiveScripts=function(t){var e=this;return $.get("preview_export/scripts/impress.js",function(n){return e.scriptsDir.file("impress.js",n),t()})},r.prototype._archiveFonts=function(){},r.prototype._archiveCss=function(t){var e=this;return $.get("zip/main.css",function(n){return e.cssDir.file("main.css",n),t()})},r.prototype._archiveImage=function(t){var e,n;return this._archivedImages[t.get("src")]?void 0:(this._archivedImages[t.get("src")]=!0,n=t.cachedImage,this.canvas.width=n.naturalWidth,this.canvas.height=n.naturalHeight,this.canvas.getContext("2d").drawImage(n,0,0),e=this._imageIdx+i.baseName(t.get("src")),this.imagesDir.file(e,this.canvas.toDataURL().replace(/^data:image\/(png|jpg);base64,/,""),{base64:!0}),t.set("src","preview_export/images/"+e))},r}()}),define("strut/exporter/zip/browser/View",["libs/backbone","./Archiver","lang"],function(t,e){return t.View.extend({name:"Zip",initialize:function(){this.$el.html('<div class="alert alert-info">The most effective way to archive your rendered presentation is to:<p><ol><li>Click <code>Present</code></li><li>Press <code>Ctrl+S</code>(windows) or <code>⌘+S</code>(Mac) to save the entire presentation to disk.</li></ol></p>')},show:function(t,e){this._$modal=e;var n=this._$modal.find(".ok");n.html(""),t.append(this.$el)},_makeDownloadable:function(t){var n=new e(this._exportable.adapted.deck()),i=this;n.createSimple(function(e){var n=t[0];n.href=window.URL.createObjectURL(e),n.download=i._exportable.identifier()+".zip",n.dataset.downloadurl=["application/json",n.download,n.href].join(":")},{type:"blob"})},hide:function(){this.$el.detach(),this.hidden()
},hidden:function(){this._$modal.find(".ok")},render:function(){return this.$el.html("Zipping while running Strut from file:// URLs is currently not supported due to browser security restrictions.  The best way zip your presentation in this case is to:<br/><ol><li>Click Preview, then</li><li>Use your browser's <code>Save Page As</code> functionality<br/>to save the entire presentation to disk.</li></ol>"),this},constructor:function(e){this._exportable=e,t.View.prototype.constructor.call(this)}})}),define("strut/exporter/zip/browser/main",["./View"],function(t){"use strict";var e={createView:function(e){return new t(e.exportable)}};return{initialize:function(t){t.register({interfaces:"strut.exporter"},e)}}}),define("strut/importer/json/main",["common/FileUtils"],function(t){"use strict";var e={"import":function(e,n,i){"text/json"==e.type||""==e.type||"application/json"==e.type?t.toText(e,function(t){n.importPresentation(JSON.parse(t))}):i()}};return{initialize:function(t){t.register({interfaces:"strut.importer"},e)}}}),define("tantaman/web/widgets/HiddenOpen",["libs/backbone"],function(t){return t.View.extend({className:"dispNone",events:{"change input[type='file']":"_fileChosen"},initialize:function(t,e){return this._cb=e,null!=t?t.on("click",this.trigger.bind(this)):void 0},trigger:function(t){return null!=t&&(this._cb=t),this.$input.click()},_fileChosen:function(t){var e;return e=t.target.files[0],this._cb(e)},render:function(){return this.$input=$('<input type="file"></input>'),this.$el.html(this.$input),this}})}),define("framework/Iterator",[],function(){function t(t){return Array.isArray(t)||t instanceof Array?new e(t):new n(t)}function e(t){this._val=t,this._crsr=0}function n(t){this._object=t,this._iter=new e(Object.keys(t))}return e.prototype={next:function(){return this._val[this._crsr++]},hasNext:function(){return this._crsr<this._val.length}},n.prototype={next:function(){return this._object[this._iter.next()]},hasNext:function(){return this._iter.hasNext()}},t}),define("strut/importer/main",["tantaman/web/widgets/MenuItem","framework/ServiceCollection","tantaman/web/widgets/HiddenOpen","framework/Iterator","lang"],function(t,e,n,i,r){"use strict";function o(t){l.trigger(function(e){s(e,t)})}function s(t,e){function n(){r.hasNext()&&r.next().import(t,e,n)}var r=new i(a);n()}var a=null,l=new n;$("body").append(l.render().$el);var c={createMenuItems:function(e){return new t({title:r.import,handler:o,model:e})}};return{initialize:function(t){a=new e(t,"strut.importer",e.toServiceConverter),t.register({interfaces:"strut.LogoMenuItemProvider"},c)}}}),define("tantaman/web/widgets/TabbedModal",["libs/backbone"],function(t){return t.View.extend({events:{hidden:"_hidden"},className:"tabbedModal modal hide",initialize:function(){},__template:function(){return JST["tantaman.web.widgets/TabbedModal"]},_providerSelected:function(t,e){if(e){var n=$(e.currentTarget);if(this.$lastProviderTab&&this.$lastProviderTab[0]==n[0])return}this.$lastProviderTab&&this.$lastProviderTab.removeClass("active"),this.$lastProviderTab=n,this.$lastProviderTab.addClass("active"),this.__currentProvider&&this.__currentProvider.hide(),this.__currentProvider=this.__tabCollection[t],this.__providerSelected(this.__currentProvider,e),this.__currentProvider.show(this.$tabContent,this.$el)},__providerSelected:function(){},_hidden:function(){this.__currentProvider&&this.__currentProvider.hidden()},show:function(t,e){this.__cb=t,this.__$title.text(e),this.__currentProvider&&this.__currentProvider.show(this.$tabContent,this.$el),this.$el.modal("show")},render:function(){this.$el.html(this.__template()(this.__tabCollection)),this.__$ok=this.$el.find(".ok"),this.__$title=this.$el.find(".title"),this.$tabContent=this.$el.find(".tabContent");var t=this,e=this.$el.find(".providerTab");return e.each(function(e){var n=$(this);n.click(function(n){t._providerSelected(e,n)})}),this.__tabCollection.length>0&&t._providerSelected(0,{currentTarget:e[0]}),this},constructor:function(e){this.__tabCollection=e,t.View.prototype.constructor.call(this)}})}),define("strut/exporter/ExportImportModal",["tantaman/web/widgets/TabbedModal"],function(t){return t.extend({intialize:function(){},constructor:function(e,n){var i=[];n.forEach(function(t){i.push(t.createView(e))}),t.prototype.constructor.call(this,i)}})}),define("strut/exporter/main",["tantaman/web/widgets/MenuItem","framework/ServiceCollection","./ExportImportModal","lang"],function(t,e,n,i){"use strict";var r=$("#modals"),o=null,s=null,a={createMenuItems:function(e){null==o&&(o=new n(e,s),o.render(),r.append(o.$el));var a=new t({title:i.export,modal:o});return[a]}};return{initialize:function(t){s=new e(t,"strut.exporter",e.toServiceConverter),t.register({interfaces:["strut.LogoMenuItemProvider"]},a),t.register({interfaces:"strut.exporter.Collection"},s)}}}),define("strut/presentation_generator/impress/main",["./ImpressGenerator"],function(t){"use strict";var e={displayName:"Impress",id:"impress",generate:function(e){return t.render(e)},getStartPreviewFn:function(){return t.getStartPreviewFn.apply(t,arguments)},getSlideHash:function(t){return"#/step-"+(t.activeSlideIndex()+1)}};return{initialize:function(t){t.register({interfaces:"strut.presentation_generator"},e)}}}),define("strut/presentation_generator/bespoke/BespokeGenerator",[],function(){return{render:function(t){return JST["strut.presentation_generator.bespoke/BespokeTemplate"](t)},getStartPreviewFn:function(t,e,n){function i(){var t=e.previewWind;t.document.open(),t.document.write(n),t.document.close()}return i},getSlideHash:function(){return""}}}),define("strut/presentation_generator/bespoke/main",["./BespokeGenerator"],function(t){"use strict";var e={displayName:"Bespoke",id:"bespoke",generate:function(e){return t.render(e)},getStartPreviewFn:function(){return t.getStartPreviewFn.apply(t,arguments)},getSlideHash:function(){return""}};return{initialize:function(t){t.register({interfaces:"strut.presentation_generator"},e)}}}),define("strut/presentation_generator/reveal/RevealGenerator",[],function(){return{render:function(t){return JST["strut.presentation_generator.reveal/RevealTemplate"](t)},getStartPreviewFn:function(t,e,n){function i(){window.location.hash="#/"+t.activeSlideIndex();var i=e.previewWind;i.document.open(),i.document.write(n),i.document.close()}return i}}}),define("strut/presentation_generator/reveal/main",["./RevealGenerator"],function(t){"use strict";var e={displayName:"Reveal",id:"reveal",generate:function(e){return t.render(e)},getStartPreviewFn:function(){return t.getStartPreviewFn.apply(t,arguments)},getSlideHash:function(t){return"#/"+t.activeSlideIndex()}};return{initialize:function(t){t.register({interfaces:"strut.presentation_generator"},e)}}}),define("strut/presentation_generator/main",["framework/ServiceCollection"],function(t){return{initialize:function(e){var n=new t(e,"strut.presentation_generator",function(t){return t.service()});e.register("strut.presentation_generator.GeneratorCollection",n)}}}),define("tantaman/web/saver/Saver",[],function(){"use strict";function t(t,e){this.storageInterface=e,this.exportables=Array.isArray(t)?t:[t]}return t.prototype={__save:function(){this.exportables.forEach(function(t){var e=t.export(),n=t.identifier();this.storageInterface.store(n,e)},this)},save:function(){this.__save()}},t}),define("tantaman/web/saver/ExitSaver",["./Saver"],function(t){"use strict";function e(){t.apply(this,arguments),this._unloaded=this._unloaded.bind(this),$(window).unload(this._unloaded)}var n=e.prototype=Object.create(t.prototype);return n._unloaded=function(){this.__save()},n.dispose=function(){$(window).off("unload",this._unloaded)},e}),define("tantaman/web/saver/TimedSaver",["./Saver"],function(t){"use strict";function e(e,n,i){t.call(this,e,i),this._intervalH=setInterval(this.__save.bind(this),n)}var n=e.prototype=Object.create(t.prototype);return n.dispose=function(){clearInterval(this._intervalH)},e}),define("tantaman/web/saver/main",["./ExitSaver","./TimedSaver","./Saver"],function(t,e){var n={timedSaver:function(t,n,i){return new e(t,n,i)},exitSaver:function(e,n){return new t(e,n)},manualSaver:function(t,e){return new Saver(t,e)}};return{initialize:function(t){t.register({interfaces:"tantaman.web.saver.AutoSavers"},n)}}}),define("strut/slide_editor/model/SlideEditorModel",["libs/backbone"],function(t){return t.Model.extend({initialize:function(){this._editorModel.on("launch:preview",this._triggerSave,this),this._editorModel.on("change:modeId",this._triggerSave,this)},deck:function(){return this._editorModel.deck()},activeSlide:function(){return this._editorModel.deck().get("activeSlide")},isMarkdownMode:function(){return"markdown"==this.get("mode")},dispose:function(){this._editorModel.off(null,null,this),this.off()},_triggerSave:function(){this.trigger("saveEdits",null)},constructor:function(e){this._editorModel=e.editorModel,t.Model.prototype.constructor.call(this)}})}),define("strut/slide_snapshot/SlideDrawer",[],function(){"use strict";function t(t,e,n){this.$el=e,this.model=t,this.$el.css(config.slide.size),this._template=JST["strut.slide_snapshot/SlideDrawer"],this.setSize(n),this.render=this.render.bind(this),this.render=_.debounce(this.render,250),this.model.on("contentsChanged",this.render,this)}return t.prototype={render:function(){return this.$el.html(this._template(this.model.attributes)),this},rescale:function(){this.$el.css(window.browserPrefix+"transform","scale("+this.scale.x+","+this.scale.y+")")},dispose:function(){this.model.off(null,null,this)},setSize:function(t){t&&(this.size=t,this.scale={x:this.size.width/config.slide.size.width,y:this.size.height/config.slide.size.height},this.rescale())}},t}),define("strut/slide_snapshot/SlideSnapshot",["libs/backbone","./SlideDrawer","css!styles/slide_snapshot/slideSnapshot.css","strut/deck/Utils","strut/editor/GlobalEvents"],function(t,e,n,i,r){"use strict";return t.View.extend({className:"slideSnapshot",events:{click:"_clicked","click .removeBtn":"_removeClicked","mousedown .removeBtn":"_removePressed",destroyed:"dispose"},initialize:function(){this.model.on("change:selected",this._selected,this),this.model.on("change:active",this._activated,this),this.model.on("dispose",this.dispose,this),this.model.on("change:background",this._bgChanged,this),this.options.deck.on("change:background",this._bgChanged,this),this.options.deck.on("change:surface",this._bgChanged,this),this._template=JST["strut.slide_snapshot/SlideSnapshot"]},_clicked:function(){this.select()},select:function(){if(r.pressed.ctrl||r.pressed.meta||r.pressed.shift){var t;if(r.pressed.ctrl||r.pressed.meta)t=[this.model];else{this.options.deck.unselectSlides();var e=this.options.deck.get("activeSlide"),n=this.model.get("index")<=e.get("index"),i=n?this.model.get("index"):e.get("index"),o=n?e.get("index"):this.model.get("index");t=this.options.deck.get("slides").slice(i,o+1)}var s=!this.model.get("selected")||this.model.get("active");t.forEach(function(t){t.set("selected",s)})}else this.model.get("selected")&&this.model.set("selected",!1,{silent:!0}),this.model.set("selected",!0),this.model.set("active",!0)},_selected:function(t,e){e?this.$el.addClass("selected"):this.$el.removeClass("selected")},_activated:function(t,e){e?this.$el.addClass("active"):this.$el.removeClass("active")},_bgChanged:function(){var t=i.slideBackground(this.model,this.options.deck);this.$el.removeClass();var e="slideSnapshot "+t;this.model.get("active")&&(e+=" active"),this.$el.addClass(e)},render:function(){this._slideDrawer&&this._slideDrawer.dispose(),this.$el.html(this._template(this.model.attributes));var t=this.$el.find("div");this._slideDrawer=new e(this.model,t,{width:120,height:90});var n=this;return n._slideDrawer.render(),this.model.get("selected")&&this.$el.addClass("selected"),this.model.get("active")&&this.$el.addClass("active"),this._bgChanged(),this},_removeClicked:function(t){this.remove(!0),t.stopPropagation()},_removePressed:function(t){t.stopPropagation()},remove:function(e){this._slideDrawer.dispose(),this.off(),this.$el.data("jsView",null),this.model.off(null,null,this),this.options.deck.off(null,null,this),t.View.prototype.remove.apply(this,arguments),e&&this.options.deck.remove(this.model)},dispose:function(){this.disposed||(this.disposed=!0,this.remove())},constructor:function(){t.View.prototype.constructor.apply(this,arguments)}})}),define("common/Queue",[],function(){function t(){this._queue=[]}function e(){return new t}return t.prototype={take:function(){return 0!=this._queue.length?this._queue.shift():null},enqueue:function(t){this._queue.push(t)}},{create:e}}),define("common/Throttler",["common/Queue"],function(t){function e(e,n){this._handle=null,this._delay=e,this._queue=t.create(),this._context=n}return e.prototype={submit:function(t,e){this._handle?e&&this._handleFailedSubmit(t,e):this._internalSubmit(t,e)},cancel:function(){this._queue=t.create(),this._runLast=null,null!=this._handle&&(clearTimeout(this._handle),this._handle=null)},_internalSubmit:function(t,e){var n=this;this._handle=setTimeout(function(){e&&e.arguments?t.apply(n._context,e.arguments):t.call(n._context),n._internalCB()},this._delay)},_internalCB:function(){var t=this._queue.take();if(t)this._handle=this._internalSubmit(t);else if(this._runLast){var e=this._runLast;this._runLast=null,this._internalSubmit(e[0],e[1])}else this._handle=null},_handleFailedSubmit:function(t,e){switch(e.rejectionPolicy){case"queue":this._queue.enqueue(t);break;case"runLast":this._runLast=[t,e];break;case"drop":}}},e}),define("strut/slide_editor/model/WellContextMenuModel",["libs/backbone"],function(t){"use strict";return t.Model.extend({initialize:function(){this.subs=[],this._registry=this.editorModel.registry,this._createButtons(),this.subs.push(this._registry.on("registered:strut.WellContextButtonProvider",this._buttonRegistered,this)),this._slideIndex=0},_createButtons:function(){var t=this._registry.get("strut.WellContextButtonProvider"),e=[];t.forEach(function(t){e=e.concat(t.service().createButtons(this.editorModel,this))},this),this.set("contextButtons",e)},slideIndex:function(t){return null==t?this._slideIndex:(this._slideIndex=t,void 0)},dispose:function(){console.log("DISPOSING CONTEXT MENU!"),this.subs.forEach(function(t){t.dispose()})},_buttonRegistered:function(t){var e=t.service().createButtons(this.editorModel,this),n=this.get("contextButtons");e.forEach(function(t){n.push(t),this.trigger("change:contextButtons.push",n,t)},this)},constructor:function(e){this.editorModel=e,t.Model.prototype.constructor.call(this)}})}),define("strut/slide_editor/view/WellContextMenu",["libs/backbone","../model/WellContextMenuModel","css!styles/slide_editor/wellContextMenu.css"],function(t,e){"use strict";return t.View.extend({className:"wellContextMenu absolute",initialize:function(){this.model=new e(this._editorModel),this._template=JST["strut.slide_editor/WellContextMenu"],this._currentPos=-1},reposition:function(t){t.y!=this._currentPos.y&&(this.$el.css("top",t.y),this.$el.css("left",t.x),this._currentPos=t)},slideIndex:function(t){this.model.slideIndex(t)},dispose:function(){this.model.dispose()},render:function(){this.$el.html(""),this.model.get("contextButtons").forEach(function(t){this.$el.append(t.render().$el)},this)},constructor:function(e){this._editorModel=e,t.View.prototype.constructor.call(this)}})}),define("tantaman/web/interactions/Sortable",["common/EventEmitter"],function(t){"use strict";function e(e){this._$container=$(e.container),this._$container.css("position","relative"),this._pressed=this._pressed.bind(this),this._released=this._released.bind(this),this._moved=this._moved.bind(this),this._selector=e.selector||">",this._$container.on("mousedown",this._selector,this._pressed),this._$document=$(document),this._$document.on("mouseup",this._released),this._$document.on("mousemove",this._moved),this._scrollParent=e.scrollParent,this._delta={x:0,y:0},_.extend(this,new t)}return e.prototype={_pressed:function(t){this._dragging=!0,this._origPoint={x:t.pageX,y:t.pageY},this._delta.x=this._delta.y=0,this._$currentTarget=$(t.currentTarget),this._startOffset=this._$currentTarget.position(),this._startIndex={r:0|this._startOffset.top/this._h,c:0|this._startOffset.left/this._w},this._internalOffset={x:t.pageX-this._startOffset.left,y:t.pageY-this._startOffset.top},this._startScroll=this._scrollParent.scrollTop,t.preventDefault()},_buildIndex:function(t){var e=this._w=this._$currentTarget.outerWidth()/2,n=this._h=this._$currentTarget.outerHeight()/2,i=[];return t.each(function(){var t=$(this),r=t.position();t.outerHeight(),t.outerWidth;var o=0|r.top/n,s=0|r.left/e,a=i[o];null==a&&(a=[],i[o]=a);var l=a[s];null!=l?Array.isArray(l)?l.push(t):a[s]=[l,t]:a[s]=t}),i.first=t[0],i.last=t[t.length-1],i},_released:function(){if(this._dragging=!1,this._$currentTarget){if(this._$currentTarget.css({position:"",top:"",left:"","z-index":0}),this._index=void 0,!this._$placeholder)return this._$currentTarget=void 0,this._$lastItem=void 0,this._$children=void 0,void 0;this._$placeholder.after(this._$currentTarget),this._$placeholder.remove(),this._$children&&(this._sortableEnd=this._$container.find(this._selector).index(this._$currentTarget[0]),this._$currentTarget=void 0,this._$lastItem=void 0,this._$placeholder=void 0,this.emit("sortstop",this._sortableStart,this._sortableEnd))}},_moved:function(t){this._dragging&&(null==this._index&&(this._$children=this._$container.find(this._selector),this._index=this._buildIndex(this._$children),this._$placeholder=$('<div class="placeholder"></div>'),this._$currentTarget.css({position:"absolute","z-index":1}),this._sortableStart=this._$children.index(this._$currentTarget[0]),this._$currentTarget.after(this._$placeholder)),this._doDrag(t))},_doDrag:function(t){var e=this._startScroll-this._scrollParent.scrollTop,n=t.pageY-e-this._origPoint.y,i=t.pageX-this._origPoint.x,r=this._startOffset.top+n,o=this._startOffset.left+i,s=0|r/this._h,a=0|o/this._w,l=t.pageY-e-this._internalOffset.y,c=t.pageX-this._internalOffset.x,u=this._index[s],h=this._getClosest(u&&u[a],c,l);if(h&&h[0]!=this._$currentTarget[0])if(h!=this._$lastItem)h.after(this._$placeholder),this._$lastItem=h,this._lastDir="";else if(h[0]==this._index.first&&h.position().top>l){var d=this._$placeholder.position().top;"before"!=this._lastDir&&d>l?(this._lastDir="before",h.before(this._$placeholder)):"after"!=this._lastDir&&l>d&&(this._lastDir="after",h.after(this._$placeholder))}this._$currentTarget.css({top:l,left:c})},_getClosest:function(t,e,n){if(Array.isArray(t)){var i,r=Number.NAX_VALUE;return t.forEach(function(t){var o=t.position(),s=Math.sqrt(Math.pow(e-o.left,2)+Math.pow(n-o.top,2));r>s&&(r=s,i=t)},this),i}return t},dispose:function(){this._$document.off("mouseup",this._released),this._$document.off("mousemove",this._moved),this.removeAllListeners()}},e}),define("strut/slide_editor/view/SlideWell",["libs/backbone","strut/slide_snapshot/SlideSnapshot","common/Throttler","./WellContextMenu","tantaman/web/interactions/Sortable","strut/editor/GlobalEvents","css!styles/slide_editor/slideWell.css"],function(t,e,n,i,r,o){"use strict";return t.View.extend({events:{mousemove:"_showContextMenu",destroyed:"dispose",mousedown:"_focused"},className:"slideWell",initialize:function(){this._deck.on("slideAdded",this._slideAdded,this),this._deck.on("slidesReset",this._slidesReset,this),this._doShowContextMenu=this._doShowContextMenu.bind(this),this._throttler=new n(100),this._contextMenu=new i(this._editorModel),this._contextMenu.render(),this.$slides=$("<div>"),this._sortable=new r({container:this.$slides,selector:"> .slideSnapshot",scrollParent:this.$el[0]}),this._sortable.on("sortstop",this._sortStopped,this),o.on("cut",this._cut,this),o.on("copy",this._copy,this),o.on("paste",this._paste,this),o.on("delete",this._delete,this),this._clipboard=this._editorModel.clipboard},_focused:function(){this._editorModel.set("scope","slideWell")},_cut:function(){if("slideWell"==this._editorModel.get("scope")){var t=this._deck.selected;this._clipboard.setItems(t),this._deck.remove(t)}},_copy:function(){if("slideWell"==this._editorModel.get("scope")){var t=this._deck.selected;this._clipboard.setItems(t)}},_paste:function(){var t=this._clipboard.getItems();null!=t&&t.length&&void 0!=t[0].type&&"slide"==t[0].type&&this._deck.add(t)},_delete:function(){if("slideWell"==this._editorModel.get("scope")){var t=this._deck.selected;this._deck.remove(t)}},_sortStopped:function(t,e){this._deck.moveSlide(t,e)},_showContextMenu:function(t){this._throttler.submit(this._doShowContextMenu,{rejectionPolicy:"runLast",arguments:[t]})},_doShowContextMenu:function(t){var e=t.pageY-this.$slides.position().top,n=114*(0|(e+40)/114)-5;this._contextMenu.reposition({x:this.$slides.width()/2-this._contextMenu.$el.outerWidth()/2,y:n}),this._contextMenu.slideIndex(Math.ceil(n/114))},_slidesReset:function(t){var e=0;t.forEach(function(t){this._slideAdded(t,e),e+=1},this)},_slideAdded:function(t,n){var i=new e({model:t,deck:this._deck,registry:this._registry});if(0==n)this.$slides.prepend(i.render().$el);else{var r=$(".slideSnapshot");n>=r.length?this.$slides.append(i.render().$el):$(r[n]).before(i.render().$el)}},render:function(){this.$slides.html(""),this.$el.html(this.$slides),this._deck.get("slides").forEach(function(t){var n=new e({model:t,deck:this._deck,registry:this._registry});this.$slides.append(n.render().$el)},this),this.$el.append(this._contextMenu.$el);var t=this;return setTimeout(function(){t._doShowContextMenu({pageY:100})},0),this},dispose:function(){this._deck.off(null,null,this),this._contextMenu.dispose(),this._sortable.dispose(),o.off(null,null,this)},constructor:function(e){this._deck=e.deck(),this._registry=e.registry,this._editorModel=e,t.View.prototype.constructor.call(this)}})}),define("strut/deck/Component",["./SpatialObject"],function(t){var e,n;return n={x:config.slide.size.width/3,y:config.slide.size.height/3},e={x:1,y:1},t.extend({initialize:function(){return _.defaults(this.attributes,n),void 0===this.attributes.scale?(this.attributes.scale={},_.defaults(this.attributes.scale,e)):void 0},customClasses:function(t){return null==t?this.get("customClasses"):(this.set("customClasses",t),void 0)},dispose:function(){this.trigger("dispose",this),this.off()},constructor:function(){t.prototype.constructor.apply(this,arguments)}})}),define("strut/slide_editor/view/OperatingTableContextMenu",["lang","libs/backbone","strut/themes/AvailableBackgrounds"],function(t,e,n){function i(){this.on("change:background",this._backgroundChanged),this.on("change:markdown",this._markdownModeChanged),this._previewBackground=this._previewBackground.bind(this),this._restoreBackground=this._restoreBackground.bind(this)}function r(){c=$(".slideContainer")}function o(t){t.$menu}_.extend(i.prototype,e.Events),i.prototype.setModel=function(t){this.model=t},i.prototype._backgroundChanged=function(t,e){this.model.setBackground(e)},i.prototype._markdownModeChanged=function(t,e){"edit"==e?this.model.editMarkdown():this.model.stopEditingMarkdown()},i.prototype._previewBackground=function(t){this._preview=t.currentTarget.dataset.background,c.removeClass(this.model.getBackground()),c.addClass(this._preview)},i.prototype._restoreBackground=function(){c.removeClass(this._preview),c.addClass(this.model.getBackground())};var s=new i,a={background:{name:t.single_slide_bg,icon:"tint",items:{}},markdown:{name:"Markdown",icon:"markdown",className:"markdown-menu",items:{"markdown:edit":{icon:"edit",name:"Edit"},"markdown:preview":{icon:"search",name:"Preview"}}}},l=a.background.items;n.backgrounds.forEach(function(t){l["background:"+t.klass]={name:"",background:t.klass}}),l["background:defaultbg"]={name:t.invisible,background:"defaultbg"},l["background:"]={name:t.reset,background:void 0},$.contextMenu({selector:".slideContainer",callback:function(t){var e=t.split(":");s.trigger("change:"+e[0],t,e[1])},events:{show:r,shown:o},items:a});var c=null;return $('.context-menu-item[class*="solid-bg-"]').hover(s._previewBackground,s._restoreBackground),s}),define("strut/slide_editor/view/Utils",{computeSlideDimensions:function(t){var e=t.width(),n=t.height(),i=config.slide.size,r=e/i.width,o=(n-20)/i.height,s=i.height*r;if(s>n)var a=o;else var a=r;var l=a*i.width,c=e-l;return{scale:a,remainingWidth:c,scaledWidth:l}}}),define("strut/slide_editor/view/Tablets",["./Utils"],function(){function t(t,e){this.$el=$('<div class="tablets">'),this.tabs=e,this.model=t,this.model.on("change:mode",this._modeChanged,this);var n=this;this.$el.on("click","div",function(t){n._tabClicked(t)})}return t.prototype={render:function(){return this.tabs.forEach(function(t){var e=$('<div class="'+t.key+'" data-key="'+t.key+'"><i class="icon icon-'+t.icon+'"></i><span>'+t.name+"</span></div>");t.active&&e.addClass("active"),this.$el.append(e)},this),this},dispose:function(){this.model.off(null,null,this)},_modeChanged:function(t,e){this.$el.find(".active").removeClass("active");var n=this.$el.find("."+e);n.addClass("active")},_tabClicked:function(t){this.model.set("mode",t.currentTarget.dataset.key)}},t}),define("strut/slide_editor/view/OperatingTable",["libs/backbone","css!styles/slide_editor/operatingTable.css","strut/slide_components/ComponentFactory","strut/editor/GlobalEvents","strut/deck/Component","./OperatingTableContextMenu","strut/deck/Utils","./Utils","./Tablets","marked"],function(t,e,n,i,r,o,s,a,l,c){"use strict";function u(){}return u.prototype={getBackground:function(){return s.slideBackground(this.slide,this.deck)},setBackground:function(t){this.slide.set("background",t)},editMarkdown:function(){this.slideEditorModel.set("mode","markdown")},stopEditingMarkdown:function(){this.slideEditorModel.set("mode","preview")}},t.View.extend({className:"operatingTable",events:{click:"_clicked",focused:"_focus",dragover:"_dragover",drop:"_drop",destroyed:"dispose"},initialize:function(){this._resize=this._resize.bind(this),$(window).resize(this._resize),this._menuModel=new u,this._menuModel.deck=this._deck,this._menuModel.slideEditorModel=this._slideEditorModel,this._deck.on("change:activeSlide",function(t,e){this.setModel(e)},this),this._deck.on("change:background",this._updateBg,this),this._deck.on("change:surface",this._updateSurface,this),this.setModel(this._deck.get("activeSlide")),i.on("cut",this._cut,this),i.on("copy",this._copy,this),i.on("paste",this._paste,this),i.on("delete",this._delete,this),this._clipboard=this._editorModel.clipboard,this._tablets=new l(this._slideEditorModel,[{icon:"markdown",name:"",key:"markdown"},{icon:"search",name:"",active:!0,key:"preview"}]),o.setModel(this._menuModel)},render:function(){this._$slideContainer=$('<div class="slideContainer"></div>'),this.$el.html(this._$slideContainer),this.$el.append(this._tablets.render().$el),this._$slideContainer.css(config.slide.size),this._$slideContainer.addClass(s.slideBackground(this.model,this._deck)),this._$markdownContent=$('<div class="markdownArea themedArea reveal"></div>'),this._$slideContainer.append(this._$markdownContent);var t=this;return setTimeout(function(){t._rendered=!0,t._resize(),t._renderContents()},0),this},_updateBg:function(t,e){this._$slideContainer&&(this._$slideContainer.removeClass(),e=s.slideBackground(this.model,this._deck),this._$slideContainer.addClass("slideContainer "+e))},_updateSurface:function(t,e){var n=this._deck.get("background");"defaultbg"==n&&this._updateBg(t,e)},_cut:function(){if("operatingTable"==this._editorModel.get("scope")){var t=this.model.selected;t.length&&(this._clipboard.setItems(t),this.model.remove(t))}},_copy:function(){if("operatingTable"==this._editorModel.get("scope")){var t=this.model.selected;t.length&&this._clipboard.setItems(t)}},_paste:function(){var t=this._clipboard.getItems();null!=t&&t.length&&t[0]instanceof r&&this.model.add(t)},_delete:function(){if("operatingTable"==this._editorModel.get("scope")){var t=this.model.selected;t.length&&this.model.remove(t)}},_clicked:function(){this._focus(),this.model.get("components").forEach(function(t){t.get("selected")&&t.set("selected",!1)}),this.$el.find(".editable").removeClass("editable").attr("contenteditable",!1).trigger("editComplete"),this._focus()},_focus:function(){this._editorModel.set("scope","operatingTable")},_dragover:function(t){t.stopPropagation(),t.preventDefault(),t.originalEvent.dataTransfer.dropEffect="copy"},_drop:function(t){t.stopPropagation(),t.preventDefault();var e=t.originalEvent.dataTransfer.files[0];if(e.type.match("image.*")){var i=new FileReader,r=this;i.onload=function(t){r.model.add(n.instance.createModel({type:"Image",src:t.target.result}))},i.readAsDataURL(e)}},_componentAdded:function(t,e){var i=n.instance.createView(e);this._$slideContainer.append(i.render())},setModel:function(t){var e=this.model;if(this.model!==t)return null!=this.model&&this.model.off(null,null,this),this.model=t,null!=this.model&&(this.model.on("change:components.add",this._componentAdded,this),this.model.on("change:background",this._updateBg,this),this.model.on("change:markdown",this._renderMarkdown,this),this._updateBg()),this._renderContents(e),this._menuModel.slide=t,this},dispose:function(){$(window).off("resize",this._resize),this._deck.off(null,null,this),this.model&&this.model.off(null,null,this),i.off(null,null,this),this._tablets.dispose()},_renderContents:function(t){if(null!=t&&t.trigger("unrender",!0),this._rendered&&null!=this.model){var e=this.model.get("components");e.forEach(function(t){var e=n.instance.createView(t);this._$slideContainer.append(e.render())},this),this._renderMarkdown()}},_renderMarkdown:function(){this.model.get("markdown")?this._$markdownContent.html(c(this.model.get("markdown"))):this._$markdownContent.html("")},_resize:function(){var t=a.computeSlideDimensions(this.$el);this._$slideContainer.css({"margin-left":t.remainingWidth/2,"margin-right":t.remainingWidth/2}),this._$slideContainer.css(window.browserPrefix+"transform","scale("+t.scale+")")},constructor:function(e,n){this._deck=e.deck(),this._registry=e.registry,this._editorModel=e,this._slideEditorModel=n,t.View.prototype.constructor.call(this)}})}),console.log("Loaded mirror"),window.CodeMirror=function(){"use strict";function t(n,i){if(!(this instanceof t))return new t(n,i);this.options=i=i||{};for(var r in io)!i.hasOwnProperty(r)&&io.hasOwnProperty(r)&&(i[r]=io[r]);d(i);var o="string"==typeof i.value?0:i.value.first,s=this.display=e(n,o);s.wrapper.CodeMirror=this,c(this),i.autofocus&&!Or&&pe(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,draggingText:!1,highlight:new qi},a(this),i.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");var l=i.value;"string"==typeof l&&(l=new yo(i.value,i.mode)),oe(this,ui)(this,l),Cr&&setTimeout(tr(de,this,!0),20),ge(this);var u;try{u=document.activeElement==s.input}catch(h){}u||i.autofocus&&!Or?setTimeout(tr(Ae,this),20):Ie(this),oe(this,function(){for(var t in no)no.propertyIsEnumerable(t)&&no[t](this,i[t],ro);for(var e=0;lo.length>e;++e)lo[e](this)})()}function e(t,e){var n={},i=n.input=ir("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");return Tr?i.style.width="1000px":i.setAttribute("wrap","off"),Hr&&(i.style.border="1px solid black"),i.setAttribute("autocorrect","off"),i.setAttribute("autocapitalize","off"),i.setAttribute("spellcheck","false"),n.inputDiv=ir("div",[i],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),n.scrollbarH=ir("div",[ir("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),n.scrollbarV=ir("div",[ir("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),n.scrollbarFiller=ir("div",null,"CodeMirror-scrollbar-filler"),n.gutterFiller=ir("div",null,"CodeMirror-gutter-filler"),n.lineDiv=ir("div",null,"CodeMirror-code"),n.selectionDiv=ir("div",null,null,"position: relative; z-index: 1"),n.cursor=ir("div"," ","CodeMirror-cursor"),n.otherCursor=ir("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"),n.measure=ir("div",null,"CodeMirror-measure"),n.lineSpace=ir("div",[n.measure,n.selectionDiv,n.lineDiv,n.cursor,n.otherCursor],null,"position: relative; outline: none"),n.mover=ir("div",[ir("div",[n.lineSpace],"CodeMirror-lines")],null,"position: relative"),n.sizer=ir("div",[n.mover],"CodeMirror-sizer"),n.heightForcer=ir("div",null,null,"position: absolute; height: "+ko+"px; width: 1px;"),n.gutters=ir("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=ir("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=ir("div",[n.inputDiv,n.scrollbarH,n.scrollbarV,n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),Sr&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),t.appendChild?t.appendChild(n.wrapper):t(n.wrapper),Hr&&(i.style.width="0px"),Tr||(n.scroller.draggable=!0),Ir?(n.inputDiv.style.height="1px",n.inputDiv.style.position="absolute"):Sr&&(n.scrollbarH.style.minWidth=n.scrollbarV.style.minWidth="18px"),n.viewOffset=n.lastSizeC=0,n.showingFrom=n.showingTo=e,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.prevInput="",n.alignWidgets=!1,n.pollingFast=!1,n.poll=new qi,n.cachedCharWidth=n.cachedTextHeight=null,n.measureLineCache=[],n.measureLineCachePos=0,n.inaccurateSelection=!1,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n
}function n(e){e.doc.mode=t.getMode(e.options,e.doc.modeOption),e.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),e.doc.frontier=e.doc.first,I(e,100),e.state.modeGen++,e.curOp&&le(e)}function i(t){t.options.lineWrapping?(t.display.wrapper.className+=" CodeMirror-wrap",t.display.sizer.style.minWidth=""):(t.display.wrapper.className=t.display.wrapper.className.replace(" CodeMirror-wrap",""),h(t)),o(t),le(t),q(t),setTimeout(function(){p(t)},100)}function r(t){var e=ee(t.display),n=t.options.lineWrapping,i=n&&Math.max(5,t.display.scroller.clientWidth/ne(t.display)-3);return function(r){return zn(t.doc,r)?0:n?(Math.ceil(r.text.length/i)||1)*e:e}}function o(t){var e=t.doc,n=r(t);e.iter(function(t){var e=n(t);e!=t.height&&fi(t,e)})}function s(t){var e=ho[t.options.keyMap],n=e.style;t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(n?" cm-keymap-"+n:""),t.state.disableInput=e.disableInput}function a(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),q(t)}function l(t){c(t),le(t),setTimeout(function(){g(t)},20)}function c(t){var e=t.display.gutters,n=t.options.gutters;rr(e);for(var i=0;n.length>i;++i){var r=n[i],o=e.appendChild(ir("div",null,"CodeMirror-gutter "+r));"CodeMirror-linenumbers"==r&&(t.display.lineGutter=o,o.style.width=(t.display.lineNumWidth||1)+"px")}e.style.display=i?"":"none"}function u(t,e){if(0==e.height)return 0;for(var n,i=e.text.length,r=e;n=On(r);){var o=n.find();r=hi(t,o.from.line),i+=o.from.ch-o.to.ch}for(r=e;n=Bn(r);){var o=n.find();i-=r.text.length-o.from.ch,r=hi(t,o.to.line),i+=r.text.length-o.to.ch}return i}function h(t){var e=t.display,n=t.doc;e.maxLine=hi(n,n.first),e.maxLineLength=u(n,e.maxLine),e.maxLineChanged=!0,n.iter(function(t){var i=u(n,t);i>e.maxLineLength&&(e.maxLineLength=i,e.maxLine=t)})}function d(t){for(var e=!1,n=0;t.gutters.length>n;++n)"CodeMirror-linenumbers"==t.gutters[n]&&(t.lineNumbers?e=!0:t.gutters.splice(n--,1));!e&&t.lineNumbers&&t.gutters.push("CodeMirror-linenumbers")}function p(t){var e=t.display,n=t.doc.height,i=n+O(e);e.sizer.style.minHeight=e.heightForcer.style.top=i+"px",e.gutters.style.height=Math.max(i,e.scroller.clientHeight-ko)+"px";var r=Math.max(i,e.scroller.scrollHeight),o=e.scroller.scrollWidth>e.scroller.clientWidth+1,s=r>e.scroller.clientHeight+1;s?(e.scrollbarV.style.display="block",e.scrollbarV.style.bottom=o?cr(e.measure)+"px":"0",e.scrollbarV.firstChild.style.height=r-e.scroller.clientHeight+e.scrollbarV.clientHeight+"px"):(e.scrollbarV.style.display="",e.scrollbarV.firstChild.style.height="0"),o?(e.scrollbarH.style.display="block",e.scrollbarH.style.right=s?cr(e.measure)+"px":"0",e.scrollbarH.firstChild.style.width=e.scroller.scrollWidth-e.scroller.clientWidth+e.scrollbarH.clientWidth+"px"):(e.scrollbarH.style.display="",e.scrollbarH.firstChild.style.width="0"),o&&s?(e.scrollbarFiller.style.display="block",e.scrollbarFiller.style.height=e.scrollbarFiller.style.width=cr(e.measure)+"px"):e.scrollbarFiller.style.display="",o&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(e.gutterFiller.style.display="block",e.gutterFiller.style.height=cr(e.measure)+"px",e.gutterFiller.style.width=e.gutters.offsetWidth+"px"):e.gutterFiller.style.display="",Nr&&0===cr(e.measure)&&(e.scrollbarV.style.minWidth=e.scrollbarH.style.minHeight=Pr?"18px":"12px")}function f(t,e,n){var i=t.scroller.scrollTop,r=t.wrapper.clientHeight;"number"==typeof n?i=n:n&&(i=n.top,r=n.bottom-n.top),i=Math.floor(i-H(t));var o=Math.ceil(i+r);return{from:mi(e,i),to:mi(e,o)}}function g(t){var e=t.display;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var n=y(e)-e.scroller.scrollLeft+t.doc.scrollLeft,i=e.gutters.offsetWidth,r=n+"px",o=e.lineDiv.firstChild;o;o=o.nextSibling)if(o.alignable)for(var s=0,a=o.alignable;a.length>s;++s)a[s].style.left=r;t.options.fixedGutter&&(e.gutters.style.left=n+i+"px")}}function m(t){if(!t.options.lineNumbers)return!1;var e=t.doc,n=v(t.options,e.first+e.size-1),i=t.display;if(n.length!=i.lineNumChars){var r=i.measure.appendChild(ir("div",[ir("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=r.firstChild.offsetWidth,s=r.offsetWidth-o;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(o,i.lineGutter.offsetWidth-s),i.lineNumWidth=i.lineNumInnerWidth+s,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",!0}return!1}function v(t,e){return t.lineNumberFormatter(e+t.firstLineNumber)+""}function y(t){return ar(t.scroller).left-ar(t.sizer).left}function b(t,e,n,i){for(var r,o=t.display.showingFrom,s=t.display.showingTo,a=f(t.display,t.doc,n);w(t,e,a,i)&&(i=!1,r=!0,M(t),p(t),n&&(n=Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,"number"==typeof n?n:n.top)),a=f(t.display,t.doc,n),!(a.from>=t.display.showingFrom&&a.to<=t.display.showingTo));)e=[];return r&&(zi(t,"update",t),(t.display.showingFrom!=o||t.display.showingTo!=s)&&zi(t,"viewportChange",t,t.display.showingFrom,t.display.showingTo)),r}function w(t,e,n,i){var r=t.display,o=t.doc;if(!r.wrapper.clientWidth)return r.showingFrom=r.showingTo=o.first,r.viewOffset=0,void 0;if(!(!i&&0==e.length&&n.from>r.showingFrom&&n.to<r.showingTo)){m(t)&&(e=[{from:o.first,to:o.first+o.size}]);var s=r.sizer.style.marginLeft=r.gutters.offsetWidth+"px";r.scrollbarH.style.left=t.options.fixedGutter?s:"0";var a=1/0;if(t.options.lineNumbers)for(var l=0;e.length>l;++l)e[l].diff&&a>e[l].from&&(a=e[l].from);var c=o.first+o.size,u=Math.max(n.from-t.options.viewportMargin,o.first),h=Math.min(c,n.to+t.options.viewportMargin);if(u>r.showingFrom&&20>u-r.showingFrom&&(u=Math.max(o.first,r.showingFrom)),r.showingTo>h&&20>r.showingTo-h&&(h=Math.min(c,r.showingTo)),Xr)for(u=gi(jn(o,hi(o,u)));c>h&&zn(o,hi(o,h));)++h;var d=[{from:Math.max(r.showingFrom,o.first),to:Math.min(r.showingTo,c)}];if(d=d[0].from>=d[0].to?[]:k(d,e),Xr)for(var l=0;d.length>l;++l)for(var p,f=d[l];p=Bn(hi(o,f.to-1));){var g=p.find().from.line;if(!(g>f.from)){d.splice(l--,1);break}f.to=g}for(var v=0,l=0;d.length>l;++l){var f=d[l];u>f.from&&(f.from=u),f.to>h&&(f.to=h),f.from>=f.to?d.splice(l--,1):v+=f.to-f.from}if(!i&&v==h-u&&u==r.showingFrom&&h==r.showingTo)return _(t),void 0;d.sort(function(t,e){return t.from-e.from});try{var y=document.activeElement}catch(b){}.7*(h-u)>v&&(r.lineDiv.style.display="none"),S(t,u,h,d,a),r.lineDiv.style.display="",y&&document.activeElement!=y&&y.offsetHeight&&y.focus();var w=u!=r.showingFrom||h!=r.showingTo||r.lastSizeC!=r.wrapper.clientHeight;return w&&(r.lastSizeC=r.wrapper.clientHeight,I(t,400)),r.showingFrom=u,r.showingTo=h,x(t),_(t),!0}}function x(t){for(var e,n=t.display,i=n.lineDiv.offsetTop,r=n.lineDiv.firstChild;r;r=r.nextSibling)if(r.lineObj){if(Sr){var o=r.offsetTop+r.offsetHeight;e=o-i,i=o}else{var s=ar(r);e=s.bottom-s.top}var a=r.lineObj.height-e;if(2>e&&(e=ee(n)),a>.001||-.001>a){fi(r.lineObj,e);var l=r.lineObj.widgets;if(l)for(var c=0;l.length>c;++c)l[c].height=l[c].node.offsetHeight}}}function _(t){var e=t.display.viewOffset=vi(t,hi(t.doc,t.display.showingFrom));t.display.mover.style.top=e+"px"}function k(t,e){for(var n=0,i=e.length||0;i>n;++n){for(var r=e[n],o=[],s=r.diff||0,a=0,l=t.length;l>a;++a){var c=t[a];r.to<=c.from&&r.diff?o.push({from:c.from+s,to:c.to+s}):r.to<=c.from||r.from>=c.to?o.push(c):(r.from>c.from&&o.push({from:c.from,to:r.from}),r.to<c.to&&o.push({from:r.to+s,to:c.to+s}))}t=o}return t}function C(t){for(var e=t.display,n={},i={},r=e.gutters.firstChild,o=0;r;r=r.nextSibling,++o)n[t.options.gutters[o]]=r.offsetLeft,i[t.options.gutters[o]]=r.offsetWidth;return{fixedPos:y(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:e.wrapper.clientWidth}}function S(t,e,n,i,r){function o(e){var n=e.nextSibling;return Tr&&Br&&t.display.currentWheelTarget==e?(e.style.display="none",e.lineObj=null):e.parentNode.removeChild(e),n}var s=C(t),a=t.display,l=t.options.lineNumbers;i.length||Tr&&t.display.currentWheelTarget||rr(a.lineDiv);var c=a.lineDiv,u=c.firstChild,h=i.shift(),d=e;for(t.doc.iter(e,n,function(e){if(h&&h.to==d&&(h=i.shift()),zn(t.doc,e)){if(0!=e.height&&fi(e,0),e.widgets&&u&&u.previousSibling)for(var n=0;e.widgets.length>n;++n){var a=e.widgets[n];if(a.showIfHidden){var p=u.previousSibling;if(/pre/i.test(p.nodeName)){var f=ir("div",null,null,"position: relative");p.parentNode.replaceChild(f,p),f.appendChild(p),p=f}var g=p.appendChild(ir("div",[a.node],"CodeMirror-linewidget"));a.handleMouseEvents||(g.ignoreEvents=!0),T(a,g,p,s)}}}else if(h&&d>=h.from&&h.to>d){for(;u.lineObj!=e;)u=o(u);l&&d>=r&&u.lineNumber&&sr(u.lineNumber,v(t.options,d)),u=u.nextSibling}else{if(e.widgets)for(var m,y=0,b=u;b&&20>y;++y,b=b.nextSibling)if(b.lineObj==e&&/div/i.test(b.nodeName)){m=b;break}var w=$(t,e,d,s,m);if(w!=m)c.insertBefore(w,u);else{for(;u!=m;)u=o(u);u=u.nextSibling}w.lineObj=e}++d});u;)u=o(u)}function $(t,e,n,i,r){var o,s=ti(t,e),a=e.gutterMarkers,l=t.display;if(!(t.options.lineNumbers||a||e.bgClass||e.wrapClass||e.widgets))return s;if(r){r.alignable=null;for(var c,u=!0,h=0,d=null,p=r.firstChild;p;p=c)if(c=p.nextSibling,/\bCodeMirror-linewidget\b/.test(p.className)){for(var f=0;e.widgets.length>f;++f){var g=e.widgets[f];if(g.node==p.firstChild){g.above||d||(d=p),T(g,p,r,i),++h;break}}if(f==e.widgets.length){u=!1;break}}else r.removeChild(p);r.insertBefore(s,d),u&&h==e.widgets.length&&(o=r,r.className=e.wrapClass||"")}if(o||(o=ir("div",null,e.wrapClass,"position: relative"),o.appendChild(s)),e.bgClass&&o.insertBefore(ir("div",null,e.bgClass+" CodeMirror-linebackground"),o.firstChild),t.options.lineNumbers||a){var m=o.insertBefore(ir("div",null,null,"position: absolute; left: "+(t.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px"),o.firstChild);if(t.options.fixedGutter&&(o.alignable||(o.alignable=[])).push(m),!t.options.lineNumbers||a&&a["CodeMirror-linenumbers"]||(o.lineNumber=m.appendChild(ir("div",v(t.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+l.lineNumInnerWidth+"px"))),a)for(var y=0;t.options.gutters.length>y;++y){var b=t.options.gutters[y],w=a.hasOwnProperty(b)&&a[b];w&&m.appendChild(ir("div",[w],"CodeMirror-gutter-elt","left: "+i.gutterLeft[b]+"px; width: "+i.gutterWidth[b]+"px"))}}if(Sr&&(o.style.zIndex=2),e.widgets&&o!=r)for(var f=0,x=e.widgets;x.length>f;++f){var g=x[f],_=ir("div",[g.node],"CodeMirror-linewidget");g.handleMouseEvents||(_.ignoreEvents=!0),T(g,_,o,i),g.above?o.insertBefore(_,t.options.lineNumbers&&0!=e.height?m:s):o.appendChild(_),zi(g,"redraw")}return o}function T(t,e,n,i){if(t.noHScroll){(n.alignable||(n.alignable=[])).push(e);var r=i.wrapperWidth;e.style.left=i.fixedPos+"px",t.coverGutter||(r-=i.gutterTotalWidth,e.style.paddingLeft=i.gutterTotalWidth+"px"),e.style.width=r+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-i.gutterTotalWidth+"px"))}function M(t){var e=t.display,n=qe(t.doc.sel.from,t.doc.sel.to);if(n||t.options.showCursorWhenSelecting?E(t):e.cursor.style.display=e.otherCursor.style.display="none",n?e.selectionDiv.style.display="none":L(t),t.options.moveInputWithCursor){var i=K(t,t.doc.sel.head,"div"),r=ar(e.wrapper),o=ar(e.lineDiv);e.inputDiv.style.top=Math.max(0,Math.min(e.wrapper.clientHeight-10,i.top+o.top-r.top))+"px",e.inputDiv.style.left=Math.max(0,Math.min(e.wrapper.clientWidth-10,i.left+o.left-r.left))+"px"}}function E(t){var e=t.display,n=K(t,t.doc.sel.head,"div");e.cursor.style.left=n.left+"px",e.cursor.style.top=n.top+"px",e.cursor.style.height=Math.max(0,n.bottom-n.top)*t.options.cursorHeight+"px",e.cursor.style.display="",n.other?(e.otherCursor.style.display="",e.otherCursor.style.left=n.other.left+"px",e.otherCursor.style.top=n.other.top+"px",e.otherCursor.style.height=.85*(n.other.bottom-n.other.top)+"px"):e.otherCursor.style.display="none"}function L(t){function e(t,e,n,i){0>e&&(e=0),s.appendChild(ir("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px; top: "+e+"px; width: "+(null==n?a-t:n)+"px; height: "+(i-e)+"px"))}function n(n,i,o){function s(e,i){return J(t,Ve(n,e),"div",h,i)}var c,u,h=hi(r,n),d=h.text.length;return hr(yi(h),i||0,null==o?d:o,function(t,n,r){var h,p,f,g=s(t,"left");if(t==n)h=g,p=f=g.left;else{if(h=s(n-1,"right"),"rtl"==r){var m=g;g=h,h=m}p=g.left,f=h.right}null==i&&0==t&&(p=l),h.top-g.top>3&&(e(p,g.top,null,g.bottom),p=l,g.bottom<h.top&&e(p,g.bottom,null,h.top)),null==o&&n==d&&(f=a),(!c||g.top<c.top||g.top==c.top&&g.left<c.left)&&(c=g),(!u||h.bottom>u.bottom||h.bottom==u.bottom&&h.right>u.right)&&(u=h),l+1>p&&(p=l),e(p,h.top,f-p,h.bottom)}),{start:c,end:u}}var i=t.display,r=t.doc,o=t.doc.sel,s=document.createDocumentFragment(),a=i.lineSpace.offsetWidth,l=B(t.display);if(o.from.line==o.to.line)n(o.from.line,o.from.ch,o.to.ch);else{var c=hi(r,o.from.line),u=hi(r,o.to.line),h=jn(r,c)==jn(r,u),d=n(o.from.line,o.from.ch,h?c.text.length:null).end,p=n(o.to.line,h?0:null,o.to.ch).start;h&&(d.top<p.top-2?(e(d.right,d.top,null,d.bottom),e(l,p.top,p.left,p.bottom)):e(d.right,d.top,p.left-d.right,d.bottom)),d.bottom<p.top&&e(l,d.bottom,null,p.top)}or(i.selectionDiv,s),i.selectionDiv.style.display=""}function A(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var n=!0;e.cursor.style.visibility=e.otherCursor.style.visibility="",t.options.cursorBlinkRate>0&&(e.blinker=setInterval(function(){e.cursor.style.visibility=e.otherCursor.style.visibility=(n=!n)?"":"hidden"},t.options.cursorBlinkRate))}}function I(t,e){t.doc.mode.startState&&t.doc.frontier<t.display.showingTo&&t.state.highlight.set(e,tr(N,t))}function N(t){var e=t.doc;if(e.frontier<e.first&&(e.frontier=e.first),!(e.frontier>=t.display.showingTo)){var n,i=+new Date+t.options.workTime,r=vn(e.mode,D(t,e.frontier)),o=[];e.iter(e.frontier,Math.min(e.first+e.size,t.display.showingTo+500),function(s){if(e.frontier>=t.display.showingFrom){var a=s.styles;s.styles=Jn(t,s,r);for(var l=!a||a.length!=s.styles.length,c=0;!l&&a.length>c;++c)l=a[c]!=s.styles[c];l&&(n&&n.end==e.frontier?n.end++:o.push(n={start:e.frontier,end:e.frontier+1})),s.stateAfter=vn(e.mode,r)}else Zn(t,s,r),s.stateAfter=0==e.frontier%5?vn(e.mode,r):null;return++e.frontier,+new Date>i?(I(t,t.options.workDelay),!0):void 0}),o.length&&oe(t,function(){for(var t=0;o.length>t;++t)le(this,o[t].start,o[t].end)})()}}function P(t,e,n){for(var i,r,o=t.doc,s=t.doc.mode.innerMode?1e3:100,a=e,l=e-s;a>l;--a){if(o.first>=a)return o.first;var c=hi(o,a-1);if(c.stateAfter&&(!n||o.frontier>=a))return a;var u=Ui(c.text,null,t.options.tabSize);(null==r||i>u)&&(r=a-1,i=u)}return r}function D(t,e,n){var i=t.doc,r=t.display;if(!i.mode.startState)return!0;var o=P(t,e,n),s=o>i.first&&hi(i,o-1).stateAfter;return s=s?vn(i.mode,s):yn(i.mode),i.iter(o,e,function(n){Zn(t,n,s);var a=o==e-1||0==o%5||o>=r.showingFrom&&r.showingTo>o;n.stateAfter=a?vn(i.mode,s):null,++o}),s}function H(t){return t.lineSpace.offsetTop}function O(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function B(t){var e=or(t.measure,ir("pre",null,null,"text-align: left")).appendChild(ir("span","x"));return e.offsetLeft}function j(t,e,n,i,r){var o=-1;i=i||F(t,e);for(var s=n;;s+=o){var a=i[s];if(a)break;0>o&&0==s&&(o=1)}return r=s>n?"left":n>s?"right":r,"left"==r&&a.leftSide?a=a.leftSide:"right"==r&&a.rightSide&&(a=a.rightSide),{left:n>s?a.right:a.left,right:s>n?a.left:a.right,top:a.top,bottom:a.bottom}}function z(t,e){for(var n=t.display.measureLineCache,i=0;n.length>i;++i){var r=n[i];if(r.text==e.text&&r.markedSpans==e.markedSpans&&t.display.scroller.clientWidth==r.width&&r.classes==e.textClass+"|"+e.bgClass+"|"+e.wrapClass)return r}}function R(t,e){var n=z(t,e);n&&(n.text=n.measure=n.markedSpans=null)}function F(t,e){var n=z(t,e);if(n)return n.measure;var i=W(t,e),r=t.display.measureLineCache,o={text:e.text,width:t.display.scroller.clientWidth,markedSpans:e.markedSpans,measure:i,classes:e.textClass+"|"+e.bgClass+"|"+e.wrapClass};return 16==r.length?r[++t.display.measureLineCachePos%16]=o:r.push(o),i}function W(t,e){function n(t){var e=t.top-f.top,n=t.bottom-f.top;n>v&&(n=v),0>e&&(e=0);for(var i=g.length-2;i>=0;i-=2){var r=g[i],o=g[i+1];if(!(r>n||e>o)&&(e>=r&&o>=n||r>=e&&n>=o||Math.min(n,o)-Math.max(e,r)>=n-e>>1)){g[i]=Math.min(e,r),g[i+1]=Math.max(n,o);break}}return 0>i&&(i=g.length,g.push(e,n)),{left:t.left-f.left,right:t.right-f.left,top:i,bottom:null}}function i(t){t.bottom=g[t.top+1],t.top=g[t.top]}var r=t.display,o=Qi(e.text.length),s=ti(t,e,o,!0);if(Cr&&!Sr&&!t.options.lineWrapping&&s.childNodes.length>100){for(var a=document.createDocumentFragment(),l=10,c=s.childNodes.length,u=0,h=Math.ceil(c/l);h>u;++u){for(var d=ir("div",null,null,"display: inline-block"),p=0;l>p&&c;++p)d.appendChild(s.firstChild),--c;a.appendChild(d)}s.appendChild(a)}or(r.measure,s);var f=ar(r.lineDiv),g=[],m=Qi(e.text.length),v=s.offsetHeight;$r&&r.measure.first!=s&&or(r.measure,s);for(var y,u=0;o.length>u;++u)if(y=o[u]){var b=y,w=null;if(/\bCodeMirror-widget\b/.test(y.className)&&y.getClientRects){1==y.firstChild.nodeType&&(b=y.firstChild);var x=b.getClientRects();x.length>1&&(w=m[u]=n(x[0]),w.rightSide=n(x[x.length-1]))}w||(w=m[u]=n(ar(b))),y.measureRight&&(w.right=ar(y.measureRight).left),y.leftSide&&(w.leftSide=n(ar(y.leftSide)))}rr(t.display.measure);for(var y,u=0;m.length>u;++u)(y=m[u])&&(i(y),y.leftSide&&i(y.leftSide),y.rightSide&&i(y.rightSide));return m}function V(t,e){var n=!1;if(e.markedSpans)for(var i=0;e.markedSpans>i;++i){var r=e.markedSpans[i];!r.collapsed||null!=r.to&&r.to!=e.text.length||(n=!0)}var o=!n&&z(t,e);if(o)return j(t,e,e.text.length,o.measure,"right").right;var s=ti(t,e,null,!0),a=s.appendChild(ur(t.display.measure));return or(t.display.measure,s),ar(a).right-ar(t.display.lineDiv).left}function q(t){t.display.measureLineCache.length=t.display.measureLineCachePos=0,t.display.cachedCharWidth=t.display.cachedTextHeight=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function U(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function X(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function Y(t,e,n,i){if(e.widgets)for(var r=0;e.widgets.length>r;++r)if(e.widgets[r].above){var o=qn(e.widgets[r]);n.top+=o,n.bottom+=o}if("line"==i)return n;i||(i="local");var s=vi(t,e);if("local"==i?s+=H(t.display):s-=t.display.viewOffset,"page"==i||"window"==i){var a=ar(t.display.lineSpace);s+=a.top+("window"==i?0:X());var l=a.left+("window"==i?0:U());n.left+=l,n.right+=l}return n.top+=s,n.bottom+=s,n}function G(t,e,n){if("div"==n)return e;var i=e.left,r=e.top;if("page"==n)i-=U(),r-=X();else if("local"==n||!n){var o=ar(t.display.sizer);i+=o.left,r+=o.top}var s=ar(t.display.lineSpace);return{left:i-s.left,top:r-s.top}}function J(t,e,n,i,r){return i||(i=hi(t.doc,e.line)),Y(t,i,j(t,i,e.ch,null,r),n)}function K(t,e,n,i,r){function o(e,o){var s=j(t,i,e,r,o?"right":"left");return o?s.left=s.right:s.right=s.left,Y(t,i,s,n)}function s(t,e){var n=a[e],i=n.level%2;return t==dr(n)&&e&&n.level<a[e-1].level?(n=a[--e],t=pr(n)-(n.level%2?0:1),i=!0):t==pr(n)&&a.length-1>e&&n.level<a[e+1].level&&(n=a[++e],t=dr(n)-n.level%2,i=!1),i&&t==n.to&&t>n.from?o(t-1):o(t,i)}i=i||hi(t.doc,e.line),r||(r=F(t,i));var a=yi(i),l=e.ch;if(!a)return o(l);var c=br(a,l),u=s(l,c);return null!=Do&&(u.other=s(l,Do)),u}function Z(t,e,n,i){var r=new Ve(t,e);return r.xRel=i,n&&(r.outside=!0),r}function Q(t,e,n){var i=t.doc;if(n+=t.display.viewOffset,0>n)return Z(i.first,0,!0,-1);var r=mi(i,n),o=i.first+i.size-1;if(r>o)return Z(i.first+i.size-1,hi(i,o).text.length,!0,1);for(0>e&&(e=0);;){var s=hi(i,r),a=te(t,s,r,e,n),l=Bn(s),c=l&&l.find();if(!l||!(a.ch>c.from.ch||a.ch==c.from.ch&&a.xRel>0))return a;r=c.to.line}}function te(t,e,n,i,r){function o(i){var r=K(t,Ve(n,i),"line",e,c);return a=!0,s>r.bottom?r.left-l:r.top>s?r.left+l:(a=!1,r.left)}var s=r-vi(t,e),a=!1,l=2*t.display.wrapper.clientWidth,c=F(t,e),u=yi(e),h=e.text.length,d=fr(e),p=gr(e),f=o(d),g=a,m=o(p),v=a;if(i>m)return Z(n,p,v,1);for(;;){if(u?p==d||p==xr(e,d,1):1>=p-d){for(var y=f>i||m-i>=i-f?d:p,b=i-(y==d?f:m);To.test(e.text.charAt(y));)++y;var w=Z(n,y,y==d?g:v,0>b?-1:b?1:0);return w}var x=Math.ceil(h/2),_=d+x;if(u){_=d;for(var k=0;x>k;++k)_=xr(e,_,1)}var C=o(_);C>i?(p=_,m=C,(v=a)&&(m+=1e3),h=x):(d=_,f=C,g=a,h-=x)}}function ee(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==Rr){Rr=ir("pre");for(var e=0;49>e;++e)Rr.appendChild(document.createTextNode("x")),Rr.appendChild(ir("br"));Rr.appendChild(document.createTextNode("x"))}or(t.measure,Rr);var n=Rr.offsetHeight/50;return n>3&&(t.cachedTextHeight=n),rr(t.measure),n||1}function ne(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=ir("span","x"),n=ir("pre",[e]);or(t.measure,n);var i=e.offsetWidth;return i>2&&(t.cachedCharWidth=i),i||10}function ie(t){t.curOp={changes:[],forceUpdate:!1,updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,cursorActivity:!1,updateMaxLine:!1,updateScrollPos:!1,id:++Yr},_o++||(xo=[])}function re(t){var e=t.curOp,n=t.doc,i=t.display;if(t.curOp=null,e.updateMaxLine&&h(t),i.maxLineChanged&&!t.options.lineWrapping&&i.maxLine){var r=V(t,i.maxLine);i.sizer.style.minWidth=Math.max(0,r+3+ko)+"px",i.maxLineChanged=!1;var o=Math.max(0,i.sizer.offsetLeft+i.sizer.offsetWidth-i.scroller.clientWidth);n.scrollLeft>o&&!e.updateScrollPos&&ke(t,Math.min(i.scroller.scrollLeft,o),!0)}var s,a;if(e.updateScrollPos)s=e.updateScrollPos;else if(e.selectionChanged&&i.scroller.clientHeight){var l=K(t,n.sel.head);s=an(t,l.left,l.top,l.left,l.bottom)}(e.changes.length||e.forceUpdate||s&&null!=s.scrollTop)&&(a=b(t,e.changes,s&&s.scrollTop,e.forceUpdate),t.display.scroller.offsetHeight&&(t.doc.scrollTop=t.display.scroller.scrollTop)),!a&&e.selectionChanged&&M(t),e.updateScrollPos?(i.scroller.scrollTop=i.scrollbarV.scrollTop=n.scrollTop=s.scrollTop,i.scroller.scrollLeft=i.scrollbarH.scrollLeft=n.scrollLeft=s.scrollLeft,g(t),e.scrollToPos&&on(t,Ge(t.doc,e.scrollToPos),e.scrollToPosMargin)):s&&rn(t),e.selectionChanged&&A(t),t.state.focused&&e.updateInput&&de(t,e.userSelChange);var c=e.maybeHiddenMarkers,u=e.maybeUnhiddenMarkers;if(c)for(var d=0;c.length>d;++d)c[d].lines.length||ji(c[d],"hide");if(u)for(var d=0;u.length>d;++d)u[d].lines.length&&ji(u[d],"unhide");var p;if(--_o||(p=xo,xo=null),e.textChanged&&ji(t,"change",t,e.textChanged),e.cursorActivity&&ji(t,"cursorActivity",t),p)for(var d=0;p.length>d;++d)p[d]()}function oe(t,e){return function(){var n=t||this,i=!n.curOp;i&&ie(n);try{var r=e.apply(n,arguments)}finally{i&&re(n)}return r}}function se(t){return function(){var e,n=this.cm&&!this.cm.curOp;n&&ie(this.cm);try{e=t.apply(this,arguments)}finally{n&&re(this.cm)}return e}}function ae(t,e){var n,i=!t.curOp;i&&ie(t);try{n=e()}finally{i&&re(t)}return n}function le(t,e,n,i){null==e&&(e=t.doc.first),null==n&&(n=t.doc.first+t.doc.size),t.curOp.changes.push({from:e,to:n,diff:i})}function ce(t){t.display.pollingFast||t.display.poll.set(t.options.pollInterval,function(){he(t),t.state.focused&&ce(t)})}function ue(t){function e(){var i=he(t);i||n?(t.display.pollingFast=!1,ce(t)):(n=!0,t.display.poll.set(60,e))}var n=!1;t.display.pollingFast=!0,t.display.poll.set(20,e)}function he(t){var e=t.display.input,n=t.display.prevInput,i=t.doc,r=i.sel;if(!t.state.focused||Io(e)||fe(t)||t.state.disableInput)return!1;t.state.pasteIncoming&&t.state.fakedLastChar&&(e.value=e.value.substring(0,e.value.length-1),t.state.fakedLastChar=!1);var o=e.value;if(o==n&&qe(r.from,r.to))return!1;if(Cr&&!$r&&t.display.inputHasSelection===o)return de(t,!0),!1;var s=!t.curOp;s&&ie(t),r.shift=!1;for(var a=0,l=Math.min(n.length,o.length);l>a&&n.charCodeAt(a)==o.charCodeAt(a);)++a;var c=r.from,u=r.to;n.length>a?c=Ve(c.line,c.ch-(n.length-a)):t.state.overwrite&&qe(c,u)&&!t.state.pasteIncoming&&(u=Ve(u.line,Math.min(hi(i,u.line).text.length,u.ch+(o.length-a))));var h=t.curOp.updateInput,d={from:c,to:u,text:Ao(o.slice(a)),origin:t.state.pasteIncoming?"paste":"+input"};return Oe(t.doc,d,"end"),t.curOp.updateInput=h,zi(t,"inputRead",t,d),o.length>1e3||o.indexOf("\n")>-1?e.value=t.display.prevInput="":t.display.prevInput=o,s&&re(t),t.state.pasteIncoming=!1,!0}function de(t,e){var n,i,r=t.doc;if(qe(r.sel.from,r.sel.to))e&&(t.display.prevInput=t.display.input.value="",Cr&&!$r&&(t.display.inputHasSelection=null));else{t.display.prevInput="",n=No&&(r.sel.to.line-r.sel.from.line>100||(i=t.getSelection()).length>1e3);var o=n?"-":i||t.getSelection();t.display.input.value=o,t.state.focused&&Gi(t.display.input),Cr&&!$r&&(t.display.inputHasSelection=o)}t.display.inaccurateSelection=n}function pe(t){"nocursor"==t.options.readOnly||Or&&document.activeElement==t.display.input||t.display.input.focus()}function fe(t){return t.options.readOnly||t.doc.cantEdit}function ge(t){function e(){t.state.focused&&setTimeout(tr(pe,t),0)}function n(){null==a&&(a=setTimeout(function(){a=null,s.cachedCharWidth=s.cachedTextHeight=Eo=null,q(t),ae(t,tr(le,t))},100))}function i(){for(var t=s.wrapper.parentNode;t&&t!=document.body;t=t.parentNode);t?setTimeout(i,5e3):Bi(window,"resize",n)}function r(e){Ri(t,e)||t.options.onDragEvent&&t.options.onDragEvent(t,Li(e))||Pi(e)}function o(){s.inaccurateSelection&&(s.prevInput="",s.inaccurateSelection=!1,s.input.value=t.getSelection(),Gi(s.input))}var s=t.display;Oi(s.scroller,"mousedown",oe(t,ye)),Cr?Oi(s.scroller,"dblclick",oe(t,function(e){if(!Ri(t,e)){var n=ve(t,e);if(n&&!be(t,e)&&!me(t.display,e)){Ai(e);var i=fn(hi(t.doc,n.line).text,n);Ze(t.doc,i.from,i.to)}}})):Oi(s.scroller,"dblclick",function(e){Ri(t,e)||Ai(e)}),Oi(s.lineSpace,"selectstart",function(t){me(s,t)||Ai(t)}),qr||Oi(s.scroller,"contextmenu",function(e){Ne(t,e)}),Oi(s.scroller,"scroll",function(){s.scroller.clientHeight&&(_e(t,s.scroller.scrollTop),ke(t,s.scroller.scrollLeft,!0),ji(t,"scroll",t))}),Oi(s.scrollbarV,"scroll",function(){s.scroller.clientHeight&&_e(t,s.scrollbarV.scrollTop)}),Oi(s.scrollbarH,"scroll",function(){s.scroller.clientHeight&&ke(t,s.scrollbarH.scrollLeft)}),Oi(s.scroller,"mousewheel",function(e){Ce(t,e)}),Oi(s.scroller,"DOMMouseScroll",function(e){Ce(t,e)}),Oi(s.scrollbarH,"mousedown",e),Oi(s.scrollbarV,"mousedown",e),Oi(s.wrapper,"scroll",function(){s.wrapper.scrollTop=s.wrapper.scrollLeft=0});var a;Oi(window,"resize",n),setTimeout(i,5e3),Oi(s.input,"keyup",oe(t,function(e){Ri(t,e)||t.options.onKeyEvent&&t.options.onKeyEvent(t,Li(e))||16==e.keyCode&&(t.doc.sel.shift=!1)})),Oi(s.input,"input",tr(ue,t)),Oi(s.input,"keydown",oe(t,Ee)),Oi(s.input,"keypress",oe(t,Le)),Oi(s.input,"focus",tr(Ae,t)),Oi(s.input,"blur",tr(Ie,t)),t.options.dragDrop&&(Oi(s.scroller,"dragstart",function(e){xe(t,e)}),Oi(s.scroller,"dragenter",r),Oi(s.scroller,"dragover",r),Oi(s.scroller,"drop",oe(t,we))),Oi(s.scroller,"paste",function(e){me(s,e)||(pe(t),ue(t))}),Oi(s.input,"paste",function(){if(Tr&&!t.state.fakedLastChar&&!(200>new Date-t.state.lastMiddleDown)){var e=s.input.selectionStart,n=s.input.selectionEnd;s.input.value+="$",s.input.selectionStart=e,s.input.selectionEnd=n,t.state.fakedLastChar=!0}t.state.pasteIncoming=!0,ue(t)}),Oi(s.input,"cut",o),Oi(s.input,"copy",o),Ir&&Oi(s.sizer,"mouseup",function(){document.activeElement==s.input&&s.input.blur(),pe(t)})}function me(t,e){for(var n=Di(e);n!=t.wrapper;n=n.parentNode)if(!n||n.ignoreEvents||n.parentNode==t.sizer&&n!=t.mover)return!0}function ve(t,e,n){var i=t.display;if(!n){var r=Di(e);if(r==i.scrollbarH||r==i.scrollbarH.firstChild||r==i.scrollbarV||r==i.scrollbarV.firstChild||r==i.scrollbarFiller||r==i.gutterFiller)return null}var o,s,a=ar(i.lineSpace);try{o=e.clientX,s=e.clientY}catch(e){return null}return Q(t,o-a.left,s-a.top)}function ye(t){function e(t){if(!qe(v,t)){if(v=t,"single"==u)return Ze(r.doc,Ge(s,l),t),void 0;if(g=Ge(s,g),m=Ge(s,m),"double"==u){var e=fn(hi(s,t.line).text,t);Ue(t,g)?Ze(r.doc,e.from,m):Ze(r.doc,g,e.to)}else"triple"==u&&(Ue(t,g)?Ze(r.doc,m,Ge(s,Ve(t.line,0))):Ze(r.doc,g,Ge(s,Ve(t.line+1,0))))}}function n(t){var i=++b,a=ve(r,t,!0);if(a)if(qe(a,d)){var l=t.clientY<y.top?-20:t.clientY>y.bottom?20:0;l&&setTimeout(oe(r,function(){b==i&&(o.scroller.scrollTop+=l,n(t))}),50)}else{r.state.focused||Ae(r),d=a,e(a);var c=f(o,s);(a.line>=c.to||a.line<c.from)&&setTimeout(oe(r,function(){b==i&&n(t)}),150)}}function i(t){b=1/0,Ai(t),pe(r),Bi(document,"mousemove",w),Bi(document,"mouseup",x)}if(!Ri(this,t)){var r=this,o=r.display,s=r.doc,a=s.sel;if(a.shift=t.shiftKey,me(o,t))return Tr||(o.scroller.draggable=!1,setTimeout(function(){o.scroller.draggable=!0},100)),void 0;if(!be(r,t)){var l=ve(r,t);switch(Hi(t)){case 3:return qr&&Ne.call(r,r,t),void 0;case 2:return Tr&&(r.state.lastMiddleDown=+new Date),l&&Ze(r.doc,l),setTimeout(tr(pe,r),20),Ai(t),void 0}if(!l)return Di(t)==o.scroller&&Ai(t),void 0;r.state.focused||Ae(r);var c=+new Date,u="single";if(Wr&&Wr.time>c-400&&qe(Wr.pos,l))u="triple",Ai(t),setTimeout(tr(pe,r),20),gn(r,l.line);else if(Fr&&Fr.time>c-400&&qe(Fr.pos,l)){u="double",Wr={time:c,pos:l},Ai(t);var h=fn(hi(s,l.line).text,l);Ze(r.doc,h.from,h.to)}else Fr={time:c,pos:l};var d=l;if(r.options.dragDrop&&Mo&&!fe(r)&&!qe(a.from,a.to)&&!Ue(l,a.from)&&!Ue(a.to,l)&&"single"==u){var p=oe(r,function(e){Tr&&(o.scroller.draggable=!1),r.state.draggingText=!1,Bi(document,"mouseup",p),Bi(o.scroller,"drop",p),10>Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)&&(Ai(e),Ze(r.doc,l),pe(r))});return Tr&&(o.scroller.draggable=!0),r.state.draggingText=p,o.scroller.dragDrop&&o.scroller.dragDrop(),Oi(document,"mouseup",p),Oi(o.scroller,"drop",p),void 0}Ai(t),"single"==u&&Ze(r.doc,Ge(s,l));var g=a.from,m=a.to,v=l,y=ar(o.wrapper),b=0,w=oe(r,function(t){Cr||Hi(t)?n(t):i(t)}),x=oe(r,i);Oi(document,"mousemove",w),Oi(document,"mouseup",x)}}}function be(t,e){var n=t.display;try{var i=e.clientX,r=e.clientY}catch(e){return!1}if(i>=Math.floor(ar(n.gutters).right))return!1;if(Ai(e),!Wi(t,"gutterClick"))return!0;var o=ar(n.lineDiv);if(r>o.bottom)return!0;r-=o.top-n.viewOffset;for(var s=0;t.options.gutters.length>s;++s){var a=n.gutters.childNodes[s];if(a&&ar(a).right>=i){var l=mi(t.doc,r),c=t.options.gutters[s];zi(t,"gutterClick",t,l,c,e);break}}return!0}function we(t){var e=this;if(!(Ri(e,t)||me(e.display,t)||e.options.onDragEvent&&e.options.onDragEvent(e,Li(t)))){Ai(t),Cr&&(Gr=+new Date);var n=ve(e,t,!0),i=t.dataTransfer.files;if(n&&!fe(e))if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,o=Array(r),s=0,a=function(t,i){var a=new FileReader;a.onload=function(){o[i]=a.result,++s==r&&(n=Ge(e.doc,n),Oe(e.doc,{from:n,to:n,text:Ao(o.join("\n")),origin:"paste"},"around"))},a.readAsText(t)},l=0;r>l;++l)a(i[l],l);else{if(e.state.draggingText&&!Ue(n,e.doc.sel.from)&&!Ue(e.doc.sel.to,n))return e.state.draggingText(t),setTimeout(tr(pe,e),20),void 0;try{var o=t.dataTransfer.getData("Text");if(o){var c=e.doc.sel.from,u=e.doc.sel.to;tn(e.doc,n,n),e.state.draggingText&&We(e.doc,"",c,u,"paste"),e.replaceSelection(o,null,"paste"),pe(e),Ae(e)}}catch(t){}}}}function xe(t,e){if(Cr&&(!t.state.draggingText||100>+new Date-Gr))return Pi(e),void 0;if(!Ri(t,e)&&!me(t.display,e)){var n=t.getSelection();if(e.dataTransfer.setData("Text",n),e.dataTransfer.setDragImage&&!Ar){var i=ir("img",null,null,"position: fixed; left: 0; top: 0;");Lr&&(i.width=i.height=1,t.display.wrapper.appendChild(i),i._top=i.offsetTop),e.dataTransfer.setDragImage(i,0,0),Lr&&i.parentNode.removeChild(i)}}}function _e(t,e){2>Math.abs(t.doc.scrollTop-e)||(t.doc.scrollTop=e,kr||b(t,[],e),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e),t.display.scrollbarV.scrollTop!=e&&(t.display.scrollbarV.scrollTop=e),kr&&b(t,[]),I(t,100))}function ke(t,e,n){(n?e==t.doc.scrollLeft:2>Math.abs(t.doc.scrollLeft-e))||(e=Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth),t.doc.scrollLeft=e,g(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbarH.scrollLeft!=e&&(t.display.scrollbarH.scrollLeft=e))}function Ce(t,e){var n=e.wheelDeltaX,i=e.wheelDeltaY;
null==n&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(n=e.detail),null==i&&e.detail&&e.axis==e.VERTICAL_AXIS?i=e.detail:null==i&&(i=e.wheelDelta);var r=t.display,o=r.scroller;if(n&&o.scrollWidth>o.clientWidth||i&&o.scrollHeight>o.clientHeight){if(i&&Br&&Tr)for(var s=e.target;s!=o;s=s.parentNode)if(s.lineObj){t.display.currentWheelTarget=s;break}if(n&&!kr&&!Lr&&null!=Kr)return i&&_e(t,Math.max(0,Math.min(o.scrollTop+i*Kr,o.scrollHeight-o.clientHeight))),ke(t,Math.max(0,Math.min(o.scrollLeft+n*Kr,o.scrollWidth-o.clientWidth))),Ai(e),r.wheelStartX=null,void 0;if(i&&null!=Kr){var a=i*Kr,l=t.doc.scrollTop,c=l+r.wrapper.clientHeight;0>a?l=Math.max(0,l+a-50):c=Math.min(t.doc.height,c+a+50),b(t,[],{top:l,bottom:c})}20>Jr&&(null==r.wheelStartX?(r.wheelStartX=o.scrollLeft,r.wheelStartY=o.scrollTop,r.wheelDX=n,r.wheelDY=i,setTimeout(function(){if(null!=r.wheelStartX){var t=o.scrollLeft-r.wheelStartX,e=o.scrollTop-r.wheelStartY,n=e&&r.wheelDY&&e/r.wheelDY||t&&r.wheelDX&&t/r.wheelDX;r.wheelStartX=r.wheelStartY=null,n&&(Kr=(Kr*Jr+n)/(Jr+1),++Jr)}},200)):(r.wheelDX+=n,r.wheelDY+=i))}}function Se(t,e,n){if("string"==typeof e&&(e=uo[e],!e))return!1;t.display.pollingFast&&he(t)&&(t.display.pollingFast=!1);var i=t.doc,r=i.sel.shift,o=!1;try{fe(t)&&(t.state.suppressEdits=!0),n&&(i.sel.shift=!1),o=e(t)!=Co}finally{i.sel.shift=r,t.state.suppressEdits=!1}return o}function $e(t){var e=t.state.keyMaps.slice(0);return t.options.extraKeys&&e.push(t.options.extraKeys),e.push(t.options.keyMap),e}function Te(t,e){var n=bn(t.options.keyMap),i=n.auto;clearTimeout(Zr),i&&!xn(e)&&(Zr=setTimeout(function(){bn(t.options.keyMap)==n&&(t.options.keyMap=i.call?i.call(null,t):i,s(t))},50));var r=_n(e,!0),o=!1;if(!r)return!1;var a=$e(t);return o=e.shiftKey?wn("Shift-"+r,a,function(e){return Se(t,e,!0)})||wn(r,a,function(e){return("string"==typeof e?/^go[A-Z]/.test(e):e.motion)?Se(t,e):void 0}):wn(r,a,function(e){return Se(t,e)}),o&&(Ai(e),A(t),$r&&(e.oldKeyCode=e.keyCode,e.keyCode=0),zi(t,"keyHandled",t,r,e)),o}function Me(t,e,n){var i=wn("'"+n+"'",$e(t),function(e){return Se(t,e,!0)});return i&&(Ai(e),A(t),zi(t,"keyHandled",t,"'"+n+"'",e)),i}function Ee(t){var e=this;if(e.state.focused||Ae(e),!(Ri(e,t)||e.options.onKeyEvent&&e.options.onKeyEvent(e,Li(t)))){Cr&&27==t.keyCode&&(t.returnValue=!1);var n=t.keyCode;e.doc.sel.shift=16==n||t.shiftKey;var i=Te(e,t);Lr&&(to=i?n:null,!i&&88==n&&!No&&(Br?t.metaKey:t.ctrlKey)&&e.replaceSelection(""))}}function Le(t){var e=this;if(!(Ri(e,t)||e.options.onKeyEvent&&e.options.onKeyEvent(e,Li(t)))){var n=t.keyCode,i=t.charCode;if(Lr&&n==to)return to=null,Ai(t),void 0;if(!(Lr&&(!t.which||10>t.which)||Ir)||!Te(e,t)){var r=String.fromCharCode(null==i?n:i);this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&!fe(this)&&this.doc.mode.electricChars.indexOf(r)>-1&&setTimeout(oe(e,function(){un(e,e.doc.sel.to.line,"smart")}),75),Me(e,t,r)||(Cr&&!$r&&(e.display.inputHasSelection=null),ue(e))}}}function Ae(t){"nocursor"!=t.options.readOnly&&(t.state.focused||(ji(t,"focus",t),t.state.focused=!0,-1==t.display.wrapper.className.search(/\bCodeMirror-focused\b/)&&(t.display.wrapper.className+=" CodeMirror-focused"),t.curOp||(de(t,!0),Tr&&setTimeout(tr(de,t,!0),0))),ce(t),A(t))}function Ie(t){t.state.focused&&(ji(t,"blur",t),t.state.focused=!1,t.display.wrapper.className=t.display.wrapper.className.replace(" CodeMirror-focused","")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.doc.sel.shift=!1)},150)}function Ne(t,e){function n(){if(null!=r.input.selectionStart){var t=r.input.value=" "+(qe(o.from,o.to)?"":r.input.value);r.prevInput=" ",r.input.selectionStart=1,r.input.selectionEnd=t.length}}function i(){if(r.inputDiv.style.position="relative",r.input.style.cssText=l,$r&&(r.scrollbarV.scrollTop=r.scroller.scrollTop=a),ce(t),null!=r.input.selectionStart){(!Cr||$r)&&n(),clearTimeout(Qr);var e=0,i=function(){" "==r.prevInput&&0==r.input.selectionStart?oe(t,uo.selectAll)(t):10>e++?Qr=setTimeout(i,500):de(t)};Qr=setTimeout(i,200)}}if(!Ri(t,e,"contextmenu")){var r=t.display,o=t.doc.sel;if(!me(r,e)){var s=ve(t,e),a=r.scroller.scrollTop;if(s&&!Lr){(qe(o.from,o.to)||Ue(s,o.from)||!Ue(s,o.to))&&oe(t,tn)(t.doc,s,s);var l=r.input.style.cssText;if(r.inputDiv.style.position="absolute",r.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: white; outline: none;"+"border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);",pe(t),de(t,!0),qe(o.from,o.to)&&(r.input.value=r.prevInput=" "),Cr&&!$r&&n(),qr){Pi(e);var c=function(){Bi(window,"mouseup",c),setTimeout(i,20)};Oi(window,"mouseup",c)}else setTimeout(i,50)}}}}function Pe(t,e,n){if(!Ue(e.from,n))return Ge(t,n);var i=e.text.length-1-(e.to.line-e.from.line);if(n.line>e.to.line+i){var r=n.line-i,o=t.first+t.size-1;return r>o?Ve(o,hi(t,o).text.length):Je(n,hi(t,r).text.length)}if(n.line==e.to.line+i)return Je(n,Yi(e.text).length+(1==e.text.length?e.from.ch:0)+hi(t,e.to.line).text.length-e.to.ch);var s=n.line-e.from.line;return Je(n,e.text[s].length+(s?0:e.from.ch))}function De(t,e,n){if(n&&"object"==typeof n)return{anchor:Pe(t,e,n.anchor),head:Pe(t,e,n.head)};if("start"==n)return{anchor:e.from,head:e.from};var i=eo(e);if("around"==n)return{anchor:e.from,head:i};if("end"==n)return{anchor:i,head:i};var r=function(t){if(Ue(t,e.from))return t;if(!Ue(e.to,t))return i;var n=t.line+e.text.length-(e.to.line-e.from.line)-1,r=t.ch;return t.line==e.to.line&&(r+=i.ch-e.to.ch),Ve(n,r)};return{anchor:r(t.sel.anchor),head:r(t.sel.head)}}function He(t,e,n){var i={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){this.canceled=!0}};return n&&(i.update=function(e,n,i,r){e&&(this.from=Ge(t,e)),n&&(this.to=Ge(t,n)),i&&(this.text=i),void 0!==r&&(this.origin=r)}),ji(t,"beforeChange",t,i),t.cm&&ji(t.cm,"beforeChange",t.cm,i),i.canceled?null:{from:i.from,to:i.to,text:i.text,origin:i.origin}}function Oe(t,e,n,i){if(t.cm){if(!t.cm.curOp)return oe(t.cm,Oe)(t,e,n,i);if(t.cm.state.suppressEdits)return}if(!(Wi(t,"beforeChange")||t.cm&&Wi(t.cm,"beforeChange"))||(e=He(t,e,!0))){var r=Ur&&!i&&Dn(t,e.from,e.to);if(r){for(var o=r.length-1;o>=1;--o)Be(t,{from:r[o].from,to:r[o].to,text:[""]});r.length&&Be(t,{from:r[0].from,to:r[0].to,text:e.text},n)}else Be(t,e,n)}}function Be(t,e,n){var i=De(t,e,n);_i(t,e,i,t.cm?t.cm.curOp.id:0/0),Re(t,e,i,Nn(t,e));var r=[];ci(t,function(t,n){n||-1!=Ji(r,t.history)||(Mi(t.history,e),r.push(t.history)),Re(t,e,null,Nn(t,e))})}function je(t,e){if(!t.cm||!t.cm.state.suppressEdits){var n=t.history,i=("undo"==e?n.done:n.undone).pop();if(i){var r={changes:[],anchorBefore:i.anchorAfter,headBefore:i.headAfter,anchorAfter:i.anchorBefore,headAfter:i.headBefore,generation:n.generation};("undo"==e?n.undone:n.done).push(r),n.generation=i.generation||++n.maxGeneration;for(var o=Wi(t,"beforeChange")||t.cm&&Wi(t.cm,"beforeChange"),s=i.changes.length-1;s>=0;--s){var a=i.changes[s];if(a.origin=e,o&&!He(t,a,!1))return("undo"==e?n.done:n.undone).length=0,void 0;r.changes.push(xi(t,a));var l=s?De(t,a,null):{anchor:i.anchorBefore,head:i.headBefore};Re(t,a,l,Pn(t,a));var c=[];ci(t,function(t,e){e||-1!=Ji(c,t.history)||(Mi(t.history,a),c.push(t.history)),Re(t,a,null,Pn(t,a))})}}}}function ze(t,e){function n(t){return Ve(t.line+e,t.ch)}t.first+=e,t.cm&&le(t.cm,t.first,t.first,e),t.sel.head=n(t.sel.head),t.sel.anchor=n(t.sel.anchor),t.sel.from=n(t.sel.from),t.sel.to=n(t.sel.to)}function Re(t,e,n,i){if(t.cm&&!t.cm.curOp)return oe(t.cm,Re)(t,e,n,i);if(e.to.line<t.first)return ze(t,e.text.length-1-(e.to.line-e.from.line)),void 0;if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var r=e.text.length-1-(t.first-e.from.line);ze(t,r),e={from:Ve(t.first,0),to:Ve(e.to.line+r,e.to.ch),text:[Yi(e.text)],origin:e.origin}}var o=t.lastLine();e.to.line>o&&(e={from:e.from,to:Ve(o,hi(t,o).text.length),text:[e.text[0]],origin:e.origin}),e.removed=di(t,e.from,e.to),n||(n=De(t,e,null)),t.cm?Fe(t.cm,e,i,n):si(t,e,i,n)}}function Fe(t,e,n,i){var o=t.doc,s=t.display,a=e.from,l=e.to,c=!1,h=a.line;t.options.lineWrapping||(h=gi(jn(o,hi(o,a.line))),o.iter(h,l.line+1,function(t){return t==s.maxLine?(c=!0,!0):void 0})),Ue(o.sel.head,e.from)||Ue(e.to,o.sel.head)||(t.curOp.cursorActivity=!0),si(o,e,n,i,r(t)),t.options.lineWrapping||(o.iter(h,a.line+e.text.length,function(t){var e=u(o,t);e>s.maxLineLength&&(s.maxLine=t,s.maxLineLength=e,s.maxLineChanged=!0,c=!1)}),c&&(t.curOp.updateMaxLine=!0)),o.frontier=Math.min(o.frontier,a.line),I(t,400);var d=e.text.length-(l.line-a.line)-1;if(le(t,a.line,l.line+1,d),Wi(t,"change")){var p={from:a,to:l,text:e.text,removed:e.removed,origin:e.origin};if(t.curOp.textChanged){for(var f=t.curOp.textChanged;f.next;f=f.next);f.next=p}else t.curOp.textChanged=p}}function We(t,e,n,i,r){if(i||(i=n),Ue(i,n)){var o=i;i=n,n=o}"string"==typeof e&&(e=Ao(e)),Oe(t,{from:n,to:i,text:e,origin:r},null)}function Ve(t,e){return this instanceof Ve?(this.line=t,this.ch=e,void 0):new Ve(t,e)}function qe(t,e){return t.line==e.line&&t.ch==e.ch}function Ue(t,e){return t.line<e.line||t.line==e.line&&t.ch<e.ch}function Xe(t){return Ve(t.line,t.ch)}function Ye(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function Ge(t,e){if(e.line<t.first)return Ve(t.first,0);var n=t.first+t.size-1;return e.line>n?Ve(n,hi(t,n).text.length):Je(e,hi(t,e.line).text.length)}function Je(t,e){var n=t.ch;return null==n||n>e?Ve(t.line,e):0>n?Ve(t.line,0):t}function Ke(t,e){return e>=t.first&&t.first+t.size>e}function Ze(t,e,n,i){if(t.sel.shift||t.sel.extend){var r=t.sel.anchor;if(n){var o=Ue(e,r);o!=Ue(n,r)?(r=e,e=n):o!=Ue(e,n)&&(e=n)}tn(t,r,e,i)}else tn(t,e,n||e,i);t.cm&&(t.cm.curOp.userSelChange=!0)}function Qe(t,e,n){var i={anchor:e,head:n};return ji(t,"beforeSelectionChange",t,i),t.cm&&ji(t.cm,"beforeSelectionChange",t.cm,i),i.anchor=Ge(t,i.anchor),i.head=Ge(t,i.head),i}function tn(t,e,n,i,r){if(!r&&Wi(t,"beforeSelectionChange")||t.cm&&Wi(t.cm,"beforeSelectionChange")){var o=Qe(t,e,n);n=o.head,e=o.anchor}var s=t.sel;if(s.goalColumn=null,(r||!qe(e,s.anchor))&&(e=nn(t,e,i,"push"!=r)),(r||!qe(n,s.head))&&(n=nn(t,n,i,"push"!=r)),!qe(s.anchor,e)||!qe(s.head,n)){s.anchor=e,s.head=n;var a=Ue(n,e);s.from=a?n:e,s.to=a?e:n,t.cm&&(t.cm.curOp.updateInput=t.cm.curOp.selectionChanged=t.cm.curOp.cursorActivity=!0),zi(t,"cursorActivity",t)}}function en(t){tn(t.doc,t.doc.sel.from,t.doc.sel.to,null,"push")}function nn(t,e,n,i){var r=!1,o=e,s=n||1;t.cantEdit=!1;t:for(;;){var a=hi(t,o.line);if(a.markedSpans)for(var l=0;a.markedSpans.length>l;++l){var c=a.markedSpans[l],u=c.marker;if((null==c.from||(u.inclusiveLeft?c.from<=o.ch:c.from<o.ch))&&(null==c.to||(u.inclusiveRight?c.to>=o.ch:c.to>o.ch))){if(i&&(ji(u,"beforeCursorEnter"),u.explicitlyCleared)){if(a.markedSpans){--l;continue}break}if(!u.atomic)continue;var h=u.find()[0>s?"from":"to"];if(qe(h,o)&&(h.ch+=s,0>h.ch?h=h.line>t.first?Ge(t,Ve(h.line-1)):null:h.ch>a.text.length&&(h=h.line<t.first+t.size-1?Ve(h.line+1,0):null),!h)){if(r)return i?(t.cantEdit=!0,Ve(t.first,0)):nn(t,e,n,!0);r=!0,h=e,s=-s}o=h;continue t}}return o}}function rn(t){var e=on(t,t.doc.sel.head,t.options.cursorScrollMargin);if(t.state.focused){var n=t.display,i=ar(n.sizer),r=null;if(0>e.top+i.top?r=!0:e.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1),null!=r&&!Dr){var o="none"==n.cursor.style.display;o&&(n.cursor.style.display="",n.cursor.style.left=e.left+"px",n.cursor.style.top=e.top-n.viewOffset+"px"),n.cursor.scrollIntoView(r),o&&(n.cursor.style.display="none")}}}function on(t,e,n){for(null==n&&(n=0);;){var i=!1,r=K(t,e),o=an(t,r.left,r.top-n,r.left,r.bottom+n),s=t.doc.scrollTop,a=t.doc.scrollLeft;if(null!=o.scrollTop&&(_e(t,o.scrollTop),Math.abs(t.doc.scrollTop-s)>1&&(i=!0)),null!=o.scrollLeft&&(ke(t,o.scrollLeft),Math.abs(t.doc.scrollLeft-a)>1&&(i=!0)),!i)return r}}function sn(t,e,n,i,r){var o=an(t,e,n,i,r);null!=o.scrollTop&&_e(t,o.scrollTop),null!=o.scrollLeft&&ke(t,o.scrollLeft)}function an(t,e,n,i,r){var o=t.display,s=ee(t.display);0>n&&(n=0);var a=o.scroller.clientHeight-ko,l=o.scroller.scrollTop,c={},u=t.doc.height+O(o),h=s>n,d=r>u-s;if(l>n)c.scrollTop=h?0:n;else if(r>l+a){var p=Math.min(n,(d?u:r)-a);p!=l&&(c.scrollTop=p)}var f=o.scroller.clientWidth-ko,g=o.scroller.scrollLeft;e+=o.gutters.offsetWidth,i+=o.gutters.offsetWidth;var m=o.gutters.offsetWidth,v=m+10>e;return g+m>e||v?(v&&(e=0),c.scrollLeft=Math.max(0,e-10-m)):i>f+g-3&&(c.scrollLeft=i+10-f),c}function ln(t,e,n){t.curOp.updateScrollPos={scrollLeft:null==e?t.doc.scrollLeft:e,scrollTop:null==n?t.doc.scrollTop:n}}function cn(t,e,n){var i=t.curOp.updateScrollPos||(t.curOp.updateScrollPos={scrollLeft:t.doc.scrollLeft,scrollTop:t.doc.scrollTop}),r=t.display.scroller;i.scrollTop=Math.max(0,Math.min(r.scrollHeight-r.clientHeight,i.scrollTop+n)),i.scrollLeft=Math.max(0,Math.min(r.scrollWidth-r.clientWidth,i.scrollLeft+e))}function un(t,e,n,i){var r=t.doc;if(null==n&&(n="add"),"smart"==n)if(t.doc.mode.indent)var o=D(t,e);else n="prev";var s,a=t.options.tabSize,l=hi(r,e),c=Ui(l.text,null,a),u=l.text.match(/^\s*/)[0];if("smart"==n&&(s=t.doc.mode.indent(o,l.text.slice(u.length),l.text),s==Co)){if(!i)return;n="prev"}"prev"==n?s=e>r.first?Ui(hi(r,e-1).text,null,a):0:"add"==n?s=c+t.options.indentUnit:"subtract"==n?s=c-t.options.indentUnit:"number"==typeof n&&(s=c+n),s=Math.max(0,s);var h="",d=0;if(t.options.indentWithTabs)for(var p=Math.floor(s/a);p;--p)d+=a,h+="	";s>d&&(h+=Xi(s-d)),h!=u&&We(t.doc,h,Ve(e,0),Ve(e,u.length),"+input"),l.stateAfter=null}function hn(t,e,n){var i=e,r=e,o=t.doc;return"number"==typeof e?r=hi(o,Ye(o,e)):i=gi(e),null==i?null:n(r,i)?(le(t,i,i+1),r):null}function dn(t,e,n,i,r){function o(){var e=a+n;return t.first>e||e>=t.first+t.size?h=!1:(a=e,u=hi(t,e))}function s(t){var e=(r?xr:_r)(u,l,n,!0);if(null==e){if(t||!o())return h=!1;l=r?(0>n?gr:fr)(u):0>n?u.text.length:0}else l=e;return!0}var a=e.line,l=e.ch,c=n,u=hi(t,a),h=!0;if("char"==i)s();else if("column"==i)s(!0);else if("word"==i||"group"==i)for(var d=null,p="group"==i,f=!0;!(0>n)||s(!f);f=!1){var g=u.text.charAt(l)||"\n",m=er(g)?"w":p?/\s/.test(g)?null:"p":null;if(d&&d!=m){0>n&&(n=1,s());break}if(m&&(d=m),n>0&&!s(!f))break}var v=nn(t,Ve(a,l),c,!0);return h||(v.hitSide=!0),v}function pn(t,e,n,i){var r,o=t.doc,s=e.left;if("page"==i){var a=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);r=e.top+n*(a-(0>n?1.5:.5)*ee(t.display))}else"line"==i&&(r=n>0?e.bottom+3:e.top-3);for(;;){var l=Q(t,s,r);if(!l.outside)break;if(0>n?0>=r:r>=o.height){l.hitSide=!0;break}r+=5*n}return l}function fn(t,e){var n=e.ch,i=e.ch;if(t){(0>e.xRel||i==t.length)&&n?--n:++i;for(var r=t.charAt(n),o=er(r)?er:/\s/.test(r)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!er(t)};n>0&&o(t.charAt(n-1));)--n;for(;t.length>i&&o(t.charAt(i));)++i}return{from:Ve(e.line,n),to:Ve(e.line,i)}}function gn(t,e){Ze(t.doc,Ve(e,0),Ge(t.doc,Ve(e+1,0)))}function mn(e,n,i,r){t.defaults[e]=n,i&&(no[e]=r?function(t,e,n){n!=ro&&i(t,e,n)}:i)}function vn(t,e){if(e===!0)return e;if(t.copyState)return t.copyState(e);var n={};for(var i in e){var r=e[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n}function yn(t,e,n){return t.startState?t.startState(e,n):!0}function bn(t){return"string"==typeof t?ho[t]:t}function wn(t,e,n){function i(e){e=bn(e);var r=e[t];if(r===!1)return"stop";if(null!=r&&n(r))return!0;if(e.nofallthrough)return"stop";var o=e.fallthrough;if(null==o)return!1;if("[object Array]"!=Object.prototype.toString.call(o))return i(o);for(var s=0,a=o.length;a>s;++s){var l=i(o[s]);if(l)return l}return!1}for(var r=0;e.length>r;++r){var o=i(e[r]);if(o)return"stop"!=o}}function xn(t){var e=Po[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function _n(t,e){if(Lr&&34==t.keyCode&&t["char"])return!1;var n=Po[t.keyCode];return null==n||t.altGraphKey?!1:(t.altKey&&(n="Alt-"+n),(Vr?t.metaKey:t.ctrlKey)&&(n="Ctrl-"+n),(Vr?t.ctrlKey:t.metaKey)&&(n="Cmd-"+n),!e&&t.shiftKey&&(n="Shift-"+n),n)}function kn(t,e){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0}function Cn(t,e){this.lines=[],this.type=e,this.doc=t}function Sn(t,e,n,i,r){if(i&&i.shared)return Tn(t,e,n,i,r);if(t.cm&&!t.cm.curOp)return oe(t.cm,Sn)(t,e,n,i,r);var o=new Cn(t,r);if("range"==r&&!Ue(e,n))return o;i&&Zi(i,o),o.replacedWith&&(o.collapsed=!0,o.replacedWith=ir("span",[o.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||(o.replacedWith.ignoreEvents=!0)),o.collapsed&&(Xr=!0),o.addToHistory&&_i(t,{from:e,to:n,origin:"markText"},{head:t.sel.head,anchor:t.sel.anchor},0/0);var s,a,l,c=e.line,u=0,h=t.cm;if(t.iter(c,n.line+1,function(i){h&&o.collapsed&&!h.options.lineWrapping&&jn(t,i)==h.display.maxLine&&(l=!0);var r={from:null,to:null,marker:o};u+=i.text.length,c==e.line&&(r.from=e.ch,u-=e.ch),c==n.line&&(r.to=n.ch,u-=i.text.length-n.ch),o.collapsed&&(c==n.line&&(a=Hn(i,n.ch)),c==e.line?s=Hn(i,e.ch):fi(i,0)),Ln(i,r),++c}),o.collapsed&&t.iter(e.line,n.line+1,function(e){zn(t,e)&&fi(e,0)}),o.clearOnEnter&&Oi(o,"beforeCursorEnter",function(){o.clear()}),o.readOnly&&(Ur=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),o.collapsed){if(s!=a)throw Error("Inserting collapsed marker overlapping an existing one");o.size=u,o.atomic=!0}return h&&(l&&(h.curOp.updateMaxLine=!0),(o.className||o.title||o.startStyle||o.endStyle||o.collapsed)&&le(h,e.line,n.line+1),o.atomic&&en(h)),o}function $n(t,e){this.markers=t,this.primary=e;for(var n=0,i=this;t.length>n;++n)t[n].parent=this,Oi(t[n],"clear",function(){i.clear()})}function Tn(t,e,n,i,r){i=Zi(i),i.shared=!1;var o=[Sn(t,e,n,i,r)],s=o[0],a=i.replacedWith;return ci(t,function(t){a&&(i.replacedWith=a.cloneNode(!0)),o.push(Sn(t,Ge(t,e),Ge(t,n),i,r));for(var l=0;t.linked.length>l;++l)if(t.linked[l].isParent)return;s=Yi(o)}),new $n(o,s)}function Mn(t,e){if(t)for(var n=0;t.length>n;++n){var i=t[n];if(i.marker==e)return i}}function En(t,e){for(var n,i=0;t.length>i;++i)t[i]!=e&&(n||(n=[])).push(t[i]);return n}function Ln(t,e){t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.attachLine(t)}function An(t,e,n){if(t)for(var i,r=0;t.length>r;++r){var o=t[r],s=o.marker,a=null==o.from||(s.inclusiveLeft?e>=o.from:e>o.from);if(a||"bookmark"==s.type&&o.from==e&&(!n||!o.marker.insertLeft)){var l=null==o.to||(s.inclusiveRight?o.to>=e:o.to>e);(i||(i=[])).push({from:o.from,to:l?null:o.to,marker:s})}}return i}function In(t,e,n){if(t)for(var i,r=0;t.length>r;++r){var o=t[r],s=o.marker,a=null==o.to||(s.inclusiveRight?o.to>=e:o.to>e);if(a||"bookmark"==s.type&&o.from==e&&(!n||o.marker.insertLeft)){var l=null==o.from||(s.inclusiveLeft?e>=o.from:e>o.from);(i||(i=[])).push({from:l?null:o.from-e,to:null==o.to?null:o.to-e,marker:s})}}return i}function Nn(t,e){var n=Ke(t,e.from.line)&&hi(t,e.from.line).markedSpans,i=Ke(t,e.to.line)&&hi(t,e.to.line).markedSpans;if(!n&&!i)return null;var r=e.from.ch,o=e.to.ch,s=qe(e.from,e.to),a=An(n,r,s),l=In(i,o,s),c=1==e.text.length,u=Yi(e.text).length+(c?r:0);if(a)for(var h=0;a.length>h;++h){var d=a[h];if(null==d.to){var p=Mn(l,d.marker);p?c&&(d.to=null==p.to?null:p.to+u):d.to=r}}if(l)for(var h=0;l.length>h;++h){var d=l[h];if(null!=d.to&&(d.to+=u),null==d.from){var p=Mn(a,d.marker);p||(d.from=u,c&&(a||(a=[])).push(d))}else d.from+=u,c&&(a||(a=[])).push(d)}if(c&&a){for(var h=0;a.length>h;++h)null!=a[h].from&&a[h].from==a[h].to&&"bookmark"!=a[h].marker.type&&a.splice(h--,1);a.length||(a=null)}var f=[a];if(!c){var g,m=e.text.length-2;if(m>0&&a)for(var h=0;a.length>h;++h)null==a[h].to&&(g||(g=[])).push({from:null,to:null,marker:a[h].marker});for(var h=0;m>h;++h)f.push(g);f.push(l)}return f}function Pn(t,e){var n=Ci(t,e),i=Nn(t,e);if(!n)return i;if(!i)return n;for(var r=0;n.length>r;++r){var o=n[r],s=i[r];if(o&&s)t:for(var a=0;s.length>a;++a){for(var l=s[a],c=0;o.length>c;++c)if(o[c].marker==l.marker)continue t;o.push(l)}else s&&(n[r]=s)}return n}function Dn(t,e,n){var i=null;if(t.iter(e.line,n.line+1,function(t){if(t.markedSpans)for(var e=0;t.markedSpans.length>e;++e){var n=t.markedSpans[e].marker;!n.readOnly||i&&-1!=Ji(i,n)||(i||(i=[])).push(n)}}),!i)return null;for(var r=[{from:e,to:n}],o=0;i.length>o;++o)for(var s=i[o],a=s.find(),l=0;r.length>l;++l){var c=r[l];if(!Ue(c.to,a.from)&&!Ue(a.to,c.from)){var u=[l,1];(Ue(c.from,a.from)||!s.inclusiveLeft&&qe(c.from,a.from))&&u.push({from:c.from,to:a.from}),(Ue(a.to,c.to)||!s.inclusiveRight&&qe(c.to,a.to))&&u.push({from:a.to,to:c.to}),r.splice.apply(r,u),l+=u.length-1}}return r}function Hn(t,e){var n,i=Xr&&t.markedSpans;if(i)for(var r,o=0;i.length>o;++o)r=i[o],r.marker.collapsed&&(null==r.from||e>r.from)&&(null==r.to||r.to>e)&&(!n||n.width<r.marker.width)&&(n=r.marker);return n}function On(t){return Hn(t,-1)}function Bn(t){return Hn(t,t.text.length+1)}function jn(t,e){for(var n;n=On(e);)e=hi(t,n.find().from.line);return e}function zn(t,e){var n=Xr&&e.markedSpans;if(n)for(var i,r=0;n.length>r;++r)if(i=n[r],i.marker.collapsed){if(null==i.from)return!0;if(!i.marker.replacedWith&&0==i.from&&i.marker.inclusiveLeft&&Rn(t,e,i))return!0}}function Rn(t,e,n){if(null==n.to){var i=n.marker.find().to,r=hi(t,i.line);return Rn(t,r,Mn(r.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==e.text.length)return!0;for(var o,s=0;e.markedSpans.length>s;++s)if(o=e.markedSpans[s],o.marker.collapsed&&!o.marker.replacedWith&&o.from==n.to&&(o.marker.inclusiveLeft||n.marker.inclusiveRight)&&Rn(t,e,o))return!0}function Fn(t){var e=t.markedSpans;if(e){for(var n=0;e.length>n;++n)e[n].marker.detachLine(t);t.markedSpans=null}}function Wn(t,e){if(e){for(var n=0;e.length>n;++n)e[n].marker.attachLine(t);t.markedSpans=e}}function Vn(t){return function(){var e=!this.cm.curOp;e&&ie(this.cm);try{var n=t.apply(this,arguments)}finally{e&&re(this.cm)}return n}}function qn(t){return null!=t.height?t.height:(t.node.parentNode&&1==t.node.parentNode.nodeType||or(t.cm.display.measure,ir("div",[t.node],null,"position: relative")),t.height=t.node.offsetHeight)}function Un(t,e,n,i){var r=new po(t,n,i);return r.noHScroll&&(t.display.alignWidgets=!0),hn(t,e,function(e){var n=e.widgets||(e.widgets=[]);if(null==r.insertAt?n.push(r):n.splice(Math.min(n.length-1,Math.max(0,r.insertAt)),0,r),r.line=e,!zn(t.doc,e)||r.showIfHidden){var i=vi(t,e)<t.doc.scrollTop;fi(e,e.height+qn(r)),i&&cn(t,0,r.height)}return!0}),r}function Xn(t,e,n,i){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),Fn(t),Wn(t,n);var r=i?i(t):1;r!=t.height&&fi(t,r)}function Yn(t){t.parent=null,Fn(t)}function Gn(t,e,n,i,r){var o=n.flattenSpans;null==o&&(o=t.options.flattenSpans);var s,a=0,l=null,c=new kn(e,t.options.tabSize);for(""==e&&n.blankLine&&n.blankLine(i);!c.eol();)c.pos>t.options.maxHighlightLength?(o=!1,c.pos=Math.min(e.length,c.start+5e4),s=null):s=n.token(c,i),o&&l==s||(c.start>a&&r(c.start,l),a=c.start,l=s),c.start=c.pos;c.pos>a&&r(c.pos,l)}function Jn(t,e,n){var i=[t.state.modeGen];Gn(t,e.text,t.doc.mode,n,function(t,e){i.push(t,e)});for(var r=0;t.state.overlays.length>r;++r){var o=t.state.overlays[r],s=1,a=0;Gn(t,e.text,o.mode,!0,function(t,e){for(var n=s;t>a;){var r=i[s];r>t&&i.splice(s,1,t,i[s+1],r),s+=2,a=Math.min(t,r)}if(e)if(o.opaque)i.splice(n,s-n,t,e),s=n+2;else for(;s>n;n+=2){var l=i[n+1];i[n+1]=l?l+" "+e:e}})}return i}function Kn(t,e){return e.styles&&e.styles[0]==t.state.modeGen||(e.styles=Jn(t,e,e.stateAfter=D(t,gi(e)))),e.styles}function Zn(t,e,n){var i=t.doc.mode,r=new kn(e.text,t.options.tabSize);for(""==e.text&&i.blankLine&&i.blankLine(n);!r.eol()&&r.pos<=t.options.maxHighlightLength;)i.token(r,n),r.start=r.pos}function Qn(t){return t?go[t]||(go[t]="cm-"+t.replace(/ +/g," cm-")):null}function ti(t,e,n,i){for(var r,o=e,s=!0;r=On(o);)o=hi(t.doc,r.find().from.line);var a={pre:ir("pre"),col:0,pos:0,measure:null,measuredSomething:!1,cm:t,copyWidgets:i};o.textClass&&(a.pre.className=o.textClass);do{o.text&&(s=!1),a.measure=o==e&&n,a.pos=0,a.addToken=a.measure?ni:ei,(Cr||Tr)&&t.getOption("lineWrapping")&&(a.addToken=ii(a.addToken));var l=oi(o,a,Kn(t,o));n&&o==e&&!a.measuredSomething&&(n[0]=a.pre.appendChild(ur(t.display.measure)),a.measuredSomething=!0),l&&(o=hi(t.doc,l.to.line))}while(l);!n||a.measuredSomething||n[0]||(n[0]=a.pre.appendChild(s?ir("span"," "):ur(t.display.measure))),a.pre.firstChild||zn(t.doc,e)||a.pre.appendChild(document.createTextNode(" "));var c;if(n&&Cr&&(c=yi(o))){var u=c.length-1;c[u].from==c[u].to&&--u;var h=c[u],d=c[u-1];if(h.from+1==h.to&&d&&h.level<d.level){var p=n[a.pos-1];p&&p.parentNode.insertBefore(p.measureRight=ur(t.display.measure),p.nextSibling)}}return ji(t,"renderLine",t,e,a.pre),a.pre}function ei(t,e,n,i,r,o){if(e){if(mo.test(e))for(var s=document.createDocumentFragment(),a=0;;){mo.lastIndex=a;var l=mo.exec(e),c=l?l.index-a:e.length-a;if(c&&(s.appendChild(document.createTextNode(e.slice(a,a+c))),t.col+=c),!l)break;if(a+=c+1,"	"==l[0]){var u=t.cm.options.tabSize,h=u-t.col%u;s.appendChild(ir("span",Xi(h),"cm-tab")),t.col+=h}else{var d=ir("span","•","cm-invalidchar");d.title="\\u"+l[0].charCodeAt(0).toString(16),s.appendChild(d),t.col+=1}}else{t.col+=e.length;var s=document.createTextNode(e)}if(n||i||r||t.measure){var p=n||"";i&&(p+=i),r&&(p+=r);var d=ir("span",[s],p);return o&&(d.title=o),t.pre.appendChild(d)}t.pre.appendChild(s)}}function ni(t,e,n,i,r){for(var o=t.cm.options.lineWrapping,s=0;e.length>s;++s){var a=e.charAt(s),l=0==s;a>=""&&"">a&&e.length-1>s?(a=e.slice(s,s+2),++s):s&&o&&lr(e,s)&&t.pre.appendChild(ir("wbr"));var c=t.measure[t.pos],u=t.measure[t.pos]=ei(t,a,n,l&&i,s==e.length-1&&r);c&&(u.leftSide=c.leftSide||c),Cr&&o&&" "==a&&s&&!/\s/.test(e.charAt(s-1))&&e.length-1>s&&!/\s/.test(e.charAt(s+1))&&(u.style.whiteSpace="normal"),t.pos+=a.length}e.length&&(t.measuredSomething=!0)}function ii(t){function e(t){for(var e=" ",n=0;t.length-2>n;++n)e+=n%2?" ":" ";return e+=" "}return function(n,i,r,o,s,a){return t(n,i.replace(/ {3,}/,e),r,o,s,a)}}function ri(t,e,n,i){var r=!i&&n.replacedWith;if(r&&(t.copyWidgets&&(r=r.cloneNode(!0)),t.pre.appendChild(r),t.measure)){if(e)t.measure[t.pos]=r;else{var o=ur(t.cm.display.measure);if("bookmark"!=n.type||n.insertLeft){if(t.measure[t.pos])return;t.measure[t.pos]=t.pre.insertBefore(o,r)}else t.measure[t.pos]=t.pre.appendChild(o)}t.measuredSomething=!0}t.pos+=e}function oi(t,e,n){var i=t.markedSpans,r=t.text,o=0;if(i)for(var s,a,l,c,u,h,d=r.length,p=0,f=1,g="",m=0;;){if(m==p){a=l=c=u="",h=null,m=1/0;for(var v=[],y=0;i.length>y;++y){var b=i[y],w=b.marker;p>=b.from&&(null==b.to||b.to>p)?(null!=b.to&&m>b.to&&(m=b.to,l=""),w.className&&(a+=" "+w.className),w.startStyle&&b.from==p&&(c+=" "+w.startStyle),w.endStyle&&b.to==m&&(l+=" "+w.endStyle),w.title&&!u&&(u=w.title),w.collapsed&&(!h||h.marker.size<w.size)&&(h=b)):b.from>p&&m>b.from&&(m=b.from),"bookmark"==w.type&&b.from==p&&w.replacedWith&&v.push(w)}if(h&&(h.from||0)==p&&(ri(e,(null==h.to?d:h.to)-p,h.marker,null==h.from),null==h.to))return h.marker.find();if(!h&&v.length)for(var y=0;v.length>y;++y)ri(e,0,v[y])}if(p>=d)break;for(var x=Math.min(d,m);;){if(g){var _=p+g.length;if(!h){var k=_>x?g.slice(0,x-p):g;e.addToken(e,k,s?s+a:a,c,p+k.length==m?l:"",u)}if(_>=x){g=g.slice(x-p),p=x;break}p=_,c=""}g=r.slice(o,o=n[f++]),s=Qn(n[f++])}}else for(var f=1;n.length>f;f+=2)e.addToken(e,r.slice(o,o=n[f]),Qn(n[f+1]))}function si(t,e,n,i,r){function o(t){return n?n[t]:null}function s(t,n,i){Xn(t,n,i,r),zi(t,"change",t,e)}var a=e.from,l=e.to,c=e.text,u=hi(t,a.line),h=hi(t,l.line),d=Yi(c),p=o(c.length-1),f=l.line-a.line;if(0==a.ch&&0==l.ch&&""==d){for(var g=0,m=c.length-1,v=[];m>g;++g)v.push(new fo(c[g],o(g),r));s(h,h.text,p),f&&t.remove(a.line,f),v.length&&t.insert(a.line,v)}else if(u==h)if(1==c.length)s(u,u.text.slice(0,a.ch)+d+u.text.slice(l.ch),p);else{for(var v=[],g=1,m=c.length-1;m>g;++g)v.push(new fo(c[g],o(g),r));v.push(new fo(d+u.text.slice(l.ch),p,r)),s(u,u.text.slice(0,a.ch)+c[0],o(0)),t.insert(a.line+1,v)}else if(1==c.length)s(u,u.text.slice(0,a.ch)+c[0]+h.text.slice(l.ch),o(0)),t.remove(a.line+1,f);else{s(u,u.text.slice(0,a.ch)+c[0],o(0)),s(h,d+h.text.slice(l.ch),p);for(var g=1,m=c.length-1,v=[];m>g;++g)v.push(new fo(c[g],o(g),r));f>1&&t.remove(a.line+1,f-1),t.insert(a.line+1,v)}zi(t,"change",t,e),tn(t,i.anchor,i.head,null,!0)}function ai(t){this.lines=t,this.parent=null;for(var e=0,n=t.length,i=0;n>e;++e)t[e].parent=this,i+=t[e].height;this.height=i}function li(t){this.children=t;for(var e=0,n=0,i=0,r=t.length;r>i;++i){var o=t[i];e+=o.chunkSize(),n+=o.height,o.parent=this}this.size=e,this.height=n,this.parent=null}function ci(t,e,n){function i(t,r,o){if(t.linked)for(var s=0;t.linked.length>s;++s){var a=t.linked[s];if(a.doc!=r){var l=o&&a.sharedHist;(!n||l)&&(e(a.doc,l),i(a.doc,t,l))}}}i(t,null,!0)}function ui(t,e){if(e.cm)throw Error("This document is already in use.");t.doc=e,e.cm=t,o(t),n(t),t.options.lineWrapping||h(t),t.options.mode=e.modeOption,le(t)}function hi(t,e){for(e-=t.first;!t.lines;)for(var n=0;;++n){var i=t.children[n],r=i.chunkSize();if(r>e){t=i;break}e-=r}return t.lines[e]}function di(t,e,n){var i=[],r=e.line;return t.iter(e.line,n.line+1,function(t){var o=t.text;r==n.line&&(o=o.slice(0,n.ch)),r==e.line&&(o=o.slice(e.ch)),i.push(o),++r}),i}function pi(t,e,n){var i=[];return t.iter(e,n,function(t){i.push(t.text)}),i}function fi(t,e){for(var n=e-t.height,i=t;i;i=i.parent)i.height+=n}function gi(t){if(null==t.parent)return null;for(var e=t.parent,n=Ji(e.lines,t),i=e.parent;i;e=i,i=i.parent)for(var r=0;i.children[r]!=e;++r)n+=i.children[r].chunkSize();return n+e.first}function mi(t,e){var n=t.first;t:do{for(var i=0,r=t.children.length;r>i;++i){var o=t.children[i],s=o.height;if(s>e){t=o;continue t}e-=s,n+=o.chunkSize()}return n}while(!t.lines);for(var i=0,r=t.lines.length;r>i;++i){var a=t.lines[i],l=a.height;if(l>e)break;e-=l}return n+i}function vi(t,e){e=jn(t.doc,e);for(var n=0,i=e.parent,r=0;i.lines.length>r;++r){var o=i.lines[r];if(o==e)break;n+=o.height}for(var s=i.parent;s;i=s,s=i.parent)for(var r=0;s.children.length>r;++r){var a=s.children[r];if(a==i)break;n+=a.height}return n}function yi(t){var e=t.order;return null==e&&(e=t.order=Ho(t.text)),e}function bi(t){return{done:[],undone:[],undoDepth:1/0,lastTime:0,lastOp:null,lastOrigin:null,generation:t||1,maxGeneration:t||1}}function wi(t,e,n,i){var r=e["spans_"+t.id],o=0;t.iter(Math.max(t.first,n),Math.min(t.first+t.size,i),function(n){n.markedSpans&&((r||(r=e["spans_"+t.id]={}))[o]=n.markedSpans),++o})}function xi(t,e){var n={line:e.from.line,ch:e.from.ch},i={from:n,to:eo(e),text:di(t,e.from,e.to)};return wi(t,i,e.from.line,e.to.line+1),ci(t,function(t){wi(t,i,e.from.line,e.to.line+1)},!0),i}function _i(t,e,n,i){var r=t.history;r.undone.length=0;var o=+new Date,s=Yi(r.done);if(s&&(r.lastOp==i||r.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&t.cm&&r.lastTime>o-t.cm.options.historyEventDelay||"*"==e.origin.charAt(0)))){var a=Yi(s.changes);qe(e.from,e.to)&&qe(e.from,a.to)?a.to=eo(e):s.changes.push(xi(t,e)),s.anchorAfter=n.anchor,s.headAfter=n.head}else for(s={changes:[xi(t,e)],generation:r.generation,anchorBefore:t.sel.anchor,headBefore:t.sel.head,anchorAfter:n.anchor,headAfter:n.head},r.done.push(s),r.generation=++r.maxGeneration;r.done.length>r.undoDepth;)r.done.shift();r.lastTime=o,r.lastOp=i,r.lastOrigin=e.origin}function ki(t){if(!t)return null;for(var e,n=0;t.length>n;++n)t[n].marker.explicitlyCleared?e||(e=t.slice(0,n)):e&&e.push(t[n]);return e?e.length?e:null:t}function Ci(t,e){var n=e["spans_"+t.id];if(!n)return null;for(var i=0,r=[];e.text.length>i;++i)r.push(ki(n[i]));return r}function Si(t,e){for(var n=0,i=[];t.length>n;++n){var r=t[n],o=r.changes,s=[];i.push({changes:s,anchorBefore:r.anchorBefore,headBefore:r.headBefore,anchorAfter:r.anchorAfter,headAfter:r.headAfter});for(var a=0;o.length>a;++a){var l,c=o[a];if(s.push({from:c.from,to:c.to,text:c.text}),e)for(var u in c)(l=u.match(/^spans_(\d+)$/))&&Ji(e,Number(l[1]))>-1&&(Yi(s)[u]=c[u],delete c[u])}}return i}function $i(t,e,n,i){t.line>n?t.line+=i:t.line>e&&(t.line=e,t.ch=0)
}function Ti(t,e,n,i){for(var r=0;t.length>r;++r){for(var o=t[r],s=!0,a=0;o.changes.length>a;++a){var l=o.changes[a];if(o.copied||(l.from=Xe(l.from),l.to=Xe(l.to)),l.from.line>n)l.from.line+=i,l.to.line+=i;else if(l.to.line>=e){s=!1;break}}o.copied||(o.anchorBefore=Xe(o.anchorBefore),o.headBefore=Xe(o.headBefore),o.anchorAfter=Xe(o.anchorAfter),o.readAfter=Xe(o.headAfter),o.copied=!0),s?($i(o.anchorBefore),$i(o.headBefore),$i(o.anchorAfter),$i(o.headAfter)):(t.splice(0,r+1),r=0)}}function Mi(t,e){var n=e.from.line,i=e.to.line,r=e.text.length-(i-n)-1;Ti(t.done,n,i,r),Ti(t.undone,n,i,r)}function Ei(){Pi(this)}function Li(t){return t.stop||(t.stop=Ei),t}function Ai(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function Ii(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function Ni(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function Pi(t){Ai(t),Ii(t)}function Di(t){return t.target||t.srcElement}function Hi(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),Br&&t.ctrlKey&&1==e&&(e=3),e}function Oi(t,e,n){if(t.addEventListener)t.addEventListener(e,n,!1);else if(t.attachEvent)t.attachEvent("on"+e,n);else{var i=t._handlers||(t._handlers={}),r=i[e]||(i[e]=[]);r.push(n)}}function Bi(t,e,n){if(t.removeEventListener)t.removeEventListener(e,n,!1);else if(t.detachEvent)t.detachEvent("on"+e,n);else{var i=t._handlers&&t._handlers[e];if(!i)return;for(var r=0;i.length>r;++r)if(i[r]==n){i.splice(r,1);break}}}function ji(t,e){var n=t._handlers&&t._handlers[e];if(n)for(var i=Array.prototype.slice.call(arguments,2),r=0;n.length>r;++r)n[r].apply(null,i)}function zi(t,e){function n(t){return function(){t.apply(null,r)}}var i=t._handlers&&t._handlers[e];if(i){var r=Array.prototype.slice.call(arguments,2);xo||(++_o,xo=[],setTimeout(Fi,0));for(var o=0;i.length>o;++o)xo.push(n(i[o]))}}function Ri(t,e,n){return ji(t,n||e.type,t,e),Ni(e)||e.codemirrorIgnore}function Fi(){--_o;var t=xo;xo=null;for(var e=0;t.length>e;++e)t[e]()}function Wi(t,e){var n=t._handlers&&t._handlers[e];return n&&n.length>0}function Vi(t){t.prototype.on=function(t,e){Oi(this,t,e)},t.prototype.off=function(t,e){Bi(this,t,e)}}function qi(){this.id=null}function Ui(t,e,n,i,r){null==e&&(e=t.search(/[^\s\u00a0]/),-1==e&&(e=t.length));for(var o=i||0,s=r||0;e>o;++o)"	"==t.charAt(o)?s+=n-s%n:++s;return s}function Xi(t){for(;t>=So.length;)So.push(Yi(So)+" ");return So[t]}function Yi(t){return t[t.length-1]}function Gi(t){if(Hr)t.selectionStart=0,t.selectionEnd=t.value.length;else try{t.select()}catch(e){}}function Ji(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;i>n;++n)if(t[n]==e)return n;return-1}function Ki(t,e){function n(){}n.prototype=t;var i=new n;return e&&Zi(e,i),i}function Zi(t,e){e||(e={});for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Qi(t){for(var e=[],n=0;t>n;++n)e.push(void 0);return e}function tr(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function er(t){return/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||$o.test(t))}function nr(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}function ir(t,e,n,i){var r=document.createElement(t);if(n&&(r.className=n),i&&(r.style.cssText=i),"string"==typeof e)sr(r,e);else if(e)for(var o=0;e.length>o;++o)r.appendChild(e[o]);return r}function rr(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function or(t,e){return rr(t).appendChild(e)}function sr(t,e){$r?(t.innerHTML="",t.appendChild(document.createTextNode(e))):t.textContent=e}function ar(t){return t.getBoundingClientRect()}function lr(){return!1}function cr(t){if(null!=Eo)return Eo;var e=ir("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return or(t,e),e.offsetWidth&&(Eo=e.offsetHeight-e.clientHeight),Eo||0}function ur(t){if(null==Lo){var e=ir("span","​");or(t,ir("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(Lo=1>=e.offsetWidth&&e.offsetHeight>2&&!Sr)}return Lo?ir("span","​"):ir("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}function hr(t,e,n,i){if(!t)return i(e,n,"ltr");for(var r=!1,o=0;t.length>o;++o){var s=t[o];(n>s.from&&s.to>e||e==n&&s.to==e)&&(i(Math.max(s.from,e),Math.min(s.to,n),1==s.level?"rtl":"ltr"),r=!0)}r||i(e,n,"ltr")}function dr(t){return t.level%2?t.to:t.from}function pr(t){return t.level%2?t.from:t.to}function fr(t){var e=yi(t);return e?dr(e[0]):0}function gr(t){var e=yi(t);return e?pr(Yi(e)):t.text.length}function mr(t,e){var n=hi(t.doc,e),i=jn(t.doc,n);i!=n&&(e=gi(i));var r=yi(i),o=r?r[0].level%2?gr(i):fr(i):0;return Ve(e,o)}function vr(t,e){for(var n,i;n=Bn(i=hi(t.doc,e));)e=n.find().to.line;var r=yi(i),o=r?r[0].level%2?fr(i):gr(i):i.text.length;return Ve(e,o)}function yr(t,e,n){var i=t[0].level;return e==i?!0:n==i?!1:n>e}function br(t,e){for(var n,i=0;t.length>i;++i){var r=t[i];if(e>r.from&&r.to>e)return Do=null,i;if(r.from==e||r.to==e){if(null!=n)return yr(t,r.level,t[n].level)?(Do=n,i):(Do=i,n);n=i}}return Do=null,n}function wr(t,e,n,i){if(!i)return e+n;do e+=n;while(e>0&&To.test(t.text.charAt(e)));return e}function xr(t,e,n,i){var r=yi(t);if(!r)return _r(t,e,n,i);for(var o=br(r,e),s=r[o],a=wr(t,e,s.level%2?-n:n,i);;){if(a>s.from&&s.to>a)return a;if(a==s.from||a==s.to)return br(r,a)==o?a:(s=r[o+=n],n>0==s.level%2?s.to:s.from);if(s=r[o+=n],!s)return null;a=n>0==s.level%2?wr(t,s.to,-1,i):wr(t,s.from,1,i)}}function _r(t,e,n,i){var r=e+n;if(i)for(;r>0&&To.test(t.text.charAt(r));)r+=n;return 0>r||r>t.text.length?null:r}var kr=/gecko\/\d/i.test(navigator.userAgent),Cr=/MSIE \d/.test(navigator.userAgent),Sr=Cr&&(null==document.documentMode||8>document.documentMode),$r=Cr&&(null==document.documentMode||9>document.documentMode),Tr=/WebKit\//.test(navigator.userAgent),Mr=Tr&&/Qt\/\d+\.\d+/.test(navigator.userAgent),Er=/Chrome\//.test(navigator.userAgent),Lr=/Opera\//.test(navigator.userAgent),Ar=/Apple Computer/.test(navigator.vendor),Ir=/KHTML\//.test(navigator.userAgent),Nr=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),Pr=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),Dr=/PhantomJS/.test(navigator.userAgent),Hr=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Or=Hr||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),Br=Hr||/Mac/.test(navigator.platform),jr=/win/i.test(navigator.platform),zr=Lr&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);zr&&(zr=Number(zr[1])),zr&&zr>=15&&(Lr=!1,Tr=!0);var Rr,Fr,Wr,Vr=Br&&(Mr||Lr&&(null==zr||12.11>zr)),qr=kr||Cr&&!$r,Ur=!1,Xr=!1,Yr=0,Gr=0,Jr=0,Kr=null;Cr?Kr=-.53:kr?Kr=15:Er?Kr=-.7:Ar&&(Kr=-1/3);var Zr,Qr,to=null,eo=t.changeEnd=function(t){return t.text?Ve(t.from.line+t.text.length-1,Yi(t.text).length+(1==t.text.length?t.from.ch:0)):t.to};t.Pos=Ve,t.prototype={constructor:t,focus:function(){window.focus(),pe(this),Ae(this),ue(this)},setOption:function(t,e){var n=this.options,i=n[t];(n[t]!=e||"mode"==t)&&(n[t]=e,no.hasOwnProperty(t)&&oe(this,no[t])(this,e,i))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](t)},removeKeyMap:function(t){for(var e=this.state.keyMaps,n=0;e.length>n;++n)if(e[n]==t||"string"!=typeof e[n]&&e[n].name==t)return e.splice(n,1),!0},addOverlay:oe(null,function(e,n){var i=e.token?e:t.getMode(this.options,e);if(i.startState)throw Error("Overlays may not be stateful.");this.state.overlays.push({mode:i,modeSpec:e,opaque:n&&n.opaque}),this.state.modeGen++,le(this)}),removeOverlay:oe(null,function(t){for(var e=this.state.overlays,n=0;e.length>n;++n){var i=e[n].modeSpec;if(i==t||"string"==typeof t&&i.name==t)return e.splice(n,1),this.state.modeGen++,le(this),void 0}}),indentLine:oe(null,function(t,e,n){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),Ke(this.doc,t)&&un(this,t,e,n)}),indentSelection:oe(null,function(t){var e=this.doc.sel;if(qe(e.from,e.to))return un(this,e.from.line,t);for(var n=e.to.line-(e.to.ch?0:1),i=e.from.line;n>=i;++i)un(this,i,t)}),getTokenAt:function(t,e){var n=this.doc;t=Ge(n,t);for(var i=D(this,t.line,e),r=this.doc.mode,o=hi(n,t.line),s=new kn(o.text,this.options.tabSize);s.pos<t.ch&&!s.eol();){s.start=s.pos;var a=r.token(s,i)}return{start:s.start,end:s.pos,string:s.current(),className:a||null,type:a||null,state:i}},getTokenTypeAt:function(t){t=Ge(this.doc,t);var e=Kn(this,hi(this.doc,t.line)),n=0,i=(e.length-1)/2,r=t.ch;if(0==r)return e[2];for(;;){var o=n+i>>1;if((o?e[2*o-1]:0)>=r)i=o;else{if(!(r>e[2*o+1]))return e[2*o+2];n=o+1}}},getModeAt:function(e){var n=this.doc.mode;return n.innerMode?t.innerMode(n,this.getTokenAt(e).state).mode:n},getHelper:function(t,e){if(co.hasOwnProperty(e)){var n=co[e],i=this.getModeAt(t);return i[e]&&n[i[e]]||i.helperType&&n[i.helperType]||n[i.name]}},getStateAfter:function(t,e){var n=this.doc;return t=Ye(n,null==t?n.first+n.size-1:t),D(this,t+1,e)},cursorCoords:function(t,e){var n,i=this.doc.sel;return n=null==t?i.head:"object"==typeof t?Ge(this.doc,t):t?i.from:i.to,K(this,n,e||"page")},charCoords:function(t,e){return J(this,Ge(this.doc,t),e||"page")},coordsChar:function(t,e){return t=G(this,t,e||"page"),Q(this,t.left,t.top)},lineAtHeight:function(t,e){return t=G(this,{top:t,left:0},e||"page").top,mi(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e){var n=!1,i=this.doc.first+this.doc.size-1;this.doc.first>t?t=this.doc.first:t>i&&(t=i,n=!0);var r=hi(this.doc,t);return Y(this,hi(this.doc,t),{top:0,left:0},e||"page").top+(n?r.height:0)},defaultTextHeight:function(){return ee(this.display)},defaultCharWidth:function(){return ne(this.display)},setGutterMarker:oe(null,function(t,e,n){return hn(this,t,function(t){var i=t.gutterMarkers||(t.gutterMarkers={});return i[e]=n,!n&&nr(i)&&(t.gutterMarkers=null),!0})}),clearGutter:oe(null,function(t){var e=this,n=e.doc,i=n.first;n.iter(function(n){n.gutterMarkers&&n.gutterMarkers[t]&&(n.gutterMarkers[t]=null,le(e,i,i+1),nr(n.gutterMarkers)&&(n.gutterMarkers=null)),++i})}),addLineClass:oe(null,function(t,e,n){return hn(this,t,function(t){var i="text"==e?"textClass":"background"==e?"bgClass":"wrapClass";if(t[i]){if(RegExp("(?:^|\\s)"+n+"(?:$|\\s)").test(t[i]))return!1;t[i]+=" "+n}else t[i]=n;return!0})}),removeLineClass:oe(null,function(t,e,n){return hn(this,t,function(t){var i="text"==e?"textClass":"background"==e?"bgClass":"wrapClass",r=t[i];if(!r)return!1;if(null==n)t[i]=null;else{var o=r.match(RegExp("(?:^|\\s+)"+n+"(?:$|\\s+)"));if(!o)return!1;var s=o.index+o[0].length;t[i]=r.slice(0,o.index)+(o.index&&s!=r.length?" ":"")+r.slice(s)||null}return!0})}),addLineWidget:oe(null,function(t,e,n){return Un(this,t,e,n)}),removeLineWidget:function(t){t.clear()},lineInfo:function(t){if("number"==typeof t){if(!Ke(this.doc,t))return null;var e=t;if(t=hi(this.doc,t),!t)return null}else{var e=gi(t);if(null==e)return null}return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(t,e,n,i,r){var o=this.display;t=K(this,Ge(this.doc,t));var s=t.bottom,a=t.left;if(e.style.position="absolute",o.sizer.appendChild(e),"over"==i)s=t.top;else if("above"==i||"near"==i){var l=Math.max(o.wrapper.clientHeight,this.doc.height),c=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==i||t.bottom+e.offsetHeight>l)&&t.top>e.offsetHeight?s=t.top-e.offsetHeight:l>=t.bottom+e.offsetHeight&&(s=t.bottom),a+e.offsetWidth>c&&(a=c-e.offsetWidth)}e.style.top=s+"px",e.style.left=e.style.right="","right"==r?(a=o.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==r?a=0:"middle"==r&&(a=(o.sizer.clientWidth-e.offsetWidth)/2),e.style.left=a+"px"),n&&sn(this,a,s,a+e.offsetWidth,s+e.offsetHeight)},triggerOnKeyDown:oe(null,Ee),execCommand:function(t){return uo[t](this)},findPosH:function(t,e,n,i){var r=1;0>e&&(r=-1,e=-e);for(var o=0,s=Ge(this.doc,t);e>o&&(s=dn(this.doc,s,r,n,i),!s.hitSide);++o);return s},moveH:oe(null,function(t,e){var n,i=this.doc.sel;n=i.shift||i.extend||qe(i.from,i.to)?dn(this.doc,i.head,t,e,this.options.rtlMoveVisually):0>t?i.from:i.to,Ze(this.doc,n,n,t)}),deleteH:oe(null,function(t,e){var n=this.doc.sel;qe(n.from,n.to)?We(this.doc,"",n.from,dn(this.doc,n.head,t,e,!1),"+delete"):We(this.doc,"",n.from,n.to,"+delete"),this.curOp.userSelChange=!0}),findPosV:function(t,e,n,i){var r=1,o=i;0>e&&(r=-1,e=-e);for(var s=0,a=Ge(this.doc,t);e>s;++s){var l=K(this,a,"div");if(null==o?o=l.left:l.left=o,a=pn(this,l,r,n),a.hitSide)break}return a},moveV:oe(null,function(t,e){var n=this.doc.sel,i=K(this,n.head,"div");null!=n.goalColumn&&(i.left=n.goalColumn);var r=pn(this,i,t,e);"page"==e&&cn(this,0,J(this,r,"div").top-i.top),Ze(this.doc,r,r,t),n.goalColumn=i.left}),toggleOverwrite:function(t){(null==t||t!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite",""))},hasFocus:function(){return this.state.focused},scrollTo:oe(null,function(t,e){ln(this,t,e)}),getScrollInfo:function(){var t=this.display.scroller,e=ko;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-e,width:t.scrollWidth-e,clientHeight:t.clientHeight-e,clientWidth:t.clientWidth-e}},scrollIntoView:oe(null,function(t,e){"number"==typeof t&&(t=Ve(t,0)),e||(e=0);var n=t;t&&null==t.line||(this.curOp.scrollToPos=t?Ge(this.doc,t):this.doc.sel.head,this.curOp.scrollToPosMargin=e,n=K(this,this.curOp.scrollToPos));var i=an(this,n.left,n.top-e,n.right,n.bottom+e);ln(this,i.scrollLeft,i.scrollTop)}),setSize:oe(null,function(t,e){function n(t){return"number"==typeof t||/^\d+$/.test(t+"")?t+"px":t}null!=t&&(this.display.wrapper.style.width=n(t)),null!=e&&(this.display.wrapper.style.height=n(e)),this.options.lineWrapping&&(this.display.measureLineCache.length=this.display.measureLineCachePos=0),this.curOp.forceUpdate=!0}),operation:function(t){return ae(this,t)},refresh:oe(null,function(){q(this),ln(this,this.doc.scrollLeft,this.doc.scrollTop),le(this)}),swapDoc:oe(null,function(t){var e=this.doc;return e.cm=null,ui(this,t),q(this),de(this,!0),ln(this,t.scrollLeft,t.scrollTop),e}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Vi(t);var no=t.optionHandlers={},io=t.defaults={},ro=t.Init={toString:function(){return"CodeMirror.Init"}};mn("value","",function(t,e){t.setValue(e)},!0),mn("mode",null,function(t,e){t.doc.modeOption=e,n(t)},!0),mn("indentUnit",2,n,!0),mn("indentWithTabs",!1),mn("smartIndent",!0),mn("tabSize",4,function(t){n(t),q(t),le(t)},!0),mn("electricChars",!0),mn("rtlMoveVisually",!jr),mn("theme","default",function(t){a(t),l(t)},!0),mn("keyMap","default",s),mn("extraKeys",null),mn("onKeyEvent",null),mn("onDragEvent",null),mn("lineWrapping",!1,i,!0),mn("gutters",[],function(t){d(t.options),l(t)},!0),mn("fixedGutter",!0,function(t,e){t.display.gutters.style.left=e?y(t.display)+"px":"0",t.refresh()},!0),mn("coverGutterNextToScrollbar",!1,p,!0),mn("lineNumbers",!1,function(t){d(t.options),l(t)},!0),mn("firstLineNumber",1,l,!0),mn("lineNumberFormatter",function(t){return t},l,!0),mn("showCursorWhenSelecting",!1,M,!0),mn("readOnly",!1,function(t,e){"nocursor"==e?(Ie(t),t.display.input.blur()):e||de(t,!0)}),mn("dragDrop",!0),mn("cursorBlinkRate",530),mn("cursorScrollMargin",0),mn("cursorHeight",1),mn("workTime",100),mn("workDelay",100),mn("flattenSpans",!0),mn("pollInterval",100),mn("undoDepth",40,function(t,e){t.doc.history.undoDepth=e}),mn("historyEventDelay",500),mn("viewportMargin",10,function(t){t.refresh()},!0),mn("maxHighlightLength",1e4,function(t){n(t),t.refresh()},!0),mn("moveInputWithCursor",!0,function(t,e){e||(t.display.inputDiv.style.top=t.display.inputDiv.style.left=0)}),mn("tabindex",null,function(t,e){t.display.input.tabIndex=e||""}),mn("autofocus",null);var oo=t.modes={},so=t.mimeModes={};t.defineMode=function(e,n){if(t.defaults.mode||"null"==e||(t.defaults.mode=e),arguments.length>2){n.dependencies=[];for(var i=2;arguments.length>i;++i)n.dependencies.push(arguments[i])}oo[e]=n},t.defineMIME=function(t,e){so[t]=e},t.resolveMode=function(e){if("string"==typeof e&&so.hasOwnProperty(e))e=so[e];else if(e&&"string"==typeof e.name&&so.hasOwnProperty(e.name)){var n=so[e.name];e=Ki(n,e),e.name=n.name}else if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return t.resolveMode("application/xml");return"string"==typeof e?{name:e}:e||{name:"null"}},t.getMode=function(e,n){var n=t.resolveMode(n),i=oo[n.name];if(!i)return t.getMode(e,"text/plain");var r=i(e,n);if(ao.hasOwnProperty(n.name)){var o=ao[n.name];for(var s in o)o.hasOwnProperty(s)&&(r.hasOwnProperty(s)&&(r["_"+s]=r[s]),r[s]=o[s])}return r.name=n.name,r},t.defineMode("null",function(){return{token:function(t){t.skipToEnd()}}}),t.defineMIME("text/plain","null");var ao=t.modeExtensions={};t.extendMode=function(t,e){var n=ao.hasOwnProperty(t)?ao[t]:ao[t]={};Zi(e,n)},t.defineExtension=function(e,n){t.prototype[e]=n},t.defineDocExtension=function(t,e){yo.prototype[t]=e},t.defineOption=mn;var lo=[];t.defineInitHook=function(t){lo.push(t)};var co=t.helpers={};t.registerHelper=function(e,n,i){co.hasOwnProperty(e)||(co[e]=t[e]={}),co[e][n]=i},t.isWordChar=er,t.copyState=vn,t.startState=yn,t.innerMode=function(t,e){for(;t.innerMode;){var n=t.innerMode(e);if(!n||n.mode==t)break;e=n.state,t=n.mode}return n||{mode:t,state:e}};var uo=t.commands={selectAll:function(t){t.setSelection(Ve(t.firstLine(),0),Ve(t.lastLine()))},killLine:function(t){var e=t.getCursor(!0),n=t.getCursor(!1),i=!qe(e,n);i||t.getLine(e.line).length!=e.ch?t.replaceRange("",e,i?n:Ve(e.line),"+delete"):t.replaceRange("",e,Ve(e.line+1,0),"+delete")},deleteLine:function(t){var e=t.getCursor().line;t.replaceRange("",Ve(e,0),Ve(e),"+delete")},delLineLeft:function(t){var e=t.getCursor();t.replaceRange("",Ve(e.line,0),e,"+delete")},undo:function(t){t.undo()},redo:function(t){t.redo()},goDocStart:function(t){t.extendSelection(Ve(t.firstLine(),0))},goDocEnd:function(t){t.extendSelection(Ve(t.lastLine()))},goLineStart:function(t){t.extendSelection(mr(t,t.getCursor().line))},goLineStartSmart:function(t){var e=t.getCursor(),n=mr(t,e.line),i=t.getLineHandle(n.line),r=yi(i);if(r&&0!=r[0].level)t.extendSelection(n);else{var o=Math.max(0,i.text.search(/\S/)),s=e.line==n.line&&o>=e.ch&&e.ch;t.extendSelection(Ve(n.line,s?0:o))}},goLineEnd:function(t){t.extendSelection(vr(t,t.getCursor().line))},goLineRight:function(t){var e=t.charCoords(t.getCursor(),"div").top+5;t.extendSelection(t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:e},"div"))},goLineLeft:function(t){var e=t.charCoords(t.getCursor(),"div").top+5;t.extendSelection(t.coordsChar({left:0,top:e},"div"))},goLineUp:function(t){t.moveV(-1,"line")},goLineDown:function(t){t.moveV(1,"line")},goPageUp:function(t){t.moveV(-1,"page")},goPageDown:function(t){t.moveV(1,"page")},goCharLeft:function(t){t.moveH(-1,"char")},goCharRight:function(t){t.moveH(1,"char")},goColumnLeft:function(t){t.moveH(-1,"column")},goColumnRight:function(t){t.moveH(1,"column")},goWordLeft:function(t){t.moveH(-1,"word")},goGroupRight:function(t){t.moveH(1,"group")},goGroupLeft:function(t){t.moveH(-1,"group")},goWordRight:function(t){t.moveH(1,"word")},delCharBefore:function(t){t.deleteH(-1,"char")},delCharAfter:function(t){t.deleteH(1,"char")},delWordBefore:function(t){t.deleteH(-1,"word")},delWordAfter:function(t){t.deleteH(1,"word")},delGroupBefore:function(t){t.deleteH(-1,"group")},delGroupAfter:function(t){t.deleteH(1,"group")},indentAuto:function(t){t.indentSelection("smart")},indentMore:function(t){t.indentSelection("add")},indentLess:function(t){t.indentSelection("subtract")},insertTab:function(t){t.replaceSelection("	","end","+input")},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.replaceSelection("	","end","+input")},transposeChars:function(t){var e=t.getCursor(),n=t.getLine(e.line);e.ch>0&&e.ch<n.length-1&&t.replaceRange(n.charAt(e.ch)+n.charAt(e.ch-1),Ve(e.line,e.ch-1),Ve(e.line,e.ch+1))},newlineAndIndent:function(t){oe(t,function(){t.replaceSelection("\n","end","+input"),t.indentLine(t.getCursor().line,null,!0)})()},toggleOverwrite:function(t){t.toggleOverwrite()}},ho=t.keyMap={};ho.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},ho.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},ho.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft",fallthrough:["basic","emacsy"]},ho["default"]=Br?ho.macDefault:ho.pcDefault,ho.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},t.lookupKey=wn,t.isModifierKey=xn,t.keyName=_n,t.fromTextArea=function(e,n){function i(){e.value=c.getValue()}if(n||(n={}),n.value=e.value,!n.tabindex&&e.tabindex&&(n.tabindex=e.tabindex),!n.placeholder&&e.placeholder&&(n.placeholder=e.placeholder),null==n.autofocus){var r=document.body;try{r=document.activeElement}catch(o){}n.autofocus=r==e||null!=e.getAttribute("autofocus")&&r==document.body}if(e.form&&(Oi(e.form,"submit",i),!n.leaveSubmitMethodAlone)){var s=e.form,a=s.submit;try{var l=s.submit=function(){i(),s.submit=a,s.submit(),s.submit=l}}catch(o){}}e.style.display="none";var c=t(function(t){e.parentNode.insertBefore(t,e.nextSibling)},n);return c.save=i,c.getTextArea=function(){return e},c.toTextArea=function(){i(),e.parentNode.removeChild(c.getWrapperElement()),e.style.display="",e.form&&(Bi(e.form,"submit",i),"function"==typeof e.form.submit&&(e.form.submit=a))},c},kn.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(t){var e=this.string.charAt(this.pos);if("string"==typeof t)var n=e==t;else var n=e&&(t.test?t.test(e):t(e));return n?(++this.pos,e):void 0},eatWhile:function(t){for(var e=this.pos;this.eat(t););return this.pos>e},eatSpace:function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},skipToEnd:function(){this.pos=this.string.length},skipTo:function(t){var e=this.string.indexOf(t,this.pos);return e>-1?(this.pos=e,!0):void 0},backUp:function(t){this.pos-=t},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Ui(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue},indentation:function(){return Ui(this.string,null,this.tabSize)},match:function(t,e,n){if("string"!=typeof t){var i=this.string.slice(this.pos).match(t);return i&&i.index>0?null:(i&&e!==!1&&(this.pos+=i[0].length),i)}var r=function(t){return n?t.toLowerCase():t},o=this.string.substr(this.pos,t.length);return r(o)==r(t)?(e!==!1&&(this.pos+=t.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},t.StringStream=kn,t.TextMarker=Cn,Vi(Cn),Cn.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;if(e&&ie(t),Wi(this,"clear")){var n=this.find();n&&zi(this,"clear",n.from,n.to)}for(var i=null,r=null,o=0;this.lines.length>o;++o){var s=this.lines[o],a=Mn(s.markedSpans,this);null!=a.to&&(r=gi(s)),s.markedSpans=En(s.markedSpans,a),null!=a.from?i=gi(s):this.collapsed&&!zn(this.doc,s)&&t&&fi(s,ee(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var o=0;this.lines.length>o;++o){var l=jn(t.doc,this.lines[o]),c=u(t.doc,l);c>t.display.maxLineLength&&(t.display.maxLine=l,t.display.maxLineLength=c,t.display.maxLineChanged=!0)}null!=i&&t&&le(t,i,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&en(t)),e&&re(t)}},Cn.prototype.find=function(){for(var t,e,n=0;this.lines.length>n;++n){var i=this.lines[n],r=Mn(i.markedSpans,this);if(null!=r.from||null!=r.to){var o=gi(i);null!=r.from&&(t=Ve(o,r.from)),null!=r.to&&(e=Ve(o,r.to))}}return"bookmark"==this.type?t:t&&{from:t,to:e}},Cn.prototype.changed=function(){var t=this.find(),e=this.doc.cm;if(t&&e){"bookmark"!=this.type&&(t=t.from);var n=hi(this.doc,t.line);if(R(e,n),t.line>=e.display.showingFrom&&t.line<e.display.showingTo){for(var i=e.display.lineDiv.firstChild;i;i=i.nextSibling)if(i.lineObj==n){i.offsetHeight!=n.height&&fi(n,i.offsetHeight);break}ae(e,function(){e.curOp.selectionChanged=e.curOp.forceUpdate=e.curOp.updateMaxLine=!0})}}},Cn.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=Ji(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},Cn.prototype.detachLine=function(t){if(this.lines.splice(Ji(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}},t.SharedTextMarker=$n,Vi($n),$n.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;this.markers.length>t;++t)this.markers[t].clear();zi(this,"clear")}},$n.prototype.find=function(){return this.primary.find()};var po=t.LineWidget=function(t,e,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.cm=t,this.node=e};Vi(po),po.prototype.clear=Vn(function(){var t=this.line.widgets,e=gi(this.line);if(null!=e&&t){for(var n=0;t.length>n;++n)t[n]==this&&t.splice(n--,1);t.length||(this.line.widgets=null);var i=vi(this.cm,this.line)<this.cm.doc.scrollTop;fi(this.line,Math.max(0,this.line.height-qn(this))),i&&cn(this.cm,0,-this.height),le(this.cm,e,e+1)}}),po.prototype.changed=Vn(function(){var t=this.height;this.height=null;var e=qn(this)-t;if(e){fi(this.line,this.line.height+e);var n=gi(this.line);le(this.cm,n,n+1)}});var fo=t.Line=function(t,e,n){this.text=t,Wn(this,e),this.height=n?n(this):1};Vi(fo);var go={},mo=/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\uFEFF]/g;ai.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var n=t,i=t+e;i>n;++n){var r=this.lines[n];this.height-=r.height,Yn(r),zi(r,"delete")}this.lines.splice(t,e)},collapse:function(t){t.splice.apply(t,[t.length,0].concat(this.lines))},insertInner:function(t,e,n){this.height+=n,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var i=0,r=e.length;r>i;++i)e[i].parent=this},iterN:function(t,e,n){for(var i=t+e;i>t;++t)if(n(this.lines[t]))return!0}},li.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var n=0;this.children.length>n;++n){var i=this.children[n],r=i.chunkSize();if(r>t){var o=Math.min(e,r-t),s=i.height;if(i.removeInner(t,o),this.height-=s-i.height,r==o&&(this.children.splice(n--,1),i.parent=null),0==(e-=o))break;t=0}else t-=r}if(25>this.size-e){var a=[];this.collapse(a),this.children=[new ai(a)],this.children[0].parent=this}},collapse:function(t){for(var e=0,n=this.children.length;n>e;++e)this.children[e].collapse(t)},insertInner:function(t,e,n){this.size+=e.length,this.height+=n;for(var i=0,r=this.children.length;r>i;++i){var o=this.children[i],s=o.chunkSize();if(s>=t){if(o.insertInner(t,e,n),o.lines&&o.lines.length>50){for(;o.lines.length>50;){var a=o.lines.splice(o.lines.length-25,25),l=new ai(a);o.height-=l.height,this.children.splice(i+1,0,l),l.parent=this}this.maybeSpill()}break}t-=s}},maybeSpill:function(){if(!(10>=this.children.length)){var t=this;do{var e=t.children.splice(t.children.length-5,5),n=new li(e);if(t.parent){t.size-=n.size,t.height-=n.height;var i=Ji(t.parent.children,t);t.parent.children.splice(i+1,0,n)}else{var r=new li(t.children);r.parent=t,t.children=[r,n],t=r}n.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,e,n){for(var i=0,r=this.children.length;r>i;++i){var o=this.children[i],s=o.chunkSize();if(s>t){var a=Math.min(e,s-t);if(o.iterN(t,a,n))return!0;if(0==(e-=a))break;t=0}else t-=s}}};var vo=0,yo=t.Doc=function(t,e,n){if(!(this instanceof yo))return new yo(t,e,n);null==n&&(n=0),li.call(this,[new ai([new fo("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.history=bi(),this.cleanGeneration=1,this.frontier=n;var i=Ve(n,0);this.sel={from:i,to:i,head:i,anchor:i,shift:!1,extend:!1,goalColumn:null},this.id=++vo,this.modeOption=e,"string"==typeof t&&(t=Ao(t)),si(this,{from:i,to:i,text:t},null,{head:i,anchor:i})};yo.prototype=Ki(li.prototype,{constructor:yo,iter:function(t,e,n){n?this.iterN(t-this.first,e-t,n):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var n=0,i=0,r=e.length;r>i;++i)n+=e[i].height;this.insertInner(t-this.first,e,n)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=pi(this,this.first,this.first+this.size);return t===!1?e:e.join(t||"\n")},setValue:function(t){var e=Ve(this.first,0),n=this.first+this.size-1;Oe(this,{from:e,to:Ve(n,hi(this,n).text.length),text:Ao(t),origin:"setValue"},{head:e,anchor:e},!0)},replaceRange:function(t,e,n,i){e=Ge(this,e),n=n?Ge(this,n):e,We(this,t,e,n,i)},getRange:function(t,e,n){var i=di(this,Ge(this,t),Ge(this,e));return n===!1?i:i.join(n||"\n")},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},setLine:function(t,e){Ke(this,t)&&We(this,e,Ve(t,0),Ge(this,Ve(t)))},removeLine:function(t){t?We(this,"",Ge(this,Ve(t-1)),Ge(this,Ve(t))):We(this,"",Ve(0,0),Ge(this,Ve(1,0)))},getLineHandle:function(t){return Ke(this,t)?hi(this,t):void 0},getLineNumber:function(t){return gi(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=hi(this,t)),jn(this,t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return Ge(this,t)},getCursor:function(t){var e,n=this.sel;return e=null==t||"head"==t?n.head:"anchor"==t?n.anchor:"end"==t||t===!1?n.to:n.from,Xe(e)},somethingSelected:function(){return!qe(this.sel.head,this.sel.anchor)},setCursor:se(function(t,e,n){var i=Ge(this,"number"==typeof t?Ve(t,e||0):t);n?Ze(this,i):tn(this,i,i)}),setSelection:se(function(t,e,n){tn(this,Ge(this,t),Ge(this,e||t),n)}),extendSelection:se(function(t,e,n){Ze(this,Ge(this,t),e&&Ge(this,e),n)}),getSelection:function(t){return this.getRange(this.sel.from,this.sel.to,t)
},replaceSelection:function(t,e,n){Oe(this,{from:this.sel.from,to:this.sel.to,text:Ao(t),origin:n},e||"around")},undo:se(function(){je(this,"undo")}),redo:se(function(){je(this,"redo")}),setExtending:function(t){this.sel.extend=t},historySize:function(){var t=this.history;return{undo:t.done.length,redo:t.undone.length}},clearHistory:function(){this.history=bi(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration()},changeGeneration:function(){return this.history.lastOp=this.history.lastOrigin=null,this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:Si(this.history.done),undone:Si(this.history.undone)}},setHistory:function(t){var e=this.history=bi(this.history.maxGeneration);e.done=t.done.slice(0),e.undone=t.undone.slice(0)},markText:function(t,e,n){return Sn(this,Ge(this,t),Ge(this,e),n,"range")},setBookmark:function(t,e){var n={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft};return t=Ge(this,t),Sn(this,t,t,n,"bookmark")},findMarksAt:function(t){t=Ge(this,t);var e=[],n=hi(this,t.line).markedSpans;if(n)for(var i=0;n.length>i;++i){var r=n[i];(null==r.from||r.from<=t.ch)&&(null==r.to||r.to>=t.ch)&&e.push(r.marker.parent||r.marker)}return e},getAllMarks:function(){var t=[];return this.iter(function(e){var n=e.markedSpans;if(n)for(var i=0;n.length>i;++i)null!=n[i].from&&t.push(n[i].marker)}),t},posFromIndex:function(t){var e,n=this.first;return this.iter(function(i){var r=i.text.length+1;return r>t?(e=t,!0):(t-=r,++n,void 0)}),Ge(this,Ve(n,e))},indexFromPos:function(t){t=Ge(this,t);var e=t.ch;return t.line<this.first||0>t.ch?0:(this.iter(this.first,t.line,function(t){e+=t.text.length+1}),e)},copy:function(t){var e=new yo(pi(this,this.first,this.first+this.size),this.modeOption,this.first);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn},t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,n=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&n>t.to&&(n=t.to);var i=new yo(pi(this,e,n),t.mode||this.modeOption,e);return t.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:t.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],i},unlinkDoc:function(e){if(e instanceof t&&(e=e.doc),this.linked)for(var n=0;this.linked.length>n;++n){var i=this.linked[n];if(i.doc==e){this.linked.splice(n,1),e.unlinkDoc(this);break}}if(e.history==this.history){var r=[e.id];ci(e,function(t){r.push(t.id)},!0),e.history=bi(),e.history.done=Si(this.history.done,r),e.history.undone=Si(this.history.undone,r)}},iterLinkedDocs:function(t){ci(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),yo.prototype.eachLine=yo.prototype.iter;var bo="iter insert remove copy getEditor".split(" ");for(var wo in yo.prototype)yo.prototype.hasOwnProperty(wo)&&0>Ji(bo,wo)&&(t.prototype[wo]=function(t){return function(){return t.apply(this.doc,arguments)}}(yo.prototype[wo]));Vi(yo),t.e_stop=Pi,t.e_preventDefault=Ai,t.e_stopPropagation=Ii;var xo,_o=0;t.on=Oi,t.off=Bi,t.signal=ji;var ko=30,Co=t.Pass={toString:function(){return"CodeMirror.Pass"}};qi.prototype={set:function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)}},t.countColumn=Ui;var So=[""],$o=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,To=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff]/;t.replaceGetRect=function(t){ar=t};var Mo=function(){if($r)return!1;var t=ir("div");return"draggable"in t||"dragDrop"in t}();kr?lr=function(t,e){return 36==t.charCodeAt(e-1)&&39==t.charCodeAt(e)}:Ar&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?lr=function(t,e){return/\-[^ \-?]|\?[^ !\'\"\),.\-\/:;\?\]\}]/.test(t.slice(e-1,e+1))}:Tr&&!/Chrome\/(?:29|[3-9]\d|\d\d\d)\./.test(navigator.userAgent)&&(lr=function(t,e){if(e>1&&45==t.charCodeAt(e-1)){if(/\w/.test(t.charAt(e-2))&&/[^\-?\.]/.test(t.charAt(e)))return!0;if(e>2&&/[\d\.,]/.test(t.charAt(e-2))&&/[\d\.,]/.test(t.charAt(e)))return!1}return/[~!#%&*)=+}\]|\"\.>,:;][({[<]|-[^\-?\.\u2010-\u201f\u2026]|\?[\w~`@#$%\^&*(_=+{[|><]|…[\w~`@#$%\^&*(_=+{[><]/.test(t.slice(e-1,e+1))});var Eo,Lo,Ao=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,n=[],i=t.length;i>=e;){var r=t.indexOf("\n",e);-1==r&&(r=t.length);var o=t.slice(e,"\r"==t.charAt(r-1)?r-1:r),s=o.indexOf("\r");-1!=s?(n.push(o.slice(0,s)),e+=s+1):(n.push(o),e=r+1)}return n}:function(t){return t.split(/\r\n?|\n/)};t.splitLines=Ao;var Io=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(e){return!1}}:function(t){try{var e=t.ownerDocument.selection.createRange()}catch(n){}return e&&e.parentElement()==t?0!=e.compareEndPoints("StartToEnd",e):!1},No=function(){var t=ir("div");return"oncopy"in t?!0:(t.setAttribute("oncopy","return;"),"function"==typeof t.oncopy)}(),Po={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};t.keyNames=Po,function(){for(var t=0;10>t;t++)Po[t+48]=t+"";for(var t=65;90>=t;t++)Po[t]=String.fromCharCode(t);for(var t=1;12>=t;t++)Po[t+111]=Po[t+63235]="F"+t}();var Do,Ho=function(){function t(t){return 255>=t?e.charAt(t):t>=1424&&1524>=t?"R":t>=1536&&1791>=t?n.charAt(t-1536):t>=1792&&2220>=t?"r":"L"}var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",n="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,r=/[stwN]/,o=/[LRr]/,s=/[Lb1n]/,a=/[1n]/,l="L";return function(e){if(!i.test(e))return!1;for(var n,c=e.length,u=[],h=0;c>h;++h)u.push(n=t(e.charCodeAt(h)));for(var h=0,d=l;c>h;++h){var n=u[h];"m"==n?u[h]=d:d=n}for(var h=0,p=l;c>h;++h){var n=u[h];"1"==n&&"r"==p?u[h]="n":o.test(n)&&(p=n,"r"==n&&(u[h]="R"))}for(var h=1,d=u[0];c-1>h;++h){var n=u[h];"+"==n&&"1"==d&&"1"==u[h+1]?u[h]="1":","!=n||d!=u[h+1]||"1"!=d&&"n"!=d||(u[h]=d),d=n}for(var h=0;c>h;++h){var n=u[h];if(","==n)u[h]="N";else if("%"==n){for(var f=h+1;c>f&&"%"==u[f];++f);for(var g=h&&"!"==u[h-1]||c-1>f&&"1"==u[f]?"1":"N",m=h;f>m;++m)u[m]=g;h=f-1}}for(var h=0,p=l;c>h;++h){var n=u[h];"L"==p&&"1"==n?u[h]="L":o.test(n)&&(p=n)}for(var h=0;c>h;++h)if(r.test(u[h])){for(var f=h+1;c>f&&r.test(u[f]);++f);for(var v="L"==(h?u[h-1]:l),y="L"==(c-1>f?u[f]:l),g=v||y?"L":"R",m=h;f>m;++m)u[m]=g;h=f-1}for(var b,w=[],h=0;c>h;)if(s.test(u[h])){var x=h;for(++h;c>h&&s.test(u[h]);++h);w.push({from:x,to:h,level:0})}else{var _=h,k=w.length;for(++h;c>h&&"L"!=u[h];++h);for(var m=_;h>m;)if(a.test(u[m])){m>_&&w.splice(k,0,{from:_,to:m,level:1});var C=m;for(++m;h>m&&a.test(u[m]);++m);w.splice(k,0,{from:C,to:m,level:2}),_=m}else++m;h>_&&w.splice(k,0,{from:_,to:h,level:1})}return 1==w[0].level&&(b=e.match(/^\s+/))&&(w[0].from=b[0].length,w.unshift({from:0,to:b[0].length,level:0})),1==Yi(w).level&&(b=e.match(/\s+$/))&&(Yi(w).to-=b[0].length,w.push({from:c-b[0].length,to:c,level:0})),w[0].level!=Yi(w).level&&w.push({from:c,to:c,level:w[0].level}),w}}();return t.version="3.16.0",t}(),define("codemirror/codemirror",["css!../components/codemirror/codemirror.css"],function(t){return function(){var e;return e||t.CodeMirror}}(this)),define("codemirror/ManagedEditors",["codemirror/codemirror"],function(t){function e(e,n){var i={},r=t(function(t){i.el=t,n&&n(t)},e);return i.mirror=r,i}var n={};return{getEditor:function(t,i,r){return n[t]||(n[t]=e(i,r))}}}),CodeMirror.defineMode("markdown",function(t,e){function n(t,e,n){return e.f=e.inline=n,n(t,e)}function i(t,e,n){return e.f=e.block=n,n(t,e)}function r(t){return t.linkTitle=!1,t.em=!1,t.strong=!1,t.quote=0,m||t.f!=s||(t.f=u,t.block=o),t.trailingSpace=0,t.trailingSpaceNewLine=!1,t.thisLineHasContent=!1,null}function o(t,r){var o=r.list!==!1;if(r.list!==!1&&r.indentationDiff>=0?(4>r.indentationDiff&&(r.indentation-=r.indentationDiff),r.list=null):r.list!==!1&&r.indentation>0?(r.list=null,r.listDepth=Math.floor(r.indentation/4)):r.list!==!1&&(r.list=!1,r.listDepth=0),r.indentationDiff>=4)return r.indentation-=4,t.skipToEnd(),_;if(t.eatSpace())return null;if("#"===t.peek()||r.prevLineHasContent&&t.match(z))r.header=!0;else if(t.eat(">"))for(r.indentation++,r.quote=1,t.eatSpace();t.eat(">");)t.eatSpace(),r.quote++;else{if("["===t.peek())return n(t,r,d);if(t.match(H,!0))return M;if(r.prevLineHasContent&&!o||!t.match(O,!0)&&!t.match(B,!0)){if(e.fencedCodeBlocks&&t.match(/^```([\w+#]*)/,!0))return r.localMode=b(RegExp.$1),r.localMode&&(r.localState=r.localMode.startState()),i(t,r,a),_}else r.indentation+=4,r.list=!0,r.listDepth++,e.taskLists&&t.match(j,!1)&&(r.taskList=!0)}return n(t,r,r.inline)}function s(t,e){var n=v.token(t,e.htmlState);return m&&"tag"===n&&"openTag"!==e.htmlState.type&&!e.htmlState.context&&(e.f=u,e.block=o),e.md_inside&&-1!=t.current().indexOf(">")&&(e.f=u,e.block=o,e.htmlState.context=void 0),n}function a(t,e){return t.sol()&&t.match(/^```/,!0)?(e.localMode=e.localState=null,e.f=u,e.block=o,_):e.localMode?e.localMode.token(t,e.localState):(t.skipToEnd(),_)}function l(t){var e=[];if(t.taskOpen)return"meta";if(t.taskClosed)return"property";if(t.strong&&e.push(D),t.em&&e.push(P),t.linkText&&e.push(I),t.code&&e.push(_),t.header&&e.push(x),t.quote&&e.push(t.quote%2?k:C),t.list!==!1){var n=(t.listDepth-1)%3;n?1===n?e.push($):e.push(T):e.push(S)}return t.trailingSpaceNewLine?e.push("trailing-space-new-line"):t.trailingSpace&&e.push("trailing-space-"+(t.trailingSpace%2?"a":"b")),e.length?e.join(" "):null}function c(t,e){return t.match(R,!0)?l(e):void 0}function u(t,r){var o=r.text(t,r);if(o!==void 0)return o;if(r.list)return r.list=null,l(r);if(r.taskList){var a="x"!==t.match(j,!0)[1];return a?r.taskOpen=!0:r.taskClosed=!0,r.taskList=!1,l(r)}r.taskOpen=!1,r.taskClosed=!1;var c=t.next();if("\\"===c)return t.next(),l(r);if(r.linkTitle){r.linkTitle=!1;var u=c;"("===c&&(u=")"),u=(u+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");var d="^\\s*(?:[^"+u+"\\\\]+|\\\\\\\\|\\\\.)"+u;if(t.match(RegExp(d),!0))return N}if("`"===c){var p=l(r),f=t.pos;t.eatWhile("`");var m=1+t.pos-f;return r.code?m===w?(r.code=!1,p):l(r):(w=m,r.code=!0,l(r))}if(r.code)return l(r);if("!"===c&&t.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return t.match(/\[[^\]]*\]/),r.inline=r.f=h,E;if("["===c&&t.match(/.*\](\(| ?\[)/,!1))return r.linkText=!0,l(r);if("]"===c&&r.linkText){var v=l(r);return r.linkText=!1,r.inline=r.f=h,v}if("<"===c&&t.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return n(t,r,g(L,">"));if("<"===c&&t.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return n(t,r,g(A,">"));if("<"===c&&t.match(/^\w/,!1)){if(-1!=t.string.indexOf(">")){var y=t.string.substring(1,t.string.indexOf(">"));/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(y)&&(r.md_inside=!0)}return t.backUp(1),i(t,r,s)}if("<"===c&&t.match(/^\/\w*?>/))return r.md_inside=!1,"tag";var b=!1;if(!e.underscoresBreakWords&&"_"===c&&"_"!==t.peek()&&t.match(/(\w)/,!1)){var x=t.pos-2;if(x>=0){var _=t.string.charAt(x);"_"!==_&&_.match(/(\w)/,!1)&&(b=!0)}}var p=l(r);if("*"===c||"_"===c&&!b){if(r.strong===c&&t.eat(c))return r.strong=!1,p;if(!r.strong&&t.eat(c))return r.strong=c,l(r);if(r.em===c)return r.em=!1,p;if(!r.em)return r.em=c,l(r)}else if(" "===c&&(t.eat("*")||t.eat("_"))){if(" "===t.peek())return l(r);t.backUp(1)}return" "===c&&(t.match(/ +$/,!1)?r.trailingSpace++:r.trailingSpace&&(r.trailingSpaceNewLine=!0)),l(r)}function h(t,e){if(t.eatSpace())return null;var i=t.next();return"("===i||"["===i?n(t,e,g(N,"("===i?")":"]")):"error"}function d(t,e){return t.match(/^[^\]]*\]:/,!0)?(e.f=p,I):n(t,e,u)}function p(t,e){return t.eatSpace()?null:(t.match(/^[^\s]+/,!0),void 0===t.peek()?e.linkTitle=!0:t.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),e.f=e.inline=u,N)}function f(t){return F[t]||(t=(t+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),F[t]=RegExp("^(?:[^\\\\]|\\\\.)*?("+t+")")),F[t]}function g(t,e,n){return n=n||u,function(i,r){return i.match(f(e)),r.inline=r.f=n,t}}var m=CodeMirror.modes.hasOwnProperty("xml"),v=CodeMirror.getMode(t,m?{name:"xml",htmlMode:!0}:"text/plain"),y={html:"htmlmixed",js:"javascript",json:"application/json",c:"text/x-csrc","c++":"text/x-c++src",java:"text/x-java",csharp:"text/x-csharp","c#":"text/x-csharp",scala:"text/x-scala"},b=function(){var e,n,i={},r={},o=[];for(var s in CodeMirror.modes)CodeMirror.modes.propertyIsEnumerable(s)&&o.push(s);for(e=0;o.length>e;e++)i[o[e]]=o[e];var a=[];for(var s in CodeMirror.mimeModes)CodeMirror.mimeModes.propertyIsEnumerable(s)&&a.push({mime:s,mode:CodeMirror.mimeModes[s]});for(e=0;a.length>e;e++)n=a[e].mime,r[n]=a[e].mime;for(var l in y)(y[l]in i||y[l]in r)&&(i[l]=y[l]);return function(e){return i[e]?CodeMirror.getMode(t,i[e]):null}}();void 0===e.underscoresBreakWords&&(e.underscoresBreakWords=!0),void 0===e.fencedCodeBlocks&&(e.fencedCodeBlocks=!1),void 0===e.taskLists&&(e.taskLists=!1);var w=0,x="header",_="comment",k="atom",C="number",S="variable-2",$="variable-3",T="keyword",M="hr",E="tag",L="link",A="link",I="link",N="string",P="em",D="strong",H=/^([*\-=_])(?:\s*\1){2,}\s*$/,O=/^[*\-+]\s+/,B=/^[0-9]+\.\s+/,j=/^\[(x| )\](?=\s)/,z=/^(?:\={1,}|-{1,})$/,R=/^[^!\[\]*_\\<>` "'(]+/,F=[];return{startState:function(){return{f:o,prevLineHasContent:!1,thisLineHasContent:!1,block:o,htmlState:CodeMirror.startState(v),indentation:0,inline:u,text:c,linkText:!1,linkTitle:!1,em:!1,strong:!1,header:!1,taskList:!1,list:!1,listDepth:0,quote:0,trailingSpace:0,trailingSpaceNewLine:!1}},copyState:function(t){return{f:t.f,prevLineHasContent:t.prevLineHasContent,thisLineHasContent:t.thisLineHasContent,block:t.block,htmlState:CodeMirror.copyState(v,t.htmlState),indentation:t.indentation,localMode:t.localMode,localState:t.localMode?CodeMirror.copyState(t.localMode,t.localState):null,inline:t.inline,text:t.text,linkTitle:t.linkTitle,em:t.em,strong:t.strong,header:t.header,taskList:t.taskList,list:t.list,listDepth:t.listDepth,quote:t.quote,trailingSpace:t.trailingSpace,trailingSpaceNewLine:t.trailingSpaceNewLine,md_inside:t.md_inside}},token:function(t,e){if(t.sol()){if(t.match(/^\s*$/,!0))return e.prevLineHasContent=!1,r(e);e.prevLineHasContent=e.thisLineHasContent,e.thisLineHasContent=!0,e.header=!1,e.taskList=!1,e.code=!1,e.trailingSpace=0,e.trailingSpaceNewLine=!1,e.f=e.block;var n=t.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length,i=4*Math.floor((n-e.indentation)/4);i>4&&(i=4);var o=e.indentation+i;if(e.indentationDiff=o-e.indentation,e.indentation=o,n>0)return null}return e.f(t,e)},blankLine:r,getType:l}},"xml"),CodeMirror.defineMIME("text/x-markdown","markdown"),define("codemirror/modes/markdown",["codemirror/codemirror"],function(){}),define("strut/slide_editor/view/MarkdownEditor",["codemirror/ManagedEditors","codemirror/modes/markdown","./Utils"],function(t,e,n){function i(t){this._opts=t,this.$el=$(s.el),this._resize=this._resize.bind(this)}var r="# Markdown!\n",o={Enter:"newlineAndIndentContinueMarkdownList"},s=t.getEditor("optableeditor",{mode:"markdown",lineNumbers:!0,theme:"default",extraKeys:o});return i.prototype={show:function(t){s.mirror.setOption("mode","markdown"),s.mirror.setOption("extraKeys",o),this._resize(),this._bindResize(),this._opts.$target.append(this.$el),this.setValue(t)},setValue:function(t){t=t||r,s.mirror.setValue(t)},getValue:function(){var t=s.mirror.getValue();return t==r?"":t},hide:function(){s.mirror.setValue(""),this._unbindResize(),this.$el.detach()},_bindResize:function(){$(window).on("resize",this._resize)},_resize:function(){var t=n.computeSlideDimensions(this._opts.$target);s.mirror.setSize(t.scaledWidth,this._opts.$target.height()-20),this.$el.css({"margin-left":t.remainingWidth/2,"margin-right":t.remainingWidth/2})},_unbindResize:function(){$(window).off("resize",this._resize)}},i}),define("strut/slide_editor/view/SlideEditorView",["libs/backbone","./SlideWell","./OperatingTable","./MarkdownEditor"],function(t,e,n,i){"use stict";return t.View.extend({className:"slideEditor",initialize:function(){this._well=new e(this.model._editorModel),this._opTable=new n(this.model._editorModel,this.model),this._markdownEditor=new i({$target:this._opTable.$el}),this._prevSlide=this.model.activeSlide(),this.model.on("change:mode",this._modeChanged,this),this.model.deck().on("change:activeSlide",this._activeSlideChanged,this),this.model.on("saveEdits",this._saveCurrentEdits,this),$(document.body).css("overflow","hidden")},remove:function(){t.View.prototype.remove.call(this),this.model.dispose(),this._opTable.dispose(),this.model.deck().off(null,null,this)},render:function(){return this.$el.html(),this.$el.append(this._well.render().$el),this.$el.append(this._opTable.render().$el),this},_activeSlideChanged:function(t,e){this._saveCurrentEdits(),this._prevSlide=e,this._markdownEditor.setValue(e&&e.get("markdown"))},_modeChanged:function(t,e){if("markdown"==e)this._markdownEditor.show(this.model.activeSlide().get("markdown"));else{if("preview"!=e)throw"Illegal mode";this.model.activeSlide().set("markdown",this._markdownEditor.getValue()),this._markdownEditor.hide()}},_saveCurrentEdits:function(){this._prevSlide&&this.model.isMarkdownMode()&&this._prevSlide.set("markdown",this._markdownEditor.getValue())},constructor:function(){t.View.prototype.constructor.apply(this,arguments)}})}),define("tantaman/web/widgets/ModeButton",[],function(){function t(t,e,n){this.$el=$(n()),this.modeId=e,this.clicked=this.clicked.bind(this),this.modeChanged=this.modeChanged.bind(this),this.$el.click(this.clicked),this.el=this.$el[0],this.editorModel=t,t.on("change:activeMode",this.modeChanged,this)}return t.prototype.render=function(){return this},t.prototype.clicked=function(){this.editorModel.changeActiveMode(this.modeId)},t.prototype.modeChanged=function(t){t.get("modeId")==this.modeId?this.$el.addClass("dispNone"):this.$el.removeClass("dispNone")},t}),define("strut/slide_editor/main",["strut/slide_editor/model/SlideEditorModel","strut/slide_editor/view/SlideEditorView","tantaman/web/widgets/ModeButton"],function(t,e,n){var i={getMode:function(n,i){var r=new t({editorModel:n});return{view:new e({model:r,registry:i}),model:r,id:"slide-editor",close:function(){this.view.remove()}}},createButton:function(t){return new n(t,"slide-editor",JST["strut.slide_editor/Button"])}};return{initialize:function(t){t.register({interfaces:"strut.EditMode",meta:{id:"slide-editor"}},i)}}}),define("strut/transition_editor/model/TransitionEditorModel",["libs/backbone"],function(t){return t.Model.extend({deck:function(){return this.editorModel.deck()},constructor:function(e,n){this.editorModel=e,this.registry=n,t.Model.prototype.constructor.call(this)}})}),define("tantaman/web/widgets/DeltaDragControl",[],function(){var t,e;return e=["mousedown","mousemove","mouseup"],t=function(){function t(t,e){this.$el=t,this.stopProp=e,this.dragging=!1,this._mousemove=this.mousemove.bind(this),this._mouseup=this.mouseup.bind(this),this._mouseout=this._mouseup,$(document).bind("mousemove",this._mousemove),$(document).bind("mouseup",this._mouseup),this.$el.bind("mousedown",this.mousedown.bind(this)),this.$el.bind("mouseup",this._mouseup)}return t.prototype.dispose=function(){return $(document).unbind("mousemove",this._mousemove),$(document).unbind("mouseup",this._mouseup)},t.prototype.mousedown=function(t){return t.preventDefault(),this.dragging=!0,this._startPos={x:t.pageX,y:t.pageY},this.$el.trigger("deltadragStart",{x:t.pageX,y:t.pageY}),this.stopProp?t.stopPropagation():void 0},t.prototype.mousemove=function(t){var e,n;return this.dragging&&(e=t.pageX-this._startPos.x,n=t.pageY-this._startPos.y,this.$el.trigger("deltadrag",[{dx:e,dy:n,x:t.pageX,y:t.pageY}]),this.stopProp)?t.stopPropagation():void 0},t.prototype.mouseup=function(){return this.dragging&&(this.dragging=!1,this.$el.trigger("deltadragStop")),!0},t}()}),define("strut/slide_components/view/ComponentView",["libs/backbone","tantaman/web/widgets/DeltaDragControl","common/Math2","css!styles/slide_components/ComponentView.css","strut/editor/GlobalEvents","strut/deck/ComponentCommands","tantaman/web/undo_support/CmdListFactory"],function(t,e,n,i,r,o,s){var a=s.managedInstance("editor");return t.View.extend({transforms:["skewX","skewY"],className:"component",events:function(){return{mousedown:"mousedown",click:"clicked","click .removeBtn":"removeClicked","change input[data-option='x']":"manualMoveX","change input[data-option='y']":"manualMoveY","deltadragStart span[data-delta='skewX']":"skewXStart","deltadrag span[data-delta='skewX']":"skewX","deltadragStop span[data-delta='skewX']":"skewXStop","deltadragStart span[data-delta='skewY']":"skewYStart","deltadrag span[data-delta='skewY']":"skewY","deltadragStop span[data-delta='skewY']":"skewYStop","deltadragStart span[data-delta='rotate']":"rotateStart","deltadrag span[data-delta='rotate']":"rotate","deltadragStop span[data-delta='rotate']":"rotateStop","deltadragStart span[data-delta='scale']":"scaleStart","deltadrag span[data-delta='scale']":"scale","deltadragStop span[data-delta='scale']":"scaleStop",destroyed:"remove","click .align":"center"}},initialize:function(){this._dragging=!1,this.allowDragging=!0,this.model.on("change:selected",this._selectionChanged,this),this.model.on("change:color",this._colorChanged,this),this.model.on("unrender",this._unrender,this),this._mouseup=this.mouseup.bind(this),this._mousemove=this.mousemove.bind(this),$(document).bind("mouseup",this._mouseup),$(document).bind("mousemove",this._mousemove),this._deltaDrags=[],this.model.on("rerender",this._setUpdatedTransform,this),this.model.on("change:x",this._xChanged,this),this.model.on("change:y",this._yChanged,this),this.model.on("change:skewX",this._setUpdatedTransform,this),this.model.on("change:skewY",this._setUpdatedTransform,this),this.model.on("change:rotate",this._setUpdatedTransform,this),this.model.on("change:scale",this._setUpdatedTransform,this),this.model.on("change:customClasses",this._updateCustomClasses,this),this.model.on("dragStart",this.dragStart,this),this.model.on("drag",this.drag,this),this.model.on("dragStop",this.dragStop,this),this.$el.css("z-index",zTracker.next()),this._lastDeltas={dx:0,dy:0}},_colorChanged:function(t,e){this.$el.css("color","#"+e)},clicked:function(t){return this.$el.css("z-index",zTracker.next()),this.$el.trigger("focused"),t.stopPropagation(),!1},removeClicked:function(t){t.stopPropagation(),this.model.slide&&this.model.slide.remove([this.model])},remove:function(e){var n,i,r,o;t.View.prototype.remove.call(this),o=this._deltaDrags;for(r in o)i=o[r],i.dispose();e&&this.model.dispose(),this.model.off(null,null,this),n=$(document),n.unbind("mouseup",this._mouseup),n.unbind("mousemove",this._mousemove)},mousedown:function(t){1===t.which&&(t.preventDefault(),this.select(),this.$el.css("zIndex",zTracker.next()),this.model.slide?this.model.slide.selected.forEach(function(e){e.trigger("dragStart",t)}):this.dragStart(t))},select:function(){(r.pressed.ctrl||r.pressed.meta||r.pressed.shift)&&this.model.get("selected")?this.model.set("selected",!1):this.model.set("selected",!0)},_selectionChanged:function(t,e){e?this.$el.addClass("selected"):this.$el.removeClass("selected")},mousemove:function(t){this.model.slide?this.model.slide.selected.forEach(function(e){e.trigger("drag",t)}):this.drag(t)},mouseup:function(t){var e=[];this.model.slide?(this.model.slide.selected.forEach(function(n){n._lastMoveCommand=null,n.trigger("dragStop",t),n._lastMoveCommand&&e.push(n._lastMoveCommand)}),e.length&&a.push(new o.CombinedCommand(e,"Move"))):(this.model._lastMoveCommand=null,this.dragStop(t),this.model._lastMoveCommand&&a.push(this.model._lastMoveCommand))},dragStart:function(t){this.dragScale=this.$el.parent().css(window.browserPrefix+"transform"),this.dragScale=parseFloat(this.dragScale.substring(7,this.dragScale.indexOf(",")))||1,this._dragging=!0,this.$el.addClass("dragged"),this._prevPos={x:this.model.get("x"),y:this.model.get("y")},this._prevMousePos={x:t.pageX,y:t.pageY}},drag:function(t){var e,n,i,o,s,a;this._dragging&&this.allowDragging&&(a=r.pressed.shift,e=t.pageX-this._prevMousePos.x,n=t.pageY-this._prevMousePos.y,o=this._prevPos.x+e/this.dragScale,s=this._prevPos.y+n/this.dragScale,a&&(i=20,o=Math.floor(o/i)*i,s=Math.floor(s/i)*i),this.model.setInt("x",o),this.model.setInt("y",s),this.dragStartLoc||(this.dragStartLoc={x:o,y:s}))},dragStop:function(){this._dragging&&(this._dragging=!1,this.$el.removeClass("dragged"),null!=this.dragStartLoc&&this.dragStartLoc.x!==this.model.get("x")&&this.dragStartLoc.y!==this.model.get("y")&&(this.model._lastMoveCommand=new o.Move(this.dragStartLoc,this.model)),this.dragStartLoc=null)},_xChanged:function(t,e){this.$el.css("left",e),this.$xInput.val(e)},_yChanged:function(t,e){this.$el.css("top",e),this.$yInput.val(e)},manualMoveX:function(t){return this.model.setInt("x",t.target.value)},manualMoveY:function(t){return this.model.setInt("y",t.target.value)},center:function(t){var e=t.target.getAttribute("data-option");getAxis=function(t,e){return"x"==t?e.width():e.height()};var n=getAxis(e,$(".slideContainer")),i=getAxis(e,$(".selected")),r={x:this.model.get("x"),y:this.model.get("y")};this.model.setInt(e,n/2-i/2);var s=new o.Move(r,this.model);a.push(s)},skewXStart:function(){return this._initialSkewX=this.model.get("skewX")||0},skewX:function(t,e){this.model.setFloat("skewX",this._initialSkewX+Math.atan2(e.dx,22))},skewXStop:function(){var t=new o.SkewX(this._initialSkewX,this.model);a.push(t)},skewYStart:function(){return this._initialSkewY=this.model.get("skewY")||0},skewY:function(t,e){this.model.setFloat("skewY",this._initialSkewY+Math.atan2(e.dy,22))},skewYStop:function(){var t=new o.SkewY(this._initialSkewY,this.model);a.push(t)},rotateStart:function(t,e){this.updateOrigin(),this._rotOffset=this._calcRot(e),this._initialRotate=this.model.get("rotate")||0},updateOrigin:function(){var t;t=this.$el.offset(),this._origin={x:this.$el.width()/2+t.left,y:this.$el.height()/2+t.top}},_calcRot:function(t){return Math.atan2(t.y-this._origin.y,t.x-this._origin.x)},rotate:function(t,e){var n,i;i=this._calcRot(e),n=this._initialRotate+i-this._rotOffset,r.pressed.shift&&(n=Math.floor(8*(n/Math.PI))/8*Math.PI),n%=2*Math.PI,this.model.setFloat("rotate",n)},rotateStop:function(){var t=new o.Rotate(this._initialRotate,this.model);a.push(t)},scaleStart:function(){var t,e,n,i;this.dragScale=this.$el.parent().css(window.browserPrefix+"transform"),this.dragScale=parseFloat(this.dragScale.substring(7,this.dragScale.indexOf(",")))||1,this._initialScale=this.model.get("scale"),e=this.$el.offset(),n=this.$el.width()*this._initialScale.x,t=this.$el.height()*this._initialScale.y,i=this.model.get("rotate")||0,null==this.origSize&&(this.origSize={width:this.$el.width(),height:this.$el.height()}),this._scaleDim={width:this._initialScale.x*this.origSize.width,height:this._initialScale.y*this.origSize.height,theta:i}},scale:function(t,e){var n,i;n=r.pressed.shift;var o=1,s=1,a=(o*e.dx+this._scaleDim.width)/this._scaleDim.width,l=(s*e.dy+this._scaleDim.height)/this._scaleDim.height;i={x:this._initialScale.x*a,y:this._initialScale.y*(n?l:a)},i.width=i.x*this.origSize.width,i.height=i.y*this.origSize.height,this.model.set("scale",i)},scaleStop:function(){var t=new o.Scale(this._initialScale,this.model);a.push(t)},render:function(){var t,n=this;return this.$el.html(this.__getTemplate()(this.model.attributes)),this.$el.find("span[data-delta]").each(function(t,i){var r;return r=new e($(i),!0),n._deltaDrags.push(r)}),this.$content=this.$el.find(".content"),this.$content.addClass(this.model.customClasses()),this.$contentScale=this.$el.find(".content-scale"),this._selectionChanged(this.model,this.model.get("selected")),this.$xInput=this.$el.find("[data-option='x']"),this.$yInput=this.$el.find("[data-option='y']"),this.$el.css({top:this.model.get("y"),left:this.model.get("x")}),t={width:this.$el.width(),height:this.$el.height()},t.width>0&&t.height>0&&(this.origSize=t),this._setUpdatedTransform(),this.$el},_setUpdatedTransform:function(){var t,e,n,i,r;r=this._buildTransformString(),n={transform:r},n[window.browserPrefix+"transform"]=r,this.$content.css(n),i=this.model.get("scale"),null!=this.origSize&&(e=i.width||this.origSize.width,t=i.height||this.origSize.height,this.$el.css({width:e,height:t})),null!=i&&this.$contentScale.css(window.browserPrefix+"transform","scale("+i.x+","+i.y+")"),this.$el.css(window.browserPrefix+"transform","rotate("+this.model.get("rotate")+"rad)")},_buildTransformString:function(){var t="";return this.transforms.forEach(function(e){var n;return n=this.model.get(e),n?t+=e+"("+n+"rad) ":void 0},this),t},_updateCustomClasses:function(t,e){this.$content.attr("class","content "+e)},__getTemplate:function(){return JST["strut.slide_components/Component"]},_unrender:function(){return this.remove(!1)},constructor:function(){t.View.prototype.constructor.apply(this,arguments)}})}),define("strut/slide_components/view/ThreeDRotatableComponentView",["./ComponentView","common/Math2"],function(t,e){var n=2*Math.PI;return t.extend({transforms:["rotateX","rotateY","rotateZ","scale"],events:function(){return{mousedown:"mousedown","mousedown .form-inline":"stopProp",click:"clicked","deltadragStart span[data-delta='rotateX']":"rotateXStart","deltadrag span[data-delta='rotateX']":"rotateX","deltadragStart span[data-delta='rotateZ']":"rotateZStart","deltadrag span[data-delta='rotateY']":"rotateY","deltadragStart span[data-delta='rotateY']":"rotateYStart","deltadrag span[data-delta='rotateZ']":"rotateZ","change input[data-option='z']":"manualMoveZ","change input[data-option='scale']":"manualMoveScale","change input[data-option='rotateX']":"manualRotX","change input[data-option='rotateY']":"manualRotY","change input[data-option='rotateZ']":"manualRotZ",destroyed:"remove"}},initialize:function(){return t.prototype.initialize.apply(this,arguments),this.model.on("change:rotateX",this._rotXChanged,this),this.model.on("change:rotateY",this._rotYChanged,this),this.model.on("change:rotateZ",this._rotZChanged,this)},stopProp:function(t){t.stopPropagation()},dispose:function(){this.model.off(null,null,this)},manualMoveScale:function(t){return this.model.setFloat("impScale",t.target.value)},manualMoveZ:function(t){return this.model.setInt("z",t.target.value)},manualRotX:function(t){return this.model.setFloat("rotateX",e.toRads(t.target.value))},manualRotY:function(t){return this.model.setFloat("rotateY",e.toRads(t.target.value))},manualRotZ:function(t){return this.model.setFloat("rotateZ",e.toRads(t.target.value))},rotateXStart:function(t,e){return this.updateOrigin(),this._rotXOffset=this._calcRot(e),this._initialRotX=this.model.get("rotateX")||0},rotateX:function(t,e){var i;return i=.02*e.dy%n,this.model.setFloat("rotateX",this._initialRotX+i)},_rotXChanged:function(t,n){return this.$rotXInput.val(e.round(e.toDeg(n),2)),this._setUpdatedTransform()},rotateYStart:function(t,e){return this.updateOrigin(),this._rotYOffset=this._calcRot(e),this._initialRotY=this.model.get("rotateY")||0
},rotateY:function(t,e){var i;return i=.02*e.dx%n,this.model.setFloat("rotateY",this._initialRotY+i)},_rotYChanged:function(t,n){return this.$rotYInput.val(e.round(e.toDeg(n),2)),this._setUpdatedTransform()},rotateZStart:function(t,e){return this.updateOrigin(),this._rotZOffset=this._calcRot(e),this._initialRotZ=this.model.get("rotateZ")||0},rotateZ:function(t,e){var n;return n=this._calcRot(e),this.model.setFloat("rotateZ",this._initialRotZ+n-this._rotZOffset)},_rotZChanged:function(t,n){return this.$rotZInput.val(e.round(e.toDeg(n),2)),this._setUpdatedTransform()},render:function(){return t.prototype.render.apply(this,arguments),this.$rotXInput=this.$el.find("[data-option='rotateX']"),this.$rotYInput=this.$el.find("[data-option='rotateY']"),this.$rotZInput=this.$el.find("[data-option='rotateZ']"),this},__getTemplate:function(){return null},constructor:function(){t.prototype.constructor.apply(this,arguments)}})}),define("strut/slide_snapshot/TransitionSlideSnapshot",["strut/slide_components/view/ThreeDRotatableComponentView","./SlideDrawer","css!styles/transition_editor/TransitionSlideSnapshot.css","strut/deck/Utils"],function(t,e,n,i){var r=window.config.slide.overviewSize;return t.extend({className:"component transitionSlideSnapshot",events:function(){var e;return e=t.prototype.events(),_.extend(e,{click:"clicked"})},initialize:function(){t.prototype.initialize.apply(this,arguments),this.model.on("change:impScale",this._impScaleChanged,this),this.options.deck.on("change:background",this._backgroundChanged,this)},remove:function(){this.dispose(),t.prototype.remove.call(this,!1),this.model.set("selected",!1)},dispose:function(){null!=this.slideDrawer&&this.slideDrawer.dispose(),t.prototype.dispose.call(this),this.model.off(null,null,this),this.options.deck.off(null,null,this)},clicked:function(){t.prototype.clicked.apply(this,arguments),this.model.set("active",!0),this.$el.css("z-index",zTracker.next())},_impScaleChanged:function(){var t=0|this.model.get("impScale"),e=this.$el.find(".content"),n=r.width*t,i=r.height*t,o={width:n,height:i};e.css(o),this.slideDrawer.setSize(o)},_backgroundChanged:function(t,e){e=i.slideBackground(this.model,this.options.deck,!0),this._$content.removeClass(),this._$content.addClass("content "+e)},render:function(){t.prototype.render.apply(this,arguments),null!=this.slideDrawer&&this.slideDrawer.dispose(),this.$el.css({left:this.model.get("x"),top:this.model.get("y")});var n=i.slideBackground(this.model,this.options.deck,!0);this._$content=this.$el.find(".content"),this._$content.addClass(n);var r=this.$el.find(".slideDrawer");return this.slideDrawer=new e(this.model,r),this._impScaleChanged(),this.slideDrawer.render(),this},__getTemplate:function(){return JST["strut.slide_snapshot/TransitionSlideSnapshot"]},constructor:function(){t.prototype.constructor.apply(this,arguments)}})}),define("strut/transition_editor/view/TransitionEditorView",["libs/backbone","strut/slide_snapshot/TransitionSlideSnapshot","css!styles/transition_editor/slideTable.css"],function(t,e){"use strict";return t.View.extend({className:"slideTable",initialize:function(){this._snapshots=[],this.model.deck().on("change:surface",this._surfaceChanged,this),$(document.body).css("overflow","")},_surfaceChanged:function(t,e){this.$el.removeClass(),this.$el.addClass("slideTable "+e)},render:function(){this.$el.html("");var t=this.model.deck();this.$el.addClass(t.get("surface")||"defaultbg");var n=6,i=0;return t.get("slides").forEach(function(r){var o=r.get("x");null==o&&(r.set("x",280*i+30),r.set("y",280*(0|i/n)+80)),++i;var s=new e({model:r,registry:this.model.registry,deck:t});this._snapshots.push(s),this.$el.append(s.render().$el)},this),this},remove:function(){t.View.prototype.remove.call(this),this.dispose()},dispose:function(){this.model.deck().off(null,null,this)},constructor:function(){t.View.prototype.constructor.apply(this,arguments)}})}),define("strut/transition_editor/main",["tantaman/web/widgets/ModeButton","strut/transition_editor/model/TransitionEditorModel","strut/transition_editor/view/TransitionEditorView"],function(t,e,n){var i={getMode:function(t,i){var r=new e(t,i);return{view:new n({model:r}),model:r,id:"transition-editor",close:function(){this.view.remove()}}},createButton:function(e){return new t(e,"transition-editor",JST["strut.transition_editor/Button"])}};return{initialize:function(t){t.register({interfaces:"strut.EditMode",meta:{id:"transition-editor"}},i)}}}),define("strut/slide_components/view/ComponentButton",["libs/backbone"],function(t){"use strict";return t.View.extend({className:"btn btn-plast",tagName:"a",events:{click:"_clicked"},initialize:function(){this.$el.attr("data-compType",this.options.componentType)},_clicked:function(){this.options.editorModel.addComponent(this.options.componentType)},render:function(){return this.$el.html('<i class="'+this.options.icon+' icon-white"></i>'+this.options.name),this},constructor:function(){t.View.prototype.constructor.apply(this,arguments)}})}),define("libs/imgup",[],function(){var t={};return function(t){"use strict";function e(t){this._xhr=t,t.onload=r.onload.bind(this),t.upload.onabort=t.onabort=t.upload.onerror=t.onerror=t.ontimeout=r.onerror.bind(this),t.upload.onprogress=r.onprogress.bind(this),this._progressBacks=[],this._errorBacks=[],this._thenBacks=[]}function n(t){this.clientId=t}var i={upload:"https://api.imgur.com/3/upload"},r={onload:function(){var t=JSON.parse(this._xhr.responseText);t.success?this._thenBacks.forEach(function(e){e(t)}):r.onerror.call(this,t)},onprogress:function(t){var e=t.loaded/t.total;this._progressBacks.forEach(function(n){n(e,t)})},onerror:function(t){this._errorBacks.forEach(function(e){e(t)})}};e.prototype={cancel:function(){return this._xhr.abort(),this},then:function(t,e){return null!=t&&this._thenBacks.push(t),null!=e&&this._errorBacks.push(e),this},error:function(t){return this._errorBacks.push(t),this},progress:function(t){return this._progressBacks.push(t),this}},n.prototype={upload:function(t){var n=new FormData;n.append("image",t);var r=new XMLHttpRequest;r.open("POST",i.upload),r.setRequestHeader("Authorization","Client-ID "+this.clientId);var o=new e(r);return r.send(n),o}},t.Imgup=n}(t),t.Imgup}),define("tantaman/web/widgets/ItemImportModal",["libs/backbone","libs/imgup"],function(t,e){var n={},i=/[a-z]+:/,r=new e("847de02274cba30"),o={"http:":!0,"http://":!0,"file:":!0,"/":!0,"https://":!0,"https:":!0},s=t.View.extend({className:"itemGrabber modal hide",events:{"click .ok":"okClicked","click div[data-option='browse']":"browseClicked","change input[type='file']":"fileChosen","keyup input[name='itemUrl']":"urlChanged","paste input[name='itemUrl']":"urlChanged",hidden:"hidden"},initialize:function(){this.loadItem=_.debounce(this.loadItem.bind(this),200)},show:function(t){return this.cb=t,this.$el.modal("show")},okClicked:function(){return this.$el.find(".ok").hasClass("disabled")?void 0:(this.cb(this.src),this.$el.modal("hide"))},fileChosen:function(t){var e,n=this;e=t.target.files[0],e.type.match("image.*")&&(this._switchToProgress(),this.item.src="",r.upload(e).progress(function(t){n._updateProgress(t)}).then(function(t){n._switchToThumbnail(),n.$input.val(t.data.link),n.urlChanged({which:-1})},function(){n._updateProgress(0),n._switchToThumbnail(),n.$input.val("Failed to upload image to imgur")}))},browseClicked:function(){return this.$el.find('input[type="file"]').click()},hidden:function(){return null!=this.$input?(this.item.src="",this.$input.val("")):void 0},urlChanged:function(t){return 13===t.which?(this.src=this.$input.val(),this.okClicked()):(this.loadItem(),void 0)},loadItem:function(){var t=this.$input.val();if(!(t in o)){var e=i.exec(t);return(null==e||0!=e.index)&&(t="http://"+t),this.item.src=t,this.src=this.item.src}},_itemLoadError:function(){return this.$el.find(".ok").addClass("disabled"),this.$el.find(".alert").removeClass("dispNone")},_itemLoaded:function(){return this.$el.find(".ok").removeClass("disabled"),this.$el.find(".alert").addClass("dispNone")},_updateProgress:function(t){this.$progressBar.css("width",100*t+"%")},_switchToProgress:function(){this.$thumbnail.addClass("dispNone"),this.$progress.removeClass("dispNone")},_switchToThumbnail:function(){this.$progress.addClass("dispNone"),this.$thumbnail.removeClass("dispNone")},render:function(){var t=this;return this.$el.html(JST["tantaman.web.widgets/ItemImportModal"](this.options)),this.$el.modal(),this.$el.modal("hide"),this.item=this.$el.find(this.options.tag)[0],"video"===this.options.tag&&this.$el.find(".modal-body").prepend("<div class='alert alert-success'>Supports <strong>webm & YouTube</strong>.<br/>Try out: http://www.youtube.com/watch?v=vHUsdkmr-SM</div>"),this.options.ignoreErrors||(this.item.onerror=function(){return t._itemLoadError()},this.item.onload=function(){return t._itemLoaded()}),this.$input=this.$el.find("input[name='itemUrl']"),this.$progress=this.$el.find(".progress"),this.$progressBar=this.$progress.find(".bar"),this.$thumbnail=this.$el.find(".thumbnail"),this.$el},constructor:function(){t.View.prototype.constructor.apply(this,arguments)}});return{get:function(t){var e=n[t.tag];return e||(e=new s(t),e.$el.bind("destroyed",function(){delete n[t.tag]}),n[t.tag]=e,e.render(),$("#modals").append(e.$el)),e},ctor:s}}),define("strut/slide_components/view/ImportingComponentButton",["./ComponentButton","tantaman/web/widgets/ItemImportModal"],function(t,e){"use strict";return t.extend({initialize:function(){t.prototype.initialize.apply(this,arguments),this._modal=e.get(this.options),this._itemImported=this._itemImported.bind(this)},_clicked:function(){this._modal.show(this._itemImported)},_itemImported:function(t){this.options.editorModel.addComponent({src:t,type:this.options.componentType})},constructor:function(){t.prototype.constructor.apply(this,arguments)}})}),define("strut/slide_components/model/Image",["strut/deck/Component","common/FileUtils"],function(t,e){"use strict";return t.extend({initialize:function(){t.prototype.initialize.apply(this,arguments),this.set("type","Image");var n=this.get("src");this.set("imageType",e.imageType(n)),this.on("change:src",this._updateCache,this),this._cachedImage=new Image,this._updateCache()},_updateCache:function(){this._cachedImage.src=this.get("src")},toBase64:function(){},constructor:function(){t.prototype.constructor.apply(this,arguments)}})}),define("strut/slide_components/model/TextBox",["strut/deck/Component"],function(t){"use strict";return t.extend({initialize:function(){t.prototype.initialize.apply(this,arguments),this.set("type","TextBox"),this.get("text")||(this.set("text","Text"),this.set("size",72))},constructor:function(){t.prototype.constructor.apply(this,arguments)}})}),define("strut/slide_components/model/WebFrame",["strut/deck/Component","common/FileUtils"],function(t){"use strict";return t.extend({initialize:function(){t.prototype.initialize.apply(this,arguments),this.set("type","WebFrame")},constructor:function(){t.prototype.constructor.apply(this,arguments)}})}),define("strut/slide_components/model/Video",["strut/deck/Component","common/FileUtils"],function(t,e){"use strict";var n=[{type:"youtube",reg:/youtube\.com\/.*v=(.*?)(&|$)/,srcType:function(){return"yt"}},{type:"html5",reg:/(.*)/,srcType:function(t){return e.type(e.extension(t))}}];return t.extend({initialize:function(){var e,i,r,o;for(t.prototype.initialize.apply(this,arguments),this.set("type","Video"),r=0,o=n.length;o>r;r++)if(e=n[r],i=e.reg.exec(this.get("src")),null!=i){this.set("shortSrc",i[1]),this.set("videoType",e.type),this.set("srcType",e.srcType(i[1]));break}return this},constructor:function(){t.prototype.constructor.apply(this,arguments)}})}),define("strut/slide_components/view/Mixers",[],function(){var t;return t={scaleByResize:function(t,e){var n,i,r;return i=this.$el.offset(),r=(e.x-i.left)/this.dragScale,n=(e.y-i.top)/this.dragScale,this.model.set("scale",{width:r,height:n})},scaleChangeByResize:function(t,e){if(this.origSize){var n=e.width/this.origSize.width;e.height=this.origSize.height*n}this.$el.css(e)},scaleObjectEmbed:function(t,e){var n,i,r,o;return i=this.$el.offset(),o=(e.x-i.left)/this.dragScale,n=(e.y-i.top)/this.dragScale,r={width:o,height:n},this.model.set("scale",r)},scaleChangeObjectEmbed:function(t,e){this.$object.attr(e),this.$embed.attr(e),this.$el.css(e)}}}),define("strut/slide_components/view/ImageView",["./ComponentView","./Mixers"],function(t,e){return t.extend({className:"component imageView",tagName:"div",initialize:function(){t.prototype.initialize.apply(this,arguments),"SVG"===this.model.get("imageType")&&(this.scale=e.scaleByResize,this.model.off("change:scale",this._setUpdatedTransform,this),this.model.on("change:scale",e.scaleChangeByResize,this))},render:function(){var e,n=this;return t.prototype.render.call(this),e=$("<img src="+this.model.get("src")+"></img>"),e.load(function(){return n._finishRender($(this))}),e.error(function(){return n.remove()}),this.$el},_finishRender:function(t){var e,n,i,r,o;return i=t[0].naturalWidth,n=t[0].naturalHeight,"SVG"===this.model.get("imageType")?(t.css({width:"100%",height:"100%"}),r=this.model.get("scale"),r&&r.width?this.$el.css({width:r.width,height:r.height}):(o=Math.max(i,50),e=Math.max(n,50),this.model.set("scale",{width:o,height:e}))):(this.origSize={width:i,height:n},t[0].width=i,t[0].height=n,this._setUpdatedTransform()),t.bind("dragstart",function(t){return t.preventDefault(),!1}),this.$content.append(t),"SVG"===this.model.get("imageType")?(t.parent().addClass("svg"),t.parent().parent().addClass("svg")):void 0}})}),define("strut/slide_components/view/TextBoxView",["./ComponentView","libs/etch","strut/deck/ComponentCommands","tantaman/web/undo_support/CmdListFactory"],function(t,e,n,i){"use strict";var r,o=i.managedInstance("editor");return r=["family","size","weight","style","color","decoration","align"],t.extend({className:"component textBox",tagName:"div",events:function(){var e,n;return n=t.prototype.events(),e={dblclick:"dblclicked",editComplete:"editCompleted",mousedown:"mousedown",mouseup:"mouseup"},_.extend(n,e)},initialize:function(){var e,n,i;for(t.prototype.initialize.apply(this,arguments),n=0,i=r.length;i>n;n++)e=r[n],this.model.on("change:"+e,this._styleChanged,this);this.model.on("change:text",this._textChanged,this),this._lastDx=0,this.keydown=this.keydown.bind(this),this.model.on("edit",this.edit,this)},scaleStart:function(){this._initialSize=this.model.get("size")},scale:function(t,e){var n,i;return n=this.model.get("size"),i=e.dx-this._lastDx>0?1:-1,this.model.set("size",n+Math.round(i*Math.sqrt(Math.abs(e.dx-this._lastDx)))),this._lastDx=e.dx},scaleStop:function(){var t=n.TextScale(this._initialSize,this.model);o.push(t)},remove:function(){t.prototype.remove.apply(this,arguments)},dblclicked:function(t){this.$el.addClass("editable"),this.$el.find(".content").attr("contenteditable",!0),null!=t&&(this._initialText=this.$textEl.html(),e.editableInit.call(this,t,this.model.get("y")*this.dragScale+35),this.editing||(this.$el.find(".content").get(0).focus(),document.execCommand("selectAll",!1,null))),this.allowDragging=!1,this.editing=!0},mousedown:function(n){return this.editing?(n.stopPropagation(),e.editableInit.call(this,n,this.model.get("y")*this.dragScale+35)):t.prototype.mousedown.apply(this,arguments),!0},mouseup:function(){this.editing&&e.triggerCaret(),t.prototype.mouseup.apply(this,arguments)},keydown:function(t){this.model.get("selected")&&!this.editing&&(t.ctrlKey||t.altKey||t.metaKey||!String.fromCharCode(t.which).match(/[\w]/)||this.edit())},edit:function(){var t;this.model.set("selected",!0),t=$.Event("click",{pageX:this.model.get("x")}),this.dblclicked(t),this.$el.find(".content").selectText()},editCompleted:function(){var t;if(t=this.$textEl.html(),this.editing=!1,""===t)return this.remove();var e=n.Text(this._initialText,this.model);o.push(e),this.model.set("text",t),window.getSelection().removeAllRanges(),this.$el.find(".content").attr("contenteditable",!1),this.$el.removeClass("editable"),this.allowDragging=!0},_selectionChanged:function(e,n){t.prototype._selectionChanged.apply(this,arguments),!n&&this.editing&&this.editCompleted()},_styleChanged:function(t,e,n){var i,r,o;if(o=n.changes)for(var s=0;o.length>s;++s)i=o[s],r=t.get(i),r&&("decoration"===i||"align"===i?i="text"+i.substring(0,1).toUpperCase()+i.substr(1):"color"!==i&&(i="font"+i.substr(0,1).toUpperCase()+i.substr(1)),this.$el.css(i,e))},_textChanged:function(t,e){this.$textEl.html(e)},render:function(){return t.prototype.render.call(this),this.$textEl=this.$el.find(".content"),this.$textEl.html(this.model.get("text")),this.$el.css({fontFamily:this.model.get("family"),fontSize:this.model.get("size"),fontWeight:this.model.get("weight"),fontStyle:this.model.get("style"),color:"#"+this.model.get("color"),top:this.model.get("y"),left:this.model.get("x"),textDecoration:this.model.get("decoration"),textAlign:this.model.get("align")}),this.$el},constructor:function(){t.prototype.constructor.apply(this,arguments)}})}),define("strut/slide_components/view/WebFrameView",["./ComponentView"],function(t){return t.extend({className:"component webFrameView",initialize:function(){return t.prototype.initialize.apply(this,arguments)},render:function(){var e,n;return t.prototype.render.call(this),e=$("<iframe width='960' height='768' src="+this.model.get("src")+"></iframe>"),this.$el.find(".content").append(e),this.$el.append('<div class="overlay"></div>'),n=this.model.get("scale"),this.$el.css({width:960*n.x,height:768*n.y}),this.$el}})}),define("strut/slide_components/view/VideoView",["./ComponentView","./Mixers"],function(t,e){var n,i,r;return n=t.extend({className:"component videoView",initialize:function(){return t.prototype.initialize.apply(this,arguments)},render:function(){var e,n=this;return t.prototype.render.call(this),e=$("<video controls></video>"),e.append("<source preload='metadata' src='"+this.model.get("src")+"' type='"+this.model.get("srcType")+"' />"),e.bind("loadedmetadata",function(){n._finishRender($(this))}),this.$el.find(".content").append(e),this.$el},_finishRender:function(t){this.origSize={width:t[0].videoWidth,height:t[0].videoHeight},this._setUpdatedTransform()}}),i=t.extend({className:"component videoView",initialize:function(){t.prototype.initialize.apply(this,arguments),this.scale=e.scaleObjectEmbed,this.model.off("change:scale",this._setUpdatedTransform,this),this.model.on("change:scale",e.scaleChangeObjectEmbed,this)},render:function(){var e,n;return t.prototype.render.call(this),e='<object width="425" height="344"><param name="movie" value="http://www.youtube.com/v/'+this.model.get("shortSrc")+'&hl=en&fs=1"><param name="allowFullScreen" value="true"><embed src="http://www.youtube.com/v/'+this.model.get("shortSrc")+'&hl=en&fs=1" type="application/x-shockwave-flash" allowfullscreen="true" width="425" height="344"></object>',this.$object=$(e),this.$embed=this.$object.find("embed"),n=this.model.get("scale"),n&&n.width?(this.$object.attr(n),this.$embed.attr(n)):this.model.attributes.scale={width:425,height:344},this.$el.find(".content").append(this.$object),this.$el}}),r={html5:n,youtube:i},function(t){return new(r[t.model.get("videoType")])(t)}}),define("tantaman/web/widgets/Utils",[],function(){return{fitSizeToScale:function(t,e){for(var n=t.length,i=0;n>i;++i){var r=$(t[i]),o=r.outerWidth(),s=r.outerHeight(),a=r.parent();a.width(o*e),a.height(s*e)}}}}),define("strut/slide_components/view/ShapesDropdown",["tantaman/web/widgets/Dropdown","tantaman/web/widgets/Utils"],function(t){function e(e,n,i){t.apply(this,arguments),this._editorModel=i.editorModel}return r(e,t),e.prototype._selected=function(t){this._editorModel.addComponent({src:t.currentTarget.dataset.src,type:"Image"})},e}),define("strut/slide_components/ShapeCollection",[],function(){function t(e,n,i){if(!(this instanceof t))return new t(e,n,i);this.name=e;var r,o=window.location.href,s=o.indexOf("#");-1!=s&&(o=o.substring(0,s)),r=o.lastIndexOf("/"),-1!=r&&(o=o.substring(0,r)),this.src=o+"/preview_export/shapes/"+n,this.aspect=i}function e(){this.title="shapes",this.shapes=[t("square","square.svg",1),t("triangle","triangle.svg",1),t("circle","circle.svg",1),t("hexagon","hexagon.svg",1),t("pentagon","pentagon.svg",1),t("star","star.svg",1),t("pacman","pacman.svg",1),t("heart","heart.svg",1),t("infinity","infinity.svg",1),t("yin yang","yinyang.svg",1),t("glasses","glasses.svg",1)]}return e.prototype={on:function(){}},e}),define("strut/slide_components/main",["./view/ComponentButton","./view/ImportingComponentButton","./model/Image","./model/TextBox","./model/WebFrame","./model/Video","./view/ImageView","./view/TextBoxView","./view/WebFrameView","./view/VideoView","./ComponentFactory","lang","./view/ShapesDropdown","./ShapeCollection"],function(t,e,n,i,r,o,s,a,l,c,u,h,d,p){var f=new p,g={createButtons:function(n){var i=[];return i.push(new t({componentType:"TextBox",icon:"icon-text-width",name:h.text,editorModel:n})),i.push(new e({componentType:"Image",icon:"icon-picture",name:h.image,tag:"img",title:h.insert_image,editorModel:n,browsable:!0})),i.push(new e({componentType:"Video",icon:"icon-film",name:h.video,tag:"video",title:h.insert_video,editorModel:n,ignoreErrors:!0})),i.push(new e({componentType:"WebFrame",icon:"icon-globe",name:h.website,tag:"iframe",title:h.insert_website,editorModel:n})),i.push(new d(f,JST["strut.slide_components/ShapesDropdown"],{"class":"group-dropdown",editorModel:n})),i}};return{initialize:function(t){t.register({interfaces:"strut.ComponentButtonProvider"},g),t.register({interfaces:"strut.ComponentModel",meta:{type:"Image"}},n),t.register({interfaces:"strut.ComponentModel",meta:{type:"TextBox"}},i),t.register({interfaces:"strut.ComponentModel",meta:{type:"WebFrame"}},r),t.register({interfaces:"strut.ComponentModel",meta:{type:"Video"}},o),t.register({interfaces:"strut.ComponentView",meta:{type:"Image"}},s),t.register({interfaces:"strut.ComponentView",meta:{type:"TextBox"}},a),t.register({interfaces:"strut.ComponentView",meta:{type:"WebFrame"}},l),t.register({interfaces:"strut.ComponentView",meta:{type:"Video"}},c),u.initialize(t)}}}),define("strut/well_context_buttons/AddSlideButton",["libs/backbone"],function(t){return t.View.extend({className:"addBtn btn btn-success",events:{click:"_addSlide"},_addSlide:function(){this._editorModel.addSlide(this._wellMenuModel.slideIndex())},render:function(){return this.$el.html('<center><i class="icon-plus icon-white"></i></center>'),this},constructor:function(e,n){this._editorModel=e,this._wellMenuModel=n,t.View.prototype.constructor.call(this)}})}),define("strut/well_context_buttons/main",["./AddSlideButton","lang"],function(t){"use strict";var e={createButtons:function(e,n){var i=[];return i.push(new t(e,n)),i}};return{initialize:function(t){t.register({interfaces:["strut.WellContextButtonProvider"]},e)}}}),define("tantaman/web/local_storage/LocalStorageProvider",[],function(){function t(){this.impl=localStorage,this.name="Local Storage",this.id="localstorage"}var e="strut-",n=!1;return t.prototype={ready:function(){return!0},bg:function(){},ls:function(t,n,i){for(var r=this.impl.length,o=[],s=0;r>s;++s){var a=this.impl.key(s);0!=a.indexOf(e)||null!=n&&null==n.exec(a)||o.push(a.substring(e.length))}return i(o),this},rm:function(t,n){return this.impl.removeItem(e+t),n&&n(!0),this},getContents:function(t,n){var i=this.impl.getItem(e+t);if(null!=i)try{var r=JSON.parse(i);n(r)}catch(o){n(null,o)}return this},setContents:function(t,i,r){try{this.impl.setItem(e+t,JSON.stringify(i))}catch(o){n||(n=!0,alert("Strut currently uses your browser's LocalStorage to save presentations which is limited to between 2.5 and 5mb.\n\nYou are currently over this limit so your presentation will not be saved.  You may continue editing, however.\n\nTry removing any images you dragged in and link to them instead.\n\nWe're working on improving the storage capacity!  5mb should be good if you link to your images (e.g., file://path/to/image or http://url/of/image).\n\nSorry for the inconvenience that this may cause.  We are working to resolve the issue!"))}return r&&r(!0),this}},t}),define("tantaman/web/local_storage/main",["./LocalStorageProvider"],function(t){var e=new t;return{initialize:function(t){t.register({interfaces:"tantaman.web.StorageProvider"},e)}}}),define("strut/logo_button/LogoModel",["libs/backbone","framework/ServiceCollection"],function(t,e){return t.Model.extend({initialize:function(){this.items=new e(this._editorModel.registry,"strut.LogoMenuItemProvider",this._convertServiceEntry.bind(this))},_convertServiceEntry:function(t){return t.service().createMenuItems(this._editorModel)},constructor:function(e){this._editorModel=e,t.Model.prototype.constructor.call(this)}})}),define("strut/logo_button/LogoView",["libs/backbone","./LogoModel","css!styles/logo_button/logo.css"],function(t,e){"use strict";return t.View.extend({className:"logo-group btn-group",initialize:function(){this._template=JST["strut.logo_button/Logo"],this.model=new e(this.options.editorModel),delete this.options.editorModel},render:function(){this.$el.html(this._template());var t=this.$el.find(".dropdown-menu");return this.model.items.forEach(function(e){t.append(e.render().$el)},this),this},constructor:function(){t.View.prototype.constructor.apply(this,arguments)}})}),define("strut/presentation_generator/PreviewLauncher",[],function(){"use strict";function t(t){this._editorModel=t}return t.prototype={launch:function(t){window.previewWind&&window.previewWind.close(),this._editorModel.trigger("launch:preview",null);var e=t.generate(this._editorModel.deck().attributes);localStorage.setItem("preview-string",e),localStorage.setItem("preview-config",JSON.stringify({surface:this._editorModel.deck().get("surface")})),window.previewWind=window.open("preview_export/"+t.id+".html"+t.getSlideHash(this._editorModel),window.location.href)}},t}),define("strut/presentation_generator/view/PreviewButton",["libs/backbone","../PreviewLauncher"],function(t,e){return t.View.extend({className:"btn-group iconBtns",events:{"click .act":"_launch"},initialize:function(){this._editorModel=this.options.editorModel,this._previewLauncher=new e(this._editorModel),this._generators=this._editorModel.registry.getBest("strut.presentation_generator.GeneratorCollection"),delete this.options.editorModel,this._index=window.sessionMeta.generator_index||0,this._template=JST["strut.presentation_generator/Button"]},_launch:function(){this._previewLauncher.launch(this._generators[this._index])},_bind:function(){var t=this;this.$el.find("li").each(function(e){var n=$(this);n.click(function(i){t.$el.find(".check").css("visibility","hidden"),n.find(".check").css("visibility",""),t._index=e,window.sessionMeta.generator_index=e,i.stopPropagation()})})},render:function(){return this.$el.html(this._template({generators:this._generators})),this._bind(),$(this.$el.find(".check")[this._index]).css("visibility",""),this}})}),define("strut/header/model/ThemeProviderCollection",["libs/backbone","framework/ServiceCollection"],function(t,e){function n(t){this._editorModel=t,this._activeProviders=[],this._editorModel.on("change:modeId",this._modeChanged,this),this._themeProviders=new e(t.registry,{interfaces:"strut.ThemeProvider"}),this._modeChanged(null,this._editorModel.get("modeId"))}return n.prototype={_modeChanged:function(t,e){this._disposePrevious(),this._themeProviders.forEach(function(t){e in t.meta().modes&&this._addProvider(t)},this),this.trigger("change:activeProviders",this._activeProviders)},_addProvider:function(t){var e=t.service().create(this._editorModel);Array.isArray(e)?this._activeProviders=this._activeProviders.concat(e):this._activeProviders.push(e)},_disposePrevious:function(){this._activeProviders.forEach(function(t){t.dispose()},this),this._activeProviders=[]},activeProviders:function(){return this._activeProviders}},_.extend(n.prototype,t.Events),n}),define("strut/header/view/ThemeProviderView",["libs/backbone","../model/ThemeProviderCollection"],function(t,e){return t.View.extend({className:"themeProviders",initialize:function(t){this._providerCollection=new e(t),this._providerCollection.on("change:activeProviders",this.render,this)},render:function(){return this.$el.empty(),this._providerCollection.activeProviders().forEach(function(t){this.$el.append(t.view().render().$el)},this),this},constructor:function(e){t.View.prototype.constructor.call(this,e)}})}),define("strut/header/view/HeaderView",["libs/backbone","strut/logo_button/LogoView","strut/presentation_generator/view/PreviewButton","./ThemeProviderView","css!styles/header/header.css"],function(t,e,n,i){return t.View.extend({className:"row-fluid header",initialize:function(){this._template=JST["strut.header/Header"],this._logoButton=new e({editorModel:this.model.editorModel()}),this._previewButton=new n({editorModel:this.model.editorModel()}),this._themeProviderView=new i(this.model.editorModel()),this.model.editorModel().on("change:activeMode",this._modeChanged,this)},_modeChanged:function(t,e){"transition-editor"==e.id?this.$el.find(".create-comp-buttons").addClass("hidden"):this.$el.find(".create-comp-buttons").removeClass("hidden")},render:function(){this.$el.html(this._template()),this.$el.find(".logo-holder").append(this._logoButton.render().$el);var t=this.$el.find(".mode-buttons");this.model.get("modeButtons").forEach(function(e){t.append(e.render().el)},this);var e=this.$el.find(".create-comp-buttons > div");this.model.get("createCompButtons").forEach(function(t){e.append(t.render().el)},this),t.append(this._previewButton.render().$el);var n=this.$el.find(".theme-buttons");return n.append(this._themeProviderView.render().$el),this},constructor:function(){t.View.prototype.constructor.apply(this,arguments)}})}),define("strut/editor/EditorView",["libs/backbone","strut/header/view/HeaderView"],function(t,e){return t.View.extend({className:"container-fluid",initialize:function(){this._header=new e({model:this.model.get("header")}),this.model.on("change:activeMode",this._modeChanged,this)},render:function(){this.$el.empty(),this.$el.append(this._header.render().$el);var t=this.model.get("activeMode");return t?this.$el.append(t.view.render().$el):this._renderNoMode(),this},_modeChanged:function(t,e){this.$el.append(e.view.render().$el)},_renderNoMode:function(){this.$el.append('<div class="alert alert-error">No modes available.  Did some plugins fail to load?</div>')}})}),define("strut/header/model/HeaderModel",["libs/backbone"],function(t){return t.Model.extend({initialize:function(){this._createModeButtons(),this._createCreateCompButtons(),this.registry.on("registered:strut.ComponentButtonProvider",this._compBtnProviderRegistered,this),this.registry.on("registered:strut.EditMode",this._modeRegistered,this)},editorModel:function(){return this._editorModel},_createModeButtons:function(){this._disposeObjects(this.get("modeButtons"));var t=this.registry.get("strut.EditMode"),e=[];t.forEach(function(t){e.push(t.service().createButton(this._editorModel))},this),this.set("modeButtons",e)},_createCreateCompButtons:function(){this._disposeObjects(this.get("createCompButtons"));var t=this.registry.get("strut.ComponentButtonProvider"),e=[];t.forEach(function(t){var n=t.service().createButtons(this._editorModel);e=e.concat(n)},this),this.set("createCompButtons",e)},_modeRegistered:function(t){var e=t.service().createButton(this._editorModel);this.get("modeButtons").push(e),this.trigger("change:modeButtons.push",this.get("modeButtons"),e)},_compBtnProviderRegistered:function(t){var e=t.createButtons();this.set("createCompButtons",this.get("createCompButtons").concat(e)),this.trigger("change:createCompButtons.concat",this.get("createCompButtons"),e)},_disposeObjects:function(t){t&&t.forEach(function(t){t.dispose()})},constructor:function(e,n){this.registry=e,this._editorModel=n,t.Model.prototype.constructor.call(this)}})}),define("common/Adapter",[],function(){function t(t,e){var n=Object.keys(e);
n.forEach(function(n){var i=e[n];this[n]=function(){return t[i].apply(t,arguments)}},this)}return t}),define("tantaman/web/interactions/Clipboard",[],function(){function t(){this.items=[]}return t.prototype.setItems=function(t){t.length&&(this.items=t.slice(0))},t.prototype.getItems=function(){return $.map(this.items,function(t){return t.clone()})},t}),define("strut/editor/EditorModel",["libs/backbone","strut/header/model/HeaderModel","strut/deck/Deck","strut/slide_components/ComponentFactory","common/Adapter","tantaman/web/interactions/Clipboard","./GlobalEvents","tantaman/web/undo_support/CmdListFactory"],function(t,e,n,i,r,o,s,a){"use strict";function l(t){return new r(t,{store:"savePresentation"})}return t.Model.extend({initialize:function(){window.uiTestAcc=this,this._deck=new n,this.addSlide(),this.set("header",new e(this.registry,this)),this.set("modeId","slide-editor"),this.exportable=new r(this,{"export":"exportPresentation",identifier:"fileName"}),this.exportable.adapted=this;var t=this.registry.getBest("tantaman.web.saver.AutoSavers");if(t){var i=null,i=this.registry.getBest("strut.StorageInterface");i=l(i),this._exitSaver=t.exitSaver(this.exportable,i),this._timedSaver=t.timedSaver(this.exportable,2e4,i)}this.clipboard=new o,this._createMode(),this._cmdList=a.managedInstance("editor"),s.on("undo",this._cmdList.undo,this._cmdList),s.on("redo",this._cmdList.redo,this._cmdList)},changeActiveMode:function(t){t!=this.get("modeId")&&(this.set("modeId",t),this._createMode())},customStylesheet:function(t){return null==t?this._deck.get("customStylesheet"):(this._deck.set("customStylesheet",t),void 0)},dispose:function(){throw"EditorModel can not be disposed yet"},newPresentation:function(){var t=window.sessionMeta.num||0;t+=1,window.sessionMeta.num=t,this.importPresentation({fileName:"presentation-"+t,slides:[]}),this._deck.create()},importPresentation:function(t){console.log("New file name: "+t.fileName),this._deck.import(t)},exportPresentation:function(t){t&&this._deck.set("fileName",t);var e=this._deck.toJSON(!1,!0);return e},fileName:function(){var t=this._deck.get("fileName");return null==t&&(t="presentation-unnamed",this._deck.set("fileName",t)),t},deck:function(){return this._deck},slides:function(){return this._deck.get("slides")},addSlide:function(t){this._deck.create(t)},activeSlide:function(){return this._deck.get("activeSlide")},activeSlideIndex:function(){return this._deck.get("slides").indexOf(this._deck.get("activeSlide"))},addComponent:function(t){var e=this._deck.get("activeSlide");if(e){var n=i.instance.createModel(t);e.add(n)}},_createMode:function(){var t=this.get("modeId"),e=this.registry.getBest({interfaces:"strut.EditMode",meta:{id:t}});if(e){var n=this.get("activeMode");n&&n.close(),this.set("activeMode",e.getMode(this,this.registry))}},constructor:function(e){this.registry=e,t.Model.prototype.constructor.call(this)}})}),define("strut/startup/main",["strut/editor/EditorView","strut/editor/EditorModel"],function(t,e){var n=null,i={run:function(){var i=new e(n),r=new t({model:i,registry:n});if(r.render(),$("body").append(r.$el),null!=sessionMeta.lastPresentation){var o=n.getBest("strut.StorageInterface");o.load(sessionMeta.lastPresentation,function(t,e){e?(console.log(e),console.log(e.stack)):i.importPresentation(t)})}}},r={run:function(){}};return{initialize:function(t){n=t,n.register({interfaces:"strut.StartupTask"},i),n.register({interfaces:"strut.StartupTask"},r)}}}),define("features",["framework/ServiceRegistry","strut/etch_extension/main","strut/storage/main","strut/logo_button/main","strut/themes/main","strut/editor/main","strut/exporter/json/main","strut/exporter/zip/browser/main","strut/importer/json/main","strut/importer/main","strut/exporter/main","strut/presentation_generator/impress/main","strut/presentation_generator/bespoke/main","strut/presentation_generator/reveal/main","strut/presentation_generator/main","tantaman/web/saver/main","strut/slide_editor/main","strut/transition_editor/main","strut/slide_components/main","strut/well_context_buttons/main","tantaman/web/local_storage/main","strut/startup/main"],function(t){for(var e=new t,n=Array.prototype.slice.call(arguments,0),i=0,i=1;n.length>i;++i)n[i].initialize(e);return e}),define("common/Concurrent",[],function(){function t(t,e,n){this.num=t,this.stepCb=n,this.completionCb=e,this.decrement=this.decrement.bind(this)}return t.prototype={decrement:function(){if(--this.num,0>this.num)throw"Countdown less than zero";this.stepCb.apply(null,arguments),0==this.num&&this.completionCb.apply(null,arguments)}},{countdown:t}}),define("StrutLoader",["common/Concurrent"],function(t){return{start:function(e,n,i){var r=e.get("strut.StartupTask"),o=new t.countdown(r.length,n,i);r.forEach(function(t){var e=t.service();e.run(o.decrement)})}}}),!function(t){"use strict";t(function(){t.support.transition=function(){var t=function(){var t,e=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(t in n)if(void 0!==e.style[t])return n[t]}();return t&&{end:t}}()})}(window.jQuery),!function(t){"use strict";var e='[data-dismiss="alert"]',n=function(n){t(n).on("click",e,this.close)};n.prototype.close=function(e){function n(){i.trigger("closed").remove()}var i,r=t(this),o=r.attr("data-target");o||(o=r.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),i=t(o),e&&e.preventDefault(),i.length||(i=r.hasClass("alert")?r:r.parent()),i.trigger(e=t.Event("close")),e.isDefaultPrevented()||(i.removeClass("in"),t.support.transition&&i.hasClass("fade")?i.on(t.support.transition.end,n):n())};var i=t.fn.alert;t.fn.alert=function(e){return this.each(function(){var i=t(this),r=i.data("alert");r||i.data("alert",r=new n(this)),"string"==typeof e&&r[e].call(i)})},t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=i,this},t(document).on("click.alert.data-api",e,n.prototype.close)}(window.jQuery),!function(t){"use strict";var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.button.defaults,n)};e.prototype.setState=function(t){var e="disabled",n=this.$element,i=n.data(),r=n.is("input")?"val":"html";t+="Text",i.resetText||n.data("resetText",n[r]()),n[r](i[t]||this.options[t]),setTimeout(function(){"loadingText"==t?n.addClass(e).attr(e,e):n.removeClass(e).removeAttr(e)},0)},e.prototype.toggle=function(){var t=this.$element.closest('[data-toggle="buttons-radio"]');t&&t.find(".active").removeClass("active"),this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=function(n){return this.each(function(){var i=t(this),r=i.data("button"),o="object"==typeof n&&n;r||i.data("button",r=new e(this,o)),"toggle"==n?r.toggle():n&&r.setState(n)})},t.fn.button.defaults={loadingText:"loading..."},t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.button.data-api","[data-toggle^=button]",function(e){var n=t(e.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})}(window.jQuery),!function(t){"use strict";var e=function(e,n){this.$element=t(e),this.options=n,"hover"==this.options.pause&&this.$element.on("mouseenter",t.proxy(this.pause,this)).on("mouseleave",t.proxy(this.cycle,this))};e.prototype={cycle:function(e){return e||(this.paused=!1),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},to:function(e){var n=this.$element.find(".item.active"),i=n.parent().children(),r=i.index(n),o=this;if(!(e>i.length-1||0>e))return this.sliding?this.$element.one("slid",function(){o.to(e)}):r==e?this.pause().cycle():this.slide(e>r?"next":"prev",t(i[e]))},pause:function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition.end&&(this.$element.trigger(t.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(e,n){var i,r=this.$element.find(".item.active"),o=n||r[e](),s=this.interval,a="next"==e?"left":"right",l="next"==e?"first":"last",c=this;if(this.sliding=!0,s&&this.pause(),o=o.length?o:this.$element.find(".item")[l](),i=t.Event("slide",{relatedTarget:o[0]}),!o.hasClass("active")){if(t.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(i),i.isDefaultPrevented())return;o.addClass(e),o[0].offsetWidth,r.addClass(a),o.addClass(a),this.$element.one(t.support.transition.end,function(){o.removeClass([e,a].join(" ")).addClass("active"),r.removeClass(["active",a].join(" ")),c.sliding=!1,setTimeout(function(){c.$element.trigger("slid")},0)})}else{if(this.$element.trigger(i),i.isDefaultPrevented())return;r.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return s&&this.cycle(),this}}};var n=t.fn.carousel;t.fn.carousel=function(n){return this.each(function(){var i=t(this),r=i.data("carousel"),o=t.extend({},t.fn.carousel.defaults,"object"==typeof n&&n),s="string"==typeof n?n:o.slide;r||i.data("carousel",r=new e(this,o)),"number"==typeof n?r.to(n):s?r[s]():o.interval&&r.cycle()})},t.fn.carousel.defaults={interval:5e3,pause:"hover"},t.fn.carousel.Constructor=e,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this},t(document).on("click.carousel.data-api","[data-slide]",function(e){var n,i=t(this),r=t(i.attr("data-target")||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),o=t.extend({},r.data(),i.data());r.carousel(o),e.preventDefault()})}(window.jQuery),!function(t){"use strict";var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.collapse.defaults,n),this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};e.prototype={constructor:e,dimension:function(){var t=this.$element.hasClass("width");return t?"width":"height"},show:function(){var e,n,i,r;if(!this.transitioning){if(e=this.dimension(),n=t.camelCase(["scroll",e].join("-")),i=this.$parent&&this.$parent.find("> .accordion-group > .in"),i&&i.length){if(r=i.data("collapse"),r&&r.transitioning)return;i.collapse("hide"),r||i.data("collapse",null)}this.$element[e](0),this.transition("addClass",t.Event("show"),"shown"),t.support.transition&&this.$element[e](this.$element[0][n])}},hide:function(){var e;this.transitioning||(e=this.dimension(),this.reset(this.$element[e]()),this.transition("removeClass",t.Event("hide"),"hidden"),this.$element[e](0))},reset:function(t){var e=this.dimension();return this.$element.removeClass("collapse")[e](t||"auto")[0].offsetWidth,this.$element[null!==t?"addClass":"removeClass"]("collapse"),this},transition:function(e,n,i){var r=this,o=function(){"show"==n.type&&r.reset(),r.transitioning=0,r.$element.trigger(i)};this.$element.trigger(n),n.isDefaultPrevented()||(this.transitioning=1,this.$element[e]("in"),t.support.transition&&this.$element.hasClass("collapse")?this.$element.one(t.support.transition.end,o):o())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var n=t.fn.collapse;t.fn.collapse=function(n){return this.each(function(){var i=t(this),r=i.data("collapse"),o="object"==typeof n&&n;r||i.data("collapse",r=new e(this,o)),"string"==typeof n&&r[n]()})},t.fn.collapse.defaults={toggle:!0},t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=n,this},t(document).on("click.collapse.data-api","[data-toggle=collapse]",function(e){var n,i=t(this),r=i.attr("data-target")||e.preventDefault()||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),o=t(r).data("collapse")?"toggle":i.data();i[t(r).hasClass("in")?"addClass":"removeClass"]("collapsed"),t(r).collapse(o)})}(window.jQuery),!function(t){"use strict";function e(){t(i).each(function(){n(t(this)).removeClass("open")})}function n(e){var n,i=e.attr("data-target");return i||(i=e.attr("href"),i=i&&/#/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),n=t(i),n.length||(n=e.parent()),n}var i="[data-toggle=dropdown]",r=function(e){var n=t(e).on("click.dropdown.data-api",this.toggle);t("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};r.prototype={constructor:r,toggle:function(){var i,r,o=t(this);if(!o.is(".disabled, :disabled"))return i=n(o),r=i.hasClass("open"),e(),r||i.toggleClass("open"),o.focus(),!1},keydown:function(e){var i,r,o,s,a;if(/(38|40|27)/.test(e.keyCode)&&(i=t(this),e.preventDefault(),e.stopPropagation(),!i.is(".disabled, :disabled"))){if(o=n(i),s=o.hasClass("open"),!s||s&&27==e.keyCode)return i.click();r=t("[role=menu] li:not(.divider):visible a",o),r.length&&(a=r.index(r.filter(":focus")),38==e.keyCode&&a>0&&a--,40==e.keyCode&&r.length-1>a&&a++,~a||(a=0),r.eq(a).focus())}}};var o=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var n=t(this),i=n.data("dropdown");i||n.data("dropdown",i=new r(this)),"string"==typeof e&&i[e].call(n)})},t.fn.dropdown.Constructor=r,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=o,this},t(document).on("click.dropdown.data-api touchstart.dropdown.data-api",e).on("click.dropdown touchstart.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("touchstart.dropdown.data-api",".dropdown-menu",function(t){t.stopPropagation()}).on("click.dropdown.data-api touchstart.dropdown.data-api",i,r.prototype.toggle).on("keydown.dropdown.data-api touchstart.dropdown.data-api",i+", [role=menu]",r.prototype.keydown)}(window.jQuery),!function(t){"use strict";var e=function(e,n){this.options=n,this.$element=t(e).delegate('[data-dismiss="modal"]',"click.dismiss.modal",t.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};e.prototype={constructor:e,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var e=this,n=t.Event("show");this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var n=t.support.transition&&e.$element.hasClass("fade");e.$element.parent().length||e.$element.appendTo(document.body),e.$element.show(),n&&e.$element[0].offsetWidth,e.$element.addClass("in").attr("aria-hidden",!1),e.enforceFocus(),n?e.$element.one(t.support.transition.end,function(){e.$element.focus().trigger("shown")}):e.$element.focus().trigger("shown")}))},hide:function(e){e&&e.preventDefault(),e=t.Event("hide"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),t.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var e=this;t(document).on("focusin.modal",function(t){e.$element[0]===t.target||e.$element.has(t.target).length||e.$element.focus()})},escape:function(){var t=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(e){27==e.which&&t.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var e=this,n=setTimeout(function(){e.$element.off(t.support.transition.end),e.hideModal()},500);this.$element.one(t.support.transition.end,function(){clearTimeout(n),e.hideModal()})},hideModal:function(){this.$element.hide().trigger("hidden"),this.backdrop()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(e){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=t.support.transition&&n;this.$backdrop=t('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?t.proxy(this.$element[0].focus,this.$element[0]):t.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),i?this.$backdrop.one(t.support.transition.end,e):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t.support.transition.end,t.proxy(this.removeBackdrop,this)):this.removeBackdrop()):e&&e()}};var n=t.fn.modal;t.fn.modal=function(n){return this.each(function(){var i=t(this),r=i.data("modal"),o=t.extend({},t.fn.modal.defaults,i.data(),"object"==typeof n&&n);r||i.data("modal",r=new e(this,o)),"string"==typeof n?r[n]():o.show&&r.show()})},t.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.modal.data-api",'[data-toggle="modal"]',function(e){var n=t(this),i=n.attr("href"),r=t(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),o=r.data("modal")?"toggle":t.extend({remote:!/#/.test(i)&&i},r.data(),n.data());e.preventDefault(),r.modal(o).one("hide",function(){n.focus()})})}(window.jQuery),!function(t){"use strict";var e=function(t,e){this.init("tooltip",t,e)};e.prototype={constructor:e,init:function(e,n,i){var r,o;this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.enabled=!0,"click"==this.options.trigger?this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this)):"manual"!=this.options.trigger&&(r="hover"==this.options.trigger?"mouseenter":"focus",o="hover"==this.options.trigger?"mouseleave":"blur",this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(o+"."+this.type,this.options.selector,t.proxy(this.leave,this))),this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(e){return e=t.extend({},t.fn[this.type].defaults,e,this.$element.data()),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},enter:function(e){var n=t(e.currentTarget)[this.type](this._options).data(this.type);return n.options.delay&&n.options.delay.show?(clearTimeout(this.timeout),n.hoverState="in",this.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show),void 0):n.show()},leave:function(e){var n=t(e.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),n.options.delay&&n.options.delay.hide?(n.hoverState="out",this.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide),void 0):n.hide()},show:function(){var t,e,n,i,r,o,s;if(this.hasContent()&&this.enabled){switch(t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),o="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,e=/in/.test(o),t.detach().css({top:0,left:0,display:"block"}).insertAfter(this.$element),n=this.getPosition(e),i=t[0].offsetWidth,r=t[0].offsetHeight,e?o.split(" ")[1]:o){case"bottom":s={top:n.top+n.height,left:n.left+n.width/2-i/2};break;case"top":s={top:n.top-r,left:n.left+n.width/2-i/2};break;case"left":s={top:n.top+n.height/2-r/2,left:n.left-i};break;case"right":s={top:n.top+n.height/2-r/2,left:n.left+n.width}}t.offset(s).addClass(o).addClass("in")}},setContent:function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},hide:function(){function e(){var e=setTimeout(function(){n.off(t.support.transition.end).detach()},500);n.one(t.support.transition.end,function(){clearTimeout(e),n.detach()})}var n=this.tip();return n.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?e():n.detach(),this},fixTitle:function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(e){return t.extend({},e?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},tip:function(){return this.$tip=this.$tip||t(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(e){var n=t(e.currentTarget)[this.type](this._options).data(this.type);n[n.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var n=t.fn.tooltip;t.fn.tooltip=function(n){return this.each(function(){var i=t(this),r=i.data("tooltip"),o="object"==typeof n&&n;r||i.data("tooltip",r=new e(this,o)),"string"==typeof n&&r[n]()})},t.fn.tooltip.Constructor=e,t.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:!1},t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(window.jQuery),!function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype,{constructor:e,setContent:function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content")[this.options.html?"html":"text"](n),t.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var t,e=this.$element,n=this.options;return t=e.attr("data-content")||("function"==typeof n.content?n.content.call(e[0]):n.content)},tip:function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var n=t.fn.popover;t.fn.popover=function(n){return this.each(function(){var i=t(this),r=i.data("popover"),o="object"==typeof n&&n;r||i.data("popover",r=new e(this,o)),"string"==typeof n&&r[n]()})},t.fn.popover.Constructor=e,t.fn.popover.defaults=t.extend({},t.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"></div></div></div>'}),t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(window.jQuery),!function(t){"use strict";function e(e,n){var i,r=t.proxy(this.process,this),o=t(e).is("body")?t(window):t(e);this.options=t.extend({},t.fn.scrollspy.defaults,n),this.$scrollElement=o.on("scroll.scroll-spy.data-api",r),this.selector=(this.options.target||(i=t(e).attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=t("body"),this.refresh(),this.process()}e.prototype={constructor:e,refresh:function(){var e,n=this;this.offsets=t([]),this.targets=t([]),e=this.$body.find(this.selector).map(function(){var e=t(this),i=e.data("target")||e.attr("href"),r=/^#\w/.test(i)&&t(i);return r&&r.length&&[[r.position().top+n.$scrollElement.scrollTop(),i]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},process:function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,i=n-this.$scrollElement.height(),r=this.offsets,o=this.targets,s=this.activeTarget;if(e>=i)return s!=(t=o.last()[0])&&this.activate(t);for(t=r.length;t--;)s!=o[t]&&e>=r[t]&&(!r[t+1]||r[t+1]>=e)&&this.activate(o[t])},activate:function(e){var n,i;this.activeTarget=e,t(this.selector).parent(".active").removeClass("active"),i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parent("li").addClass("active"),n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate")}};var n=t.fn.scrollspy;t.fn.scrollspy=function(n){return this.each(function(){var i=t(this),r=i.data("scrollspy"),o="object"==typeof n&&n;r||i.data("scrollspy",r=new e(this,o)),"string"==typeof n&&r[n]()})},t.fn.scrollspy.Constructor=e,t.fn.scrollspy.defaults={offset:10},t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);e.scrollspy(e.data())})})}(window.jQuery),!function(t){"use strict";var e=function(e){this.element=t(e)};e.prototype={constructor:e,show:function(){var e,n,i,r=this.element,o=r.closest("ul:not(.dropdown-menu)"),s=r.attr("data-target");s||(s=r.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,"")),r.parent("li").hasClass("active")||(e=o.find(".active:last a")[0],i=t.Event("show",{relatedTarget:e}),r.trigger(i),i.isDefaultPrevented()||(n=t(s),this.activate(r.parent("li"),o),this.activate(n,n.parent(),function(){r.trigger({type:"shown",relatedTarget:e})})))},activate:function(e,n,i){function r(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),s?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),i&&i()}var o=n.find("> .active"),s=i&&t.support.transition&&o.hasClass("fade");s?o.one(t.support.transition.end,r):r(),o.removeClass("in")}};var n=t.fn.tab;t.fn.tab=function(n){return this.each(function(){var i=t(this),r=i.data("tab");r||i.data("tab",r=new e(this)),"string"==typeof n&&r[n]()})},t.fn.tab.Constructor=e,t.fn.tab.noConflict=function(){return t.fn.tab=n,this},t(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),t(this).tab("show")})}(window.jQuery),!function(t){"use strict";var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=t(this.options.menu),this.shown=!1,this.listen()};e.prototype={constructor:e,select:function(){var t=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(t)).change(),this.hide()},updater:function(t){return t},show:function(){var e=t.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:e.top+e.height,left:e.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var e;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(e=t.isFunction(this.source)?this.source(this.query,t.proxy(this.process,this)):this.source,e?this.process(e):this)},process:function(e){var n=this;return e=t.grep(e,function(t){return n.matcher(t)}),e=this.sorter(e),e.length?this.render(e.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(t){return~t.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(t){for(var e,n=[],i=[],r=[];e=t.shift();)e.toLowerCase().indexOf(this.query.toLowerCase())?~e.indexOf(this.query)?i.push(e):r.push(e):n.push(e);return n.concat(i,r)},highlighter:function(t){var e=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return t.replace(RegExp("("+e+")","ig"),function(t,e){return"<strong>"+e+"</strong>"})},render:function(e){var n=this;return e=t(e).map(function(e,i){return e=t(n.options.item).attr("data-value",i),e.find("a").html(n.highlighter(i)),e[0]}),e.first().addClass("active"),this.$menu.html(e),this},next:function(){var e=this.$menu.find(".active").removeClass("active"),n=e.next();n.length||(n=t(this.$menu.find("li")[0])),n.addClass("active")},prev:function(){var t=this.$menu.find(".active").removeClass("active"),e=t.prev();e.length||(e=this.$menu.find("li").last()),e.addClass("active")},listen:function(){this.$element.on("blur",t.proxy(this.blur,this)).on("keypress",t.proxy(this.keypress,this)).on("keyup",t.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",t.proxy(this.keydown,this)),this.$menu.on("click",t.proxy(this.click,this)).on("mouseenter","li",t.proxy(this.mouseenter,this))},eventSupported:function(t){var e=t in this.$element;return e||(this.$element.setAttribute(t,"return;"),e="function"==typeof this.$element[t]),e},move:function(t){if(this.shown){switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:t.preventDefault(),this.prev();break;case 40:t.preventDefault(),this.next()}t.stopPropagation()}},keydown:function(e){this.suppressKeyPressRepeat=~t.inArray(e.keyCode,[40,38,9,13,27]),this.move(e)},keypress:function(t){this.suppressKeyPressRepeat||this.move(t)},keyup:function(t){switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}t.stopPropagation(),t.preventDefault()},blur:function(){var t=this;setTimeout(function(){t.hide()},150)},click:function(t){t.stopPropagation(),t.preventDefault(),this.select()},mouseenter:function(e){this.$menu.find(".active").removeClass("active"),t(e.currentTarget).addClass("active")}};var n=t.fn.typeahead;t.fn.typeahead=function(n){return this.each(function(){var i=t(this),r=i.data("typeahead"),o="object"==typeof n&&n;r||i.data("typeahead",r=new e(this,o)),"string"==typeof n&&r[n]()})},t.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},t.fn.typeahead.Constructor=e,t.fn.typeahead.noConflict=function(){return t.fn.typeahead=n,this},t(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(e){var n=t(this);n.data("typeahead")||(e.preventDefault(),n.typeahead(n.data()))})}(window.jQuery),!function(t){"use strict";var e=function(e,n){this.options=t.extend({},t.fn.affix.defaults,n),this.$window=t(window).on("scroll.affix.data-api",t.proxy(this.checkPosition,this)).on("click.affix.data-api",t.proxy(function(){setTimeout(t.proxy(this.checkPosition,this),1)},this)),this.$element=t(e),this.checkPosition()};e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e,n=t(document).height(),i=this.$window.scrollTop(),r=this.$element.offset(),o=this.options.offset,s=o.bottom,a=o.top,l="affix affix-top affix-bottom";"object"!=typeof o&&(s=a=o),"function"==typeof a&&(a=o.top()),"function"==typeof s&&(s=o.bottom()),e=null!=this.unpin&&i+this.unpin<=r.top?!1:null!=s&&r.top+this.$element.height()>=n-s?"bottom":null!=a&&a>=i?"top":!1,this.affixed!==e&&(this.affixed=e,this.unpin="bottom"==e?r.top-i:null,this.$element.removeClass(l).addClass("affix"+(e?"-"+e:"")))}};var n=t.fn.affix;t.fn.affix=function(n){return this.each(function(){var i=t(this),r=i.data("affix"),o="object"==typeof n&&n;r||i.data("affix",r=new e(this,o)),"string"==typeof n&&r[n]()})},t.fn.affix.Constructor=e,t.fn.affix.defaults={offset:0},t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var e=t(this),n=e.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),e.affix(n)})})}(window.jQuery),define("bootstrap",["jquery"],function(){}),function(t,e){function n(t,e,n){return[parseInt(t[0],10)*(p.test(t[0])?e/100:1),parseInt(t[1],10)*(p.test(t[1])?n/100:1)]}function i(e,n){return parseInt(t.css(e,n),10)||0}function r(e){var n=e[0];return 9===n.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(n)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var o,s=Math.max,a=Math.abs,l=Math.round,c=/left|center|right/,u=/top|center|bottom/,h=/[\+\-]\d+%?/,d=/^\w+/,p=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(o!==e)return o;
var n,i,r=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=r.children()[0];return t("body").append(r),n=s.offsetWidth,r.css("overflow","scroll"),i=s.offsetWidth,n===i&&(i=r[0].clientWidth),r.remove(),o=n-i},getScrollInfo:function(e){var n=e.isWindow?"":e.element.css("overflow-x"),i=e.isWindow?"":e.element.css("overflow-y"),r="scroll"===n||"auto"===n&&e.width<e.element[0].scrollWidth,o="scroll"===i||"auto"===i&&e.height<e.element[0].scrollHeight;return{width:r?t.position.scrollbarWidth():0,height:o?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var n=t(e||window),i=t.isWindow(n[0]);return{element:n,isWindow:i,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:i?n.width():n.outerWidth(),height:i?n.height():n.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=t.extend({},e);var o,p,g,m,v,y,b=t(e.of),w=t.position.getWithinInfo(e.within),x=t.position.getScrollInfo(w),_=(e.collision||"flip").split(" "),k={};return y=r(b),b[0].preventDefault&&(e.at="left top"),p=y.width,g=y.height,m=y.offset,v=t.extend({},m),t.each(["my","at"],function(){var t,n,i=(e[this]||"").split(" ");1===i.length&&(i=c.test(i[0])?i.concat(["center"]):u.test(i[0])?["center"].concat(i):["center","center"]),i[0]=c.test(i[0])?i[0]:"center",i[1]=u.test(i[1])?i[1]:"center",t=h.exec(i[0]),n=h.exec(i[1]),k[this]=[t?t[0]:0,n?n[0]:0],e[this]=[d.exec(i[0])[0],d.exec(i[1])[0]]}),1===_.length&&(_[1]=_[0]),"right"===e.at[0]?v.left+=p:"center"===e.at[0]&&(v.left+=p/2),"bottom"===e.at[1]?v.top+=g:"center"===e.at[1]&&(v.top+=g/2),o=n(k.at,p,g),v.left+=o[0],v.top+=o[1],this.each(function(){var r,c,u=t(this),h=u.outerWidth(),d=u.outerHeight(),f=i(this,"marginLeft"),y=i(this,"marginTop"),C=h+f+i(this,"marginRight")+x.width,S=d+y+i(this,"marginBottom")+x.height,$=t.extend({},v),T=n(k.my,u.outerWidth(),u.outerHeight());"right"===e.my[0]?$.left-=h:"center"===e.my[0]&&($.left-=h/2),"bottom"===e.my[1]?$.top-=d:"center"===e.my[1]&&($.top-=d/2),$.left+=T[0],$.top+=T[1],t.support.offsetFractions||($.left=l($.left),$.top=l($.top)),r={marginLeft:f,marginTop:y},t.each(["left","top"],function(n,i){t.ui.position[_[n]]&&t.ui.position[_[n]][i]($,{targetWidth:p,targetHeight:g,elemWidth:h,elemHeight:d,collisionPosition:r,collisionWidth:C,collisionHeight:S,offset:[o[0]+T[0],o[1]+T[1]],my:e.my,at:e.at,within:w,elem:u})}),e.using&&(c=function(t){var n=m.left-$.left,i=n+p-h,r=m.top-$.top,o=r+g-d,l={target:{element:b,left:m.left,top:m.top,width:p,height:g},element:{element:u,left:$.left,top:$.top,width:h,height:d},horizontal:0>i?"left":n>0?"right":"center",vertical:0>o?"top":r>0?"bottom":"middle"};h>p&&p>a(n+i)&&(l.horizontal="center"),d>g&&g>a(r+o)&&(l.vertical="middle"),l.important=s(a(n),a(i))>s(a(r),a(o))?"horizontal":"vertical",e.using.call(this,t,l)}),u.offset(t.extend($,{using:c}))})},t.ui.position={fit:{left:function(t,e){var n,i=e.within,r=i.isWindow?i.scrollLeft:i.offset.left,o=i.width,a=t.left-e.collisionPosition.marginLeft,l=r-a,c=a+e.collisionWidth-o-r;e.collisionWidth>o?l>0&&0>=c?(n=t.left+l+e.collisionWidth-o-r,t.left+=l-n):t.left=c>0&&0>=l?r:l>c?r+o-e.collisionWidth:r:l>0?t.left+=l:c>0?t.left-=c:t.left=s(t.left-a,t.left)},top:function(t,e){var n,i=e.within,r=i.isWindow?i.scrollTop:i.offset.top,o=e.within.height,a=t.top-e.collisionPosition.marginTop,l=r-a,c=a+e.collisionHeight-o-r;e.collisionHeight>o?l>0&&0>=c?(n=t.top+l+e.collisionHeight-o-r,t.top+=l-n):t.top=c>0&&0>=l?r:l>c?r+o-e.collisionHeight:r:l>0?t.top+=l:c>0?t.top-=c:t.top=s(t.top-a,t.top)}},flip:{left:function(t,e){var n,i,r=e.within,o=r.offset.left+r.scrollLeft,s=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,c=t.left-e.collisionPosition.marginLeft,u=c-l,h=c+e.collisionWidth-s-l,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>u?(n=t.left+d+p+f+e.collisionWidth-s-o,(0>n||a(u)>n)&&(t.left+=d+p+f)):h>0&&(i=t.left-e.collisionPosition.marginLeft+d+p+f-l,(i>0||h>a(i))&&(t.left+=d+p+f))},top:function(t,e){var n,i,r=e.within,o=r.offset.top+r.scrollTop,s=r.height,l=r.isWindow?r.scrollTop:r.offset.top,c=t.top-e.collisionPosition.marginTop,u=c-l,h=c+e.collisionHeight-s-l,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,g=-2*e.offset[1];0>u?(i=t.top+p+f+g+e.collisionHeight-s-o,t.top+p+f+g>u&&(0>i||a(u)>i)&&(t.top+=p+f+g)):h>0&&(n=t.top-e.collisionPosition.marginTop+p+f+g-l,t.top+p+f+g>h&&(n>0||h>a(n))&&(t.top+=p+f+g))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,n,i,r,o,s=document.getElementsByTagName("body")[0],a=document.createElement("div");e=document.createElement(s?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},s&&t.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in i)e.style[o]=i[o];e.appendChild(a),n=s||document.documentElement,n.insertBefore(e,n.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",r=t(a).offset().left,t.support.offsetFractions=r>10&&11>r,e.innerHTML="",n.removeChild(e)}()}(jQuery),define("position",["jquery"],function(){}),function(t,e){function n(t){for(var e,n=t.split(/\s+/),i=[],r=0;e=n[r];r++)e=e[0].toUpperCase(),i.push(e);return i}function i(e){return e.id&&t('label[for="'+e.id+'"]').val()||e.name}function r(n,o,s){return s||(s=0),o.each(function(){var o,a,l=t(this),c=this,u=this.nodeName.toLowerCase();switch("label"==u&&l.find("input, textarea, select").length&&(o=l.text(),l=l.children().first(),c=l.get(0),u=c.nodeName.toLowerCase()),u){case"menu":a={name:l.attr("label"),items:{}},s=r(a.items,l.children(),s);break;case"a":case"button":a={name:l.text(),disabled:!!l.attr("disabled"),callback:function(){return function(){l.click()}}()};break;case"menuitem":case"command":switch(l.attr("type")){case e:case"command":case"menuitem":a={name:l.attr("label"),disabled:!!l.attr("disabled"),callback:function(){return function(){l.click()}}()};break;case"checkbox":a={type:"checkbox",disabled:!!l.attr("disabled"),name:l.attr("label"),selected:!!l.attr("checked")};break;case"radio":a={type:"radio",disabled:!!l.attr("disabled"),name:l.attr("label"),radio:l.attr("radiogroup"),value:l.attr("id"),selected:!!l.attr("checked")};break;default:a=e}break;case"hr":a="-------";break;case"input":switch(l.attr("type")){case"text":a={type:"text",name:o||i(c),disabled:!!l.attr("disabled"),value:l.val()};break;case"checkbox":a={type:"checkbox",name:o||i(c),disabled:!!l.attr("disabled"),selected:!!l.attr("checked")};break;case"radio":a={type:"radio",name:o||i(c),disabled:!!l.attr("disabled"),radio:!!l.attr("name"),value:l.val(),selected:!!l.attr("checked")};break;default:a=e}break;case"select":a={type:"select",name:o||i(c),disabled:!!l.attr("disabled"),selected:l.val(),options:{}},l.children().each(function(){a.options[this.value]=t(this).text()});break;case"textarea":a={type:"textarea",name:o||i(c),disabled:!!l.attr("disabled"),value:l.val()};break;case"label":break;default:a={type:"html",html:l.clone(!0)}}a&&(s++,n["key"+s]=a)}),s}if(t.support.htmlMenuitem="HTMLMenuItemElement"in window,t.support.htmlCommand="HTMLCommandElement"in window,t.support.eventSelectstart="onselectstart"in document.documentElement,!t.ui||!t.ui.widget){var o=t.cleanData;t.cleanData=function(e){for(var n,i=0;null!=(n=e[i]);i++)try{t(n).triggerHandler("remove")}catch(r){}o(e)}}var s=null,a=!1,l=t(window),c=0,u={},h={},d={},p={selector:null,appendTo:null,trigger:"right",autoHide:!1,delay:200,reposition:!0,determinePosition:function(e){if(t.ui&&t.ui.position)e.css("display","block").position({my:"center top",at:"center bottom",of:this,offset:"0 5",collision:"fit"}).css("display","none");else{var n=this.offset();n.top+=this.outerHeight(),n.left+=this.outerWidth()/2-e.outerWidth()/2,e.css(n)}},position:function(t,n,i){var r;if(!n&&!i)return t.determinePosition.call(this,t.$menu),e;r="maintain"===n&&"maintain"===i?t.$menu.position():{top:i,left:n};var o=l.scrollTop()+l.height(),s=l.scrollLeft()+l.width(),a=t.$menu.height(),c=t.$menu.width();r.top+a>o&&(r.top-=a),r.left+c>s&&(r.left-=c),t.$menu.css(r)},positionSubmenu:function(e){if(t.ui&&t.ui.position)e.css("display","block").position({my:"left top",at:"right top",of:this,collision:"flipfit fit"}).css("display","");else{var n={top:0,left:this.outerWidth()};e.css(n)}},zIndex:1,animation:{duration:50,show:"slideDown",hide:"slideUp"},events:{show:t.noop,hide:t.noop},callback:null,items:{}},f={timer:null,pageX:null,pageY:null},g=function(t){for(var e=0,n=t;;)if(e=Math.max(e,parseInt(n.css("z-index"),10)||0),n=n.parent(),!n||!n.length||"html body".indexOf(n.prop("nodeName").toLowerCase())>-1)break;return e},m={abortevent:function(t){t.preventDefault(),t.stopImmediatePropagation()},contextmenu:function(e){var n=t(this);if(e.preventDefault(),e.stopImmediatePropagation(),!("right"!=e.data.trigger&&e.originalEvent||n.hasClass("context-menu-active")||n.hasClass("context-menu-disabled"))){if(s=n,e.data.build){var i=e.data.build(s,e);if(i===!1)return;if(e.data=t.extend(!0,{},p,e.data,i||{}),!e.data.items||t.isEmptyObject(e.data.items))throw window.console&&(console.error||console.log)("No items specified to show in contextMenu"),Error("No Items specified");e.data.$trigger=s,v.create(e.data)}v.show.call(n,e.data,e.pageX,e.pageY)}},click:function(e){e.preventDefault(),e.stopImmediatePropagation(),t(this).trigger(t.Event("contextmenu",{data:e.data,pageX:e.pageX,pageY:e.pageY}))},mousedown:function(e){var n=t(this);s&&s.length&&!s.is(n)&&s.data("contextMenu").$menu.trigger("contextmenu:hide"),2==e.button&&(s=n.data("contextMenuActive",!0))},mouseup:function(e){var n=t(this);n.data("contextMenuActive")&&s&&s.length&&s.is(n)&&!n.hasClass("context-menu-disabled")&&(e.preventDefault(),e.stopImmediatePropagation(),s=n,n.trigger(t.Event("contextmenu",{data:e.data,pageX:e.pageX,pageY:e.pageY}))),n.removeData("contextMenuActive")},mouseenter:function(e){var n=t(this),i=t(e.relatedTarget),r=t(document);i.is(".context-menu-list")||i.closest(".context-menu-list").length||s&&s.length||(f.pageX=e.pageX,f.pageY=e.pageY,f.data=e.data,r.on("mousemove.contextMenuShow",m.mousemove),f.timer=setTimeout(function(){f.timer=null,r.off("mousemove.contextMenuShow"),s=n,n.trigger(t.Event("contextmenu",{data:f.data,pageX:f.pageX,pageY:f.pageY}))},e.data.delay))},mousemove:function(t){f.pageX=t.pageX,f.pageY=t.pageY},mouseleave:function(e){var n=t(e.relatedTarget);if(!n.is(".context-menu-list")&&!n.closest(".context-menu-list").length){try{clearTimeout(f.timer)}catch(e){}f.timer=null}},layerClick:function(n){var i,r,o=t(this),s=o.data("contextMenuRoot"),a=n.button,c=n.pageX,u=n.pageY;n.preventDefault(),n.stopImmediatePropagation(),setTimeout(function(){var o,h="left"==s.trigger&&0===a||"right"==s.trigger&&2===a;if(document.elementFromPoint&&(s.$layer.hide(),i=document.elementFromPoint(c-l.scrollLeft(),u-l.scrollTop()),s.$layer.show()),s.reposition&&h)if(document.elementFromPoint){if(s.$trigger.is(i)||s.$trigger.has(i).length)return s.position.call(s.$trigger,s,c,u),e}else if(r=s.$trigger.offset(),o=t(window),r.top+=o.scrollTop(),r.top<=n.pageY&&(r.left+=o.scrollLeft(),r.left<=n.pageX&&(r.bottom=r.top+s.$trigger.outerHeight(),r.bottom>=n.pageY&&(r.right=r.left+s.$trigger.outerWidth(),r.right>=n.pageX))))return s.position.call(s.$trigger,s,c,u),e;i&&h&&s.$trigger.one("contextmenu:hidden",function(){t(i).contextMenu({x:c,y:u})}),s.$menu.trigger("contextmenu:hide")},50)},keyStop:function(t,e){e.isInput||t.preventDefault(),t.stopPropagation()},key:function(t){var n=s.data("contextMenu")||{};switch(t.keyCode){case 9:case 38:if(m.keyStop(t,n),n.isInput){if(9==t.keyCode&&t.shiftKey)return t.preventDefault(),n.$selected&&n.$selected.find("input, textarea, select").blur(),n.$menu.trigger("prevcommand"),e;if(38==t.keyCode&&"checkbox"==n.$selected.find("input, textarea, select").prop("type"))return t.preventDefault(),e}else if(9!=t.keyCode||t.shiftKey)return n.$menu.trigger("prevcommand"),e;case 40:if(m.keyStop(t,n),!n.isInput)return n.$menu.trigger("nextcommand"),e;if(9==t.keyCode)return t.preventDefault(),n.$selected&&n.$selected.find("input, textarea, select").blur(),n.$menu.trigger("nextcommand"),e;if(40==t.keyCode&&"checkbox"==n.$selected.find("input, textarea, select").prop("type"))return t.preventDefault(),e;break;case 37:if(m.keyStop(t,n),n.isInput||!n.$selected||!n.$selected.length)break;if(!n.$selected.parent().hasClass("context-menu-root")){var i=n.$selected.parent().parent();return n.$selected.trigger("contextmenu:blur"),n.$selected=i,e}break;case 39:if(m.keyStop(t,n),n.isInput||!n.$selected||!n.$selected.length)break;var r=n.$selected.data("contextMenu")||{};if(r.$menu&&n.$selected.hasClass("context-menu-submenu"))return n.$selected=null,r.$selected=null,r.$menu.trigger("nextcommand"),e;break;case 35:case 36:return n.$selected&&n.$selected.find("input, textarea, select").length?e:((n.$selected&&n.$selected.parent()||n.$menu).children(":not(.disabled, .not-selectable)")[36==t.keyCode?"first":"last"]().trigger("contextmenu:focus"),t.preventDefault(),e);case 13:if(m.keyStop(t,n),n.isInput){if(n.$selected&&!n.$selected.is("textarea, select"))return t.preventDefault(),e;break}return n.$selected&&n.$selected.trigger("mouseup"),e;case 32:case 33:case 34:return m.keyStop(t,n),e;case 27:return m.keyStop(t,n),n.$menu.trigger("contextmenu:hide"),e;default:var o=String.fromCharCode(t.keyCode).toUpperCase();if(n.accesskeys[o])return n.accesskeys[o].$node.trigger(n.accesskeys[o].$menu?"contextmenu:focus":"mouseup"),e}t.stopPropagation(),n.$selected&&n.$selected.trigger(t)},prevItem:function(e){e.stopPropagation();var n=t(this).data("contextMenu")||{};if(n.$selected){var i=n.$selected;n=n.$selected.parent().data("contextMenu")||{},n.$selected=i}for(var r=n.$menu.children(),o=n.$selected&&n.$selected.prev().length?n.$selected.prev():r.last(),s=o;o.hasClass("disabled")||o.hasClass("not-selectable");)if(o=o.prev().length?o.prev():r.last(),o.is(s))return;n.$selected&&m.itemMouseleave.call(n.$selected.get(0),e),m.itemMouseenter.call(o.get(0),e);var a=o.find("input, textarea, select");a.length&&a.focus()},nextItem:function(e){e.stopPropagation();var n=t(this).data("contextMenu")||{};if(n.$selected){var i=n.$selected;n=n.$selected.parent().data("contextMenu")||{},n.$selected=i}for(var r=n.$menu.children(),o=n.$selected&&n.$selected.next().length?n.$selected.next():r.first(),s=o;o.hasClass("disabled")||o.hasClass("not-selectable");)if(o=o.next().length?o.next():r.first(),o.is(s))return;n.$selected&&m.itemMouseleave.call(n.$selected.get(0),e),m.itemMouseenter.call(o.get(0),e);var a=o.find("input, textarea, select");a.length&&a.focus()},focusInput:function(){var e=t(this).closest(".context-menu-item"),n=e.data(),i=n.contextMenu,r=n.contextMenuRoot;r.$selected=i.$selected=e,r.isInput=i.isInput=!0},blurInput:function(){var e=t(this).closest(".context-menu-item"),n=e.data(),i=n.contextMenu,r=n.contextMenuRoot;r.isInput=i.isInput=!1},menuMouseenter:function(){var e=t(this).data().contextMenuRoot;e.hovering=!0},menuMouseleave:function(e){var n=t(this).data().contextMenuRoot;n.$layer&&n.$layer.is(e.relatedTarget)&&(n.hovering=!1)},itemMouseenter:function(n){var i=t(this),r=i.data(),o=r.contextMenu,s=r.contextMenuRoot;return s.hovering=!0,n&&s.$layer&&s.$layer.is(n.relatedTarget)&&(n.preventDefault(),n.stopImmediatePropagation()),(o.$menu?o:s).$menu.children(".hover").trigger("contextmenu:blur"),i.hasClass("disabled")||i.hasClass("not-selectable")?(o.$selected=null,e):(i.trigger("contextmenu:focus"),e)},itemMouseleave:function(n){var i=t(this),r=i.data(),o=r.contextMenu,s=r.contextMenuRoot;return s!==o&&s.$layer&&s.$layer.is(n.relatedTarget)?(s.$selected&&s.$selected.trigger("contextmenu:blur"),n.preventDefault(),n.stopImmediatePropagation(),s.$selected=o.$selected=o.$node,e):(i.trigger("contextmenu:blur"),e)},itemClick:function(e){var n,i=t(this),r=i.data(),o=r.contextMenu,s=r.contextMenuRoot,a=r.contextMenuKey;if(o.items[a]&&!i.is(".disabled, .context-menu-submenu, .context-menu-separator, .not-selectable")){if(e.preventDefault(),e.stopImmediatePropagation(),t.isFunction(s.callbacks[a])&&Object.prototype.hasOwnProperty.call(s.callbacks,a))n=s.callbacks[a];else{if(!t.isFunction(s.callback))return;n=s.callback}n.call(s.$trigger,a,s)!==!1?s.$menu.trigger("contextmenu:hide"):s.$menu.parent().length&&v.update.call(s.$trigger,s)}},inputClick:function(t){t.stopImmediatePropagation()},hideMenu:function(e,n){var i=t(this).data("contextMenuRoot");v.hide.call(i.$trigger,i,n&&n.force)},focusItem:function(e){e.stopPropagation();var n=t(this),i=n.data(),r=i.contextMenu,o=i.contextMenuRoot;n.addClass("hover").siblings(".hover").trigger("contextmenu:blur"),r.$selected=o.$selected=n,r.$node&&o.positionSubmenu.call(r.$node,r.$menu)},blurItem:function(e){e.stopPropagation();var n=t(this),i=n.data(),r=i.contextMenu;i.contextMenuRoot,n.removeClass("hover"),r.$selected=null}},v={show:function(n,i,r){var o=t(this),a={};return t("#context-menu-layer").trigger("mousedown"),n.$trigger=o,n.events.show.call(o,n)===!1?(s=null,e):(v.update.call(o,n),n.position.call(o,n,i,r),n.zIndex&&(a.zIndex=g(o)+n.zIndex),v.layer.call(n.$menu,n,a.zIndex),n.$menu.find("ul").css("zIndex",a.zIndex+1),n.$menu.css(a)[n.animation.show](n.animation.duration,function(){o.trigger("contextmenu:visible")}),o.data("contextMenu",n).addClass("context-menu-active"),t(document).off("keydown.contextMenu").on("keydown.contextMenu",m.key),n.autoHide&&t(document).on("mousemove.contextMenuAutoHide",function(t){var e=o.offset();e.right=e.left+o.outerWidth(),e.bottom=e.top+o.outerHeight(),!n.$layer||n.hovering||t.pageX>=e.left&&t.pageX<=e.right&&t.pageY>=e.top&&t.pageY<=e.bottom||n.$menu.trigger("contextmenu:hide")}),n.events.shown&&n.events.shown.call(o,n),e)},hide:function(n,i){var r=t(this);if(n||(n=r.data("contextMenu")||{}),i||!n.events||n.events.hide.call(r,n)!==!1){if(r.removeData("contextMenu").removeClass("context-menu-active"),n.$layer){setTimeout(function(t){return function(){t.remove()}}(n.$layer),10);try{delete n.$layer}catch(o){n.$layer=null}}s=null,n.$menu.find(".hover").trigger("contextmenu:blur"),n.$selected=null,t(document).off(".contextMenuAutoHide").off("keydown.contextMenu"),n.$menu&&n.$menu[n.animation.hide](n.animation.duration,function(){n.build&&(n.$menu.remove(),t.each(n,function(t){switch(t){case"ns":case"selector":case"build":case"trigger":return!0;default:n[t]=e;try{delete n[t]}catch(i){}return!0}})),setTimeout(function(){r.trigger("contextmenu:hidden")},10)})}},create:function(i,r){r===e&&(r=i),i.$menu=t('<ul class="context-menu-list"></ul>').addClass(i.className||"").data({contextMenu:i,contextMenuRoot:r}),t.each(["callbacks","commands","inputs"],function(t,e){i[e]={},r[e]||(r[e]={})}),r.accesskeys||(r.accesskeys={}),t.each(i.items,function(e,o){var s=t('<li class="context-menu-item"></li>').addClass(o.className||""),a=null,l=null;if(s.on("click",t.noop),o.$node=s.data({contextMenu:i,contextMenuRoot:r,contextMenuKey:e}),o.accesskey)for(var c,u=n(o.accesskey),h=0;c=u[h];h++)if(!r.accesskeys[c]){r.accesskeys[c]=o,o._name=o.name.replace(RegExp("("+c+")","i"),'<span class="context-menu-accesskey">$1</span>');break}if("string"==typeof o)s.addClass("context-menu-separator not-selectable");else if(o.type&&d[o.type])d[o.type].call(s,o,i,r),t.each([i,r],function(n,i){i.commands[e]=o,t.isFunction(o.callback)&&(i.callbacks[e]=o.callback)});else{switch("html"==o.type?s.addClass("context-menu-html not-selectable"):o.type?(a=t("<label></label>").appendTo(s),t("<span></span>").html(o._name||o.name).appendTo(a),s.addClass("context-menu-input"),i.hasTypes=!0,t.each([i,r],function(t,n){n.commands[e]=o,n.inputs[e]=o})):o.items&&(o.type="sub"),o.type){case"text":l=t('<input type="text" value="1" name="" value="">').attr("name","context-menu-input-"+e).val(o.value||"").appendTo(a);break;case"textarea":l=t('<textarea name=""></textarea>').attr("name","context-menu-input-"+e).val(o.value||"").appendTo(a),o.height&&l.height(o.height);break;case"checkbox":l=t('<input type="checkbox" value="1" name="" value="">').attr("name","context-menu-input-"+e).val(o.value||"").prop("checked",!!o.selected).prependTo(a);break;case"radio":l=t('<input type="radio" value="1" name="" value="">').attr("name","context-menu-input-"+o.radio).val(o.value||"").prop("checked",!!o.selected).prependTo(a);break;case"select":l=t('<select name="">').attr("name","context-menu-input-"+e).appendTo(a),o.options&&(t.each(o.options,function(e,n){t("<option></option>").val(e).text(n).appendTo(l)}),l.val(o.selected));break;case"sub":t("<span></span>").html(o._name||o.name).appendTo(s),o.appendTo=o.$node,v.create(o,r),s.data("contextMenu",o).addClass("context-menu-submenu"),o.callback=null;break;case"html":t(o.html).appendTo(s);break;default:t.each([i,r],function(n,i){i.commands[e]=o,t.isFunction(o.callback)&&(i.callbacks[e]=o.callback)}),t("<span></span>").html(o._name||o.name||"").appendTo(s)}o.type&&"sub"!=o.type&&"html"!=o.type&&(l.on("focus",m.focusInput).on("blur",m.blurInput),o.events&&l.on(o.events,i)),o.icon&&s.prepend('<i class="icon icon-'+o.icon+'"></i>'),o.background&&(s.addClass(o.background),s[0].dataset.background=o.background)}o.$input=l,o.$label=a,s.appendTo(i.$menu),!i.hasTypes&&t.support.eventSelectstart&&s.on("selectstart.disableTextSelect",m.abortevent)}),i.$node||i.$menu.css("display","none").addClass("context-menu-root"),i.$menu.appendTo(i.appendTo||document.body)},resize:function(e,n){e.css({position:"absolute",display:"block"}),e.data("width",Math.ceil(e.width())+1),e.css({position:"static",minWidth:"0px",maxWidth:"100000px"}),e.find("> li > ul").each(function(){v.resize(t(this),!0)}),n||e.find("ul").andSelf().css({position:"",display:"",minWidth:"",maxWidth:""}).width(function(){return t(this).data("width")})},update:function(n,i){var r=this;i===e&&(i=n,v.resize(n.$menu)),n.$menu.children().each(function(){var e=t(this),o=e.data("contextMenuKey"),s=n.items[o],a=t.isFunction(s.disabled)&&s.disabled.call(r,o,i)||s.disabled===!0;if(e[a?"addClass":"removeClass"]("disabled"),s.type)switch(e.find("input, select, textarea").prop("disabled",a),s.type){case"text":case"textarea":s.$input.val(s.value||"");break;case"checkbox":case"radio":s.$input.val(s.value||"").prop("checked",!!s.selected);break;case"select":s.$input.val(s.selected||"")}s.$menu&&v.update.call(r,s,i)})},layer:function(e,n){var i=e.$layer=t('<div id="context-menu-layer" style="position:fixed; z-index:'+n+'; top:0; left:0; opacity: 0; filter: alpha(opacity=0); background-color: #000;"></div>').css({height:l.height(),width:l.width(),display:"block"}).data("contextMenuRoot",e).insertBefore(this).on("contextmenu",m.abortevent).on("mousedown",m.layerClick);return t.support.fixedPosition||i.css({position:"absolute",height:t(document).height()}),i}};t.fn.contextMenu=function(n){if(n===e)this.first().trigger("contextmenu");else if(n.x&&n.y)this.first().trigger(t.Event("contextmenu",{pageX:n.x,pageY:n.y}));else if("hide"===n){var i=this.data("contextMenu").$menu;i&&i.trigger("contextmenu:hide")}else"destroy"===n?t.contextMenu("destroy",{context:this}):t.isPlainObject(n)?(n.context=this,t.contextMenu("create",n)):n?this.removeClass("context-menu-disabled"):n||this.addClass("context-menu-disabled");return this},t.contextMenu=function(n,i){"string"!=typeof n&&(i=n,n="create"),"string"==typeof i?i={selector:i}:i===e&&(i={});var r=t.extend(!0,{},p,i||{}),o=t(document),s=o,l=!1;switch(r.context&&r.context.length?(s=t(r.context).first(),r.context=s.get(0),l=r.context!==document):r.context=document,n){case"create":if(!r.selector)throw Error("No selector specified");if(r.selector.match(/.context-menu-(list|item|input)($|\s)/))throw Error('Cannot bind to selector "'+r.selector+'" as it contains a reserved className');if(!r.build&&(!r.items||t.isEmptyObject(r.items)))throw Error("No Items specified");switch(c++,r.ns=".contextMenu"+c,l||(u[r.selector]=r.ns),h[r.ns]=r,r.trigger||(r.trigger="right"),a||(o.on({"contextmenu:hide.contextMenu":m.hideMenu,"prevcommand.contextMenu":m.prevItem,"nextcommand.contextMenu":m.nextItem,"contextmenu.contextMenu":m.abortevent,"mouseenter.contextMenu":m.menuMouseenter,"mouseleave.contextMenu":m.menuMouseleave},".context-menu-list").on("mouseup.contextMenu",".context-menu-input",m.inputClick).on({"mouseup.contextMenu":m.itemClick,"contextmenu:focus.contextMenu":m.focusItem,"contextmenu:blur.contextMenu":m.blurItem,"contextmenu.contextMenu":m.abortevent,"mouseenter.contextMenu":m.itemMouseenter,"mouseleave.contextMenu":m.itemMouseleave},".context-menu-item"),a=!0),s.on("contextmenu"+r.ns,r.selector,r,m.contextmenu),l&&s.on("remove"+r.ns,function(){t(this).contextMenu("destroy")}),r.trigger){case"hover":s.on("mouseenter"+r.ns,r.selector,r,m.mouseenter).on("mouseleave"+r.ns,r.selector,r,m.mouseleave);break;case"left":s.on("click"+r.ns,r.selector,r,m.click)}r.build||v.create(r);break;case"destroy":var d;if(l){var f=r.context;t.each(h,function(e,n){if(n.context!==f)return!0;d=t(".context-menu-list").filter(":visible"),d.length&&d.data().contextMenuRoot.$trigger.is(t(n.context).find(n.selector))&&d.trigger("contextmenu:hide",{force:!0});try{h[n.ns].$menu&&h[n.ns].$menu.remove(),delete h[n.ns]}catch(i){h[n.ns]=null}return t(n.context).off(n.ns),!0})}else if(r.selector){if(u[r.selector]){d=t(".context-menu-list").filter(":visible"),d.length&&d.data().contextMenuRoot.$trigger.is(r.selector)&&d.trigger("contextmenu:hide",{force:!0});try{h[u[r.selector]].$menu&&h[u[r.selector]].$menu.remove(),delete h[u[r.selector]]}catch(g){h[u[r.selector]]=null}o.off(u[r.selector])}}else o.off(".contextMenu .contextMenuAutoHide"),t.each(h,function(e,n){t(n.context).off(n.ns)}),u={},h={},c=0,a=!1,t("#context-menu-layer, .context-menu-list").remove();break;case"html5":(!t.support.htmlCommand&&!t.support.htmlMenuitem||"boolean"==typeof i&&i)&&t('menu[type="context"]').each(function(){this.id&&t.contextMenu({selector:"[contextmenu="+this.id+"]",items:t.contextMenu.fromMenu(this)})}).css("display","none");break;default:throw Error('Unknown operation "'+n+'"')}return this},t.contextMenu.setInputValues=function(n,i){i===e&&(i={}),t.each(n.inputs,function(t,e){switch(e.type){case"text":case"textarea":e.value=i[t]||"";break;case"checkbox":e.selected=i[t]?!0:!1;break;case"radio":e.selected=(i[e.radio]||"")==e.value?!0:!1;break;case"select":e.selected=i[t]||""}})},t.contextMenu.getInputValues=function(n,i){return i===e&&(i={}),t.each(n.inputs,function(t,e){switch(e.type){case"text":case"textarea":case"select":i[t]=e.$input.val();break;case"checkbox":i[t]=e.$input.prop("checked");break;case"radio":e.$input.prop("checked")&&(i[e.radio]=e.value)}}),i},t.contextMenu.fromMenu=function(e){var n=t(e),i={};return r(i,n.children()),i},t.contextMenu.defaults=p,t.contextMenu.types=d,t.contextMenu.handle=m,t.contextMenu.op=v,t.contextMenu.menus=h}(jQuery),define("jqContextMenu",["jquery","position"],function(){}),require.config({paths:{libs:"../scripts/libs",jquery:"../scripts/libs/jQuery",position:"../components/jq-contextmenu/jquery.ui.position",jqContextMenu:"../components/jq-contextmenu/jquery.contextMenu",lodash:"../scripts/libs/lodash",backbone:"../scripts/libs/backbone",css:"../scripts/libs/css",bootstrap:"../components/bootstrap/bootstrap",colorpicker:"../components/spectrum/spectrum",lang:"../locales/lang",handlebars:"../scripts/libs/Handlebars",lexed:"../components/lexed/lexed",codemirror:"../components/codemirror",marked:"../components/marked/marked","strut/presentation_generator/bespoke":"../bundles/app/strut.presentation_generator.bespoke","strut/presentation_generator/reveal":"../bundles/app/strut.presentation_generator.reveal","strut/deck":"../bundles/app/strut.deck","strut/startup":"../bundles/app/strut.startup","strut/editor":"../bundles/app/strut.editor","strut/etch_extension":"../bundles/app/strut.etch_extension","strut/exporter/zip/browser":"../bundles/app/strut.exporter.zip.browser","strut/exporter":"../bundles/app/strut.exporter","strut/exporter/json":"../bundles/app/strut.exporter.json","strut/header":"../bundles/app/strut.header","strut/importer":"../bundles/app/strut.importer","strut/importer/json":"../bundles/app/strut.importer.json","strut/presentation_generator/impress":"../bundles/app/strut.presentation_generator.impress","strut/logo_button":"../bundles/app/strut.logo_button","strut/presentation_generator":"../bundles/app/strut.presentation_generator","strut/reveal_generator":"../bundles/app/strut.reveal_generator","strut/slide_components":"../bundles/app/strut.slide_components","strut/slide_editor":"../bundles/app/strut.slide_editor","strut/slide_snapshot":"../bundles/app/strut.slide_snapshot","strut/storage":"../bundles/app/strut.storage","strut/themes":"../bundles/app/strut.themes","strut/well_context_buttons":"../bundles/app/strut.well_context_buttons","strut/config":"../bundles/app/strut.config","strut/transition_editor":"../bundles/app/strut.transition_editor","tantaman/web/local_storage":"../bundles/common/tantaman.web.local_storage","tantaman/web/remote_storage":"../bundles/common/tantaman.web.remote_storage","tantaman/web/saver":"../bundles/common/tantaman.web.saver","tantaman/web/storage":"../bundles/common/tantaman.web.storage","tantaman/web/undo_support":"../bundles/common/tantaman.web.undo_support","tantaman/web/interactions":"../bundles/common/tantaman.web.interactions","tantaman/web/widgets":"../bundles/common/tantaman.web.widgets","tantaman/web/css_manip":"../bundles/common/tantaman.web.css_manip"},shim:{bootstrap:{deps:["jquery"]},colorpicker:{deps:["jquery"]},gradientPicker:{deps:["jquery","colorpicker"]},position:{deps:["jquery"]},jqContextMenu:{deps:["jquery","position"]},"codemirror/codemirror":{deps:["css!../components/codemirror/codemirror.css"],exports:"CodeMirror"},"codemirror/modes/css":{deps:["codemirror"]},"codemirror/modes/markdown":{deps:["codemirror/codemirror"]},handlebars:{exports:"Handlebars"}}});var i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};window.__extends=r,window.zTracker={z:0,next:function(){return++this.z}},window.clearPresentations=function(){for(var t=localStorage.length,e=0;t>e;++e){var n=localStorage.key(e);n&&-1!=n.indexOf(".strut")&&(console.log("Removing: "+n),localStorage.removeItem(n))}},window.log=function(t){log.enabled.log&&console.log(t)},log.enabled={notice:!0,err:!0,log:!0},log.err=function(t){log.enabeld.err&&console.error(t)},log.notice=function(t){log.enabled.notice&&console.log(t)},require(["lang","compiled-templates","colorpicker","strut/config/config","features","./StrutLoader","bootstrap","handlebars","jqContextMenu","css!components/jq-contextmenu/jquery.contextMenu.css"],function(t,e,n,i,r,o,s,a){"use strict";var l=window.navigator.userAgent;window.browserPrefix=l.indexOf("WebKit")>=0?"-webkit-":l.indexOf("Mozilla")>=0?"-moz-":l.indexOf("Microsoft")>=0?"-ms-":"",a.registerHelper("either",function(t,e){return null!=e?e:t}),$.event.special.destroyed={remove:function(t){t.handler&&t.handler()}},o.start(r,function(){},function(){}),$(window).unload(function(){localStorage.setItem("Strut_sessionMeta",JSON.stringify(window.sessionMeta))})}),define("main",function(){})})();